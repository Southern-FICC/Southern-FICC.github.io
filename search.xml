<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CPA-会计</title>
    <url>/post/11620/</url>
    <content><![CDATA[<h3 id="01第一章-总论"><a href="#01第一章-总论" class="headerlink" title=" 01第一章 总论"></a><i class="fa-solid fa-square-check"></i> <a href="https://Southern-FICC.github.io/cpa/01第一章 总论.pdf" target="_blank"><strong>01第一章 总论</strong></a></h3><h3 id="02第二章-存货"><a href="#02第二章-存货" class="headerlink" title=" 02第二章 存货"></a><i class="fa-solid fa-square-check"></i> <a href="https://Southern-FICC.github.io/cpa/02第二章 存货.pdf" target="_blank"><strong>02第二章 存货</strong></a></h3><h3 id="03第三章-固定资产"><a href="#03第三章-固定资产" class="headerlink" title=" 03第三章 固定资产"></a><i class="fa-solid fa-square-check"></i> <a href="https://Southern-FICC.github.io/cpa/03第三章 固定资产.pdf" target="_blank"><strong>03第三章 固定资产</strong></a></h3><h3 id="04第四章-无形资产"><a href="#04第四章-无形资产" class="headerlink" title=" 04第四章 无形资产"></a><i class="fa-solid fa-square-check"></i> <a href="https://Southern-FICC.github.io/cpa/04第四章 无形资产.pdf" target="_blank"><strong>04第四章 无形资产</strong></a></h3><h3 id="05第五章-投资性房地产"><a href="#05第五章-投资性房地产" class="headerlink" title=" 05第五章 投资性房地产"></a><i class="fa-solid fa-square-check"></i> <a href="https://Southern-FICC.github.io/cpa/05第五章 投资性房地产.pdf" target="_blank"><strong>05第五章 投资性房地产</strong></a></h3>]]></content>
      <categories>
        <category>CPA</category>
      </categories>
      <tags>
        <tag>注册会计师</tag>
      </tags>
  </entry>
  <entry>
    <title>债券实操指南-债券交易</title>
    <url>/post/46925/</url>
    <content><![CDATA[<p>在利率债的大族群中，由于流动性、交易习惯、税收政策等方面原因，不同品种债券不仅在利率水平上存在差异，且该差异可能随着市场环境的变化呈现一定的规律。国开债和国债之间，无论从利差或是隐含税率的角度衡量，除部分时点可能受流动性、债券供给或者需求端因素冲击外，长期均存在“牛窄熊阔”的规律，这也意味着，在捕捉品种利差交易机会时，需要在把握长期共性的基础上，关注潜在的扰动因素及其影响。</p>
<p>债券的利率水平，通常与经济增长率、发行主体信用资质、发行期限、债券流动性和税收差异相关，例如，利率水平与期限、违约风险正相关，而与流动性和税收政策负相关（即税收政策越有利，其利率水平越低）。<br>期限利差<br>信用利差：信用风险越高，市场要求的收益率补偿往往越高。<br>流动性利差： 由于发行方式、机构偏好、交易习惯等方面原因，从换手率和成交量来看，大部分时间内国开债流动性都要好于国债。<br>税收利差：税后收益率=税前收益率×（1-税率），若要保持相当的税后收益率，享有更多税收优惠的债券，其税前收益率应低于税收优惠较少的债券。对于债券而言，其收益一般分为票息和资本利得两部分，对于资本利得的部分，国债和国开债的税收政策一致，主要的差异在于票息部分，对于非免税主体来说，国债的票息免征6%的增值税和25%的所得税，而国开债票息仅 免征 6%增值税，不免所得税。因此，理论上，国开债与国债之间存在正的税收利差。</p>
<p>中短期限利率走势易受资金面和货币政策预期影响</p>
<p>基于税收差异的思路，可以用倒推的方法计算国债与国开债利差隐含的税率水平，即“隐含税率”指标，由于信用利差和流动性利差占比较小，近似的计算方法为：隐含税率=1-国债到期 收益率/国开债到期收益率，可以看到，国开债的隐含税率大致在 7%-20%波动。</p>
<p>与利差相似，隐含税率反映的是国开债与国债收益率的差距大小，但由于隐含税率排除了量纲的影响，因此受收益率点位的影响较小。实证上，可以看到隐含税率和利差走势相近，大致存在牛市下降，熊市上升的规律，同时，随着整体债券收益率水平的下滑，利差的波动区间也略微呈现下行趋势。</p>
<h1 id="债券交易"><a href="#债券交易" class="headerlink" title="债券交易"></a>债券交易</h1><h2 id="二级市场债券交易"><a href="#二级市场债券交易" class="headerlink" title="二级市场债券交易"></a>二级市场债券交易</h2>]]></content>
      <categories>
        <category>投研交易</category>
        <category>理论杂货</category>
      </categories>
      <tags>
        <tag>交易实操</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-单库应用-项目应用</title>
    <url>/post/21876/</url>
    <content><![CDATA[<h1 id="数据结构创建及特点"><a href="#数据结构创建及特点" class="headerlink" title="数据结构创建及特点"></a>数据结构创建及特点</h1><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%9B%E5%BB%BA%E5%8F%8A%E7%89%B9%E7%82%B9.png" alt="数据结构创建及特点"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建列表</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据类型：列表、元组、序列、集合、字典、数组、矩阵</span></span><br><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] <span class="comment"># 列表特点：有序、可变、元素可重复</span></span><br><span class="line">tuple1 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>) <span class="comment"># 元组特点：有序、不可变、元素可重复，</span></span><br><span class="line">series1 = pd.Series(list1) <span class="comment"># 序列特点：有序、可变、元素可重复</span></span><br><span class="line">set1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125; <span class="comment"># 集合特点：无序、不重复、可变</span></span><br><span class="line">dict1 = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;b&#x27;</span>:(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>),<span class="string">&#x27;c&#x27;</span>:<span class="number">1</span>&#125; <span class="comment"># 字典特点：无序、键唯一，键指的是索引(a)，值指的是元素(1)。</span></span><br><span class="line">df = pd.DataFrame(list1) <span class="comment"># 数据框特点：有序、可变、元素可重复</span></span><br><span class="line">array1 = np.array(list1) <span class="comment"># 数组特点：有序、可变、元素可重复</span></span><br><span class="line">mat1 = np.mat(<span class="string">&#x27;1 2; 3 4&#x27;</span>) <span class="comment"># 矩阵特点：有序、可变、元素可重复</span></span><br><span class="line"><span class="comment"># print(list1,tuple1,series1,set1,dict1,df,array1,mat1,sep=&#x27;\n&#x27;)</span></span><br><span class="line">set_of_tuples = <span class="built_in">set</span>([<span class="built_in">tuple</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> dict1.items()])</span><br><span class="line"><span class="comment"># print(set_of_tuples)</span></span><br></pre></td></tr></table></figure>
<h1 id="常用库及安装和错报解决"><a href="#常用库及安装和错报解决" class="headerlink" title="常用库及安装和错报解决"></a>常用库及安装和错报解决</h1><h2 id="库安装及更新："><a href="#库安装及更新：" class="headerlink" title="库安装及更新："></a>库安装及更新：</h2><ol>
<li>IDE Python环境/CMD：pip install<br>IDE是一种软件应用程序，提供了编程人员编写软件时所需的工具，例如代码编辑器、编译器、调试器等。包括VSCode、PyCharm等。</li>
<li>Jupyter Notebook：!pip install<br>加入!，以便.ipnb识别为shell代码，而不是python代码。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看pip版本</span></span><br><span class="line">pip --version</span><br><span class="line"><span class="comment"># 查看库版本</span></span><br><span class="line">pip show 库名</span><br><span class="line">pip show requests</span><br><span class="line"><span class="comment"># 下载指定版本库</span></span><br><span class="line">pip install scipy==<span class="number">1.13</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># 更新指定库</span></span><br><span class="line">pip install --upgrade 库名</span><br><span class="line"><span class="comment"># 查看当前电脑中所有可以升级的Python包</span></span><br><span class="line">pip <span class="built_in">list</span> --outdated</span><br><span class="line"><span class="comment"># 安装pip-review包</span></span><br><span class="line">pip install pip-review</span><br><span class="line"><span class="comment"># 使用pip-review命令一次性更新所有过时的包</span></span><br><span class="line">pip-review --local --interactive</span><br></pre></td></tr></table></figure>
<h2 id="错报解决："><a href="#错报解决：" class="headerlink" title="错报解决："></a>错报解决：</h2><ol>
<li>Visual Studio生成工具2022用于配置C++环境，生成VSwhere.exe，解决metadata或者VSwhere.exe缺失错误。</li>
</ol>
<h2 id="常用库介绍："><a href="#常用库介绍：" class="headerlink" title="常用库介绍："></a>常用库介绍：</h2><ol>
<li>Excel读写：<br>pandas、(openpyxl、xlsxwriter支持新版.xlsx)、(xlrd、xlwt支持旧版.xls读写，不支持新版.xlsx)<br><code>to_excel</code>方法默认使用<code>openpyxl</code>作为写入引擎来处理.xlsx文件。通过engine=”xlsxwirter”切换引擎。r转义。</li>
<li>with as用法：<br><code>with pd.excelwriter(&#39;PATH&#39;,engine=&#39;&#39;):</code><br>with表打开文件，语句结束时关闭文件。as输出with对象简称。通常用于打开或关闭文件的操作，如打开excel写入。</li>
<li>os库：<br><code>os.listdir(os.getcwd)</code>#获取目录<code>os.rename</code>#改名<code>for root, dirs, files in os.walk(file_dir)</code>#获取路径</li>
<li><strong>Pending：</strong>beautifulsoup、Numpy、Pandas、urllib、sklearn、matplotlib、sys、Pyqt5、selenium、tkinter、datetime、win32ui。</li>
</ol>
<h2 id="Python-CheatSheet"><a href="#Python-CheatSheet" class="headerlink" title="Python CheatSheet"></a>Python CheatSheet</h2><h3 id="matplotlib、matplotlib-pyplot"><a href="#matplotlib、matplotlib-pyplot" class="headerlink" title="matplotlib、matplotlib.pyplot"></a><a href="https://matplotlib.org/">matplotlib、matplotlib.pyplot</a></h3><p><a href="https://matplotlib.org/cheatsheets/cheatsheets.pdf"><strong>CheatSheet</strong></a></p>
<h3 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a><a href="https://pandas.pydata.org/">Pandas</a></h3><p><a href="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf"><strong>CheatSheet</strong></a></p>
<h3 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a><a href="https://numpy.org/">Numpy</a></h3><p><a href="https://assets.datacamp.com/blog_assets/Numpy_Python_Cheat_Sheet.pdf"><strong>CheatSheet</strong></a></p>
<h1 id="Python内置变量说明"><a href="#Python内置变量说明" class="headerlink" title="Python内置变量说明"></a>Python内置变量说明</h1><h2 id="类-Class-，对象-Object-、方法-Method"><a href="#类-Class-，对象-Object-、方法-Method" class="headerlink" title="类(Class)，对象(Object)、方法(Method)"></a>类(Class)，对象(Object)、方法(Method)</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> Python中所有东西都是对象，只是看从属关系，比如类的实例(对象)。字段(Field)通常指的是类或对象的属性，如下方的name和age。</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 类(Class)，对象(Object)、方法(Method)一个类能够创建以中新的类型(Type)，其中对象就是类的实例(Instance)。即，创建类的对象后，对象中的数据可以调用类的方法。类的方法又称为类的函数。字段(自己称为初始属性)与方法通称为类的属性(Attribute)。字段有my<span class="emphasis">_list = [1, 2, 3]，其中list为类，my_</span>list为list的实例(对象)，“1,2,3”为my<span class="emphasis">_list的元素。</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">3. 类的结构为：</span></span><br><span class="line"><span class="emphasis">    	class Person:</span></span><br><span class="line"><span class="emphasis">        	population = 0 #<span class="strong">**此为类变量，其余均为对象变量**</span></span></span><br><span class="line"><span class="emphasis">        def <span class="strong">__init__</span>(self, name, age):</span></span><br><span class="line"><span class="emphasis">            self.name = name</span></span><br><span class="line"><span class="emphasis">            self.age = age</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">        def introduce(self, other):</span></span><br><span class="line"><span class="emphasis">            print(f&quot;Hello, &#123;other&#125;, my name is &#123;self.name&#125; and I&#x27;m &#123;self.age&#125; years old.&quot;)</span></span><br><span class="line"><span class="emphasis">        p = Person(&#x27;Alice&#x27;, 25)</span></span><br><span class="line"><span class="emphasis">        p.introduce(&#x27;Bob&#x27;)  </span></span><br><span class="line"><span class="emphasis">        # 输出：Hello, Bob, my name is Alice and I&#x27;m 25 years old.</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">4. <span class="strong">__init__</span>为初始化类的属性，该方法会在类的对象被实例化时立即运行，将两个参数name和age的值赋给self.name和self.age。</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">5. 当使用对象调用方法时，对象本身的参数self会自动传递给实例P，所以p.introduce(&#x27;Bob&#x27;)不需要写为p.introduce(self,&#x27;Bob&#x27;)。而且，Python实际上是在后台调用Person.introduce(p,&#x27;Bob&#x27;)。如果手动传递self参数，会报错，系统认为传递了更多的参数。但是如果方法没有参数，那么必须写入self参数。</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">6. 可以给类属性和类方法设置默认参数，或者给方法增加参数。但是传递给对象的时候，不能漏写一个参数，否则会报错。即实例属性/实例变量(Instance Variable)和类属性/变量(Class Variables)</span></span><br><span class="line"><span class="emphasis">    </span></span><br><span class="line"><span class="emphasis">7. 之所以不直接用 a = Person.introduce() 来引用，有两个原因：</span></span><br><span class="line"><span class="emphasis">	a. 本来用类调用方法就会触发错误，类必须先传递给对象(传递给对象(即实例)后，对象就有了类的属性以及方法，通过对象调用方法)</span></span><br><span class="line"><span class="emphasis">    b. 直接通过类设置属性，可以使得类下面的方法都能使用相同的参数。不过。静态方法和类方法不需要实例，它们可以直接通过类来调用。静态方法使用@staticmethod装饰器定义，类方法使用@classmethod装饰器定义。</span></span><br><span class="line"><span class="emphasis">   		class MyClass:@staticmethod </span></span><br><span class="line"><span class="emphasis">   		def my_</span>static<span class="emphasis">_method():</span></span><br><span class="line"><span class="emphasis">   	    	print(&quot;This is a static method.&quot;)</span></span><br><span class="line"><span class="emphasis">        </span></span><br><span class="line"><span class="emphasis">        @classmethod</span></span><br><span class="line"><span class="emphasis">        def my_</span>class<span class="emphasis">_method(cls):</span></span><br><span class="line"><span class="emphasis">            print(&quot;This is a class method.&quot;)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    	MyClass.my_</span>static<span class="emphasis">_method()  # 输出：This is a static method.</span></span><br><span class="line"><span class="emphasis">    	MyClass.my_</span>class<span class="emphasis">_method()  # 输出：This is a class method.</span></span><br><span class="line"><span class="emphasis">8. numpy是模块，numpy.array是工厂函数，numpy.ndarray是类，如：a = numpy.array([1,2,3])，其中a为变量也是numpy.ndarray类的对象/实例，numpy.array作为模块中的函数，给numpy.ndarray类创建对象。因为函数(工厂函数)能够输入不同类型的数据，而类若需要为不同类型的输入数据创建对象，会使得类有更为复杂的初始化过程。</span></span><br><span class="line"><span class="emphasis">		class Person:</span></span><br><span class="line"><span class="emphasis">			pass</span></span><br><span class="line"><span class="emphasis">		p = Person()</span></span><br><span class="line"><span class="emphasis">		print(p)</span></span><br><span class="line"><span class="emphasis"></span></span><br></pre></td></tr></table></figure>
<h2 id="if-name-‘-main-‘"><a href="#if-name-‘-main-‘" class="headerlink" title="if __name__ == ‘__main__‘:"></a>if <code>__name__</code> == ‘<code>__main__</code>‘:</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">    function()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">#__name__和__main__都是内置变量，当文件被直接执行时，__name__的值就是__main__，文件中代码均被执行。</span></span><br><span class="line"><span class="comment">#当文件作为模块被导入时，__name__的值就是文件名()，`if`下的内容均不会被执行。</span></span><br><span class="line"><span class="comment">#该结构常用于测试文件中的代码，即`if`下为测试代码。如此，可以将测试代码一同保留在文件中，且被导入时不会执行测试代码。</span></span><br></pre></td></tr></table></figure>
<h1 id="Matplotlib应用"><a href="#Matplotlib应用" class="headerlink" title="Matplotlib应用"></a>Matplotlib应用</h1><h2 id="坐标轴绘制"><a href="#坐标轴绘制" class="headerlink" title="坐标轴绘制"></a>坐标轴绘制</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Microsoft YaHei&#x27;</span>]  <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>  <span class="comment"># 用来正常显示负号</span></span><br><span class="line"><span class="comment"># 定义增函数的参数</span></span><br><span class="line">a = <span class="number">0.5</span>  <span class="comment"># a为增函数的斜率</span></span><br><span class="line">Rf = <span class="number">6</span>  <span class="comment"># Rf为y轴交点的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建图形和坐标系</span></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">6</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制箭头</span></span><br><span class="line">ax.arrow(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, head_width=<span class="number">0.2</span>, head_length=<span class="number">0.3</span>, fc=<span class="string">&#x27;black&#x27;</span>, ec=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax.arrow(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, head_width=<span class="number">0.2</span>, head_length=<span class="number">0.3</span>, fc=<span class="string">&#x27;black&#x27;</span>, ec=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标题</span></span><br><span class="line">ax.text(<span class="number">10</span>, -<span class="number">0.5</span>, <span class="string">&#x27;β&#x27;</span>, fontsize=<span class="number">12</span>, ha=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line">ax.text(-<span class="number">0.5</span>, <span class="number">10</span>, <span class="string">&#x27;E(R)&#x27;</span>, fontsize=<span class="number">12</span>, va=<span class="string">&#x27;center&#x27;</span>, rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐藏刻度</span></span><br><span class="line">ax.set_xticks([])</span><br><span class="line">ax.set_yticks([])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐藏边框线条</span></span><br><span class="line"><span class="keyword">for</span> spine <span class="keyword">in</span> ax.spines.values():</span><br><span class="line">    spine.set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制增函数</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br><span class="line">y = a * x + Rf</span><br><span class="line">plt.plot(x, y, color=<span class="string">&#x27;black&#x27;</span>, linestyle=<span class="string">&#x27;-&#x27;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在线段中间标记红色点，并写上点的名字</span></span><br><span class="line">mid_point_x = <span class="number">5</span>  <span class="comment"># x轴坐标</span></span><br><span class="line">mid_point_y = a * mid_point_x + Rf  <span class="comment"># y轴坐标</span></span><br><span class="line">plt.plot(mid_point_x, mid_point_y, <span class="string">&#x27;ro&#x27;</span>)  <span class="comment"># 标记红色点</span></span><br><span class="line">ax.text(mid_point_x, mid_point_y + <span class="number">0.5</span>, <span class="string">&#x27;基金P&#x27;</span>, fontsize=<span class="number">12</span>, color=<span class="string">&#x27;red&#x27;</span>, ha=<span class="string">&#x27;center&#x27;</span>)  <span class="comment"># 在点上方写上点的名字</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在y轴交点处标上Rf</span></span><br><span class="line">ax.plot(<span class="number">0</span>, Rf, <span class="string">&#x27;ro&#x27;</span>)  <span class="comment"># 标记交点</span></span><br><span class="line">ax.text(-<span class="number">0.5</span>, Rf, <span class="string">&#x27;Rf&#x27;</span>, fontsize=<span class="number">12</span>, va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>)  <span class="comment"># 添加标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画从Rf向右延申的蓝色线</span></span><br><span class="line">plt.plot([<span class="number">0</span>, mid_point_x], [Rf, Rf], color=<span class="string">&#x27;blue&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画从基金P开始的垂直于x轴的蓝色线，终点设置为与水平蓝色线相交的位置</span></span><br><span class="line">plt.plot([mid_point_x, mid_point_x], [mid_point_y, Rf], color=<span class="string">&#x27;blue&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h2 id="绘制带有LaTex的坐标图"><a href="#绘制带有LaTex的坐标图" class="headerlink" title="绘制带有LaTex的坐标图"></a>绘制带有LaTex的坐标图</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.rcParams[<span class="string">&#x27;text.usetex&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;text.latex.preamble&#x27;</span>] = <span class="string">r&#x27;\usepackage&#123;CJK&#125;&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Microsoft YaHei&#x27;</span>]  <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>  <span class="comment"># 用来正常显示负号</span></span><br><span class="line"><span class="comment"># 定义增函数的参数</span></span><br><span class="line">a = <span class="number">0.5</span>  <span class="comment"># a为增函数的斜率</span></span><br><span class="line">Rf = <span class="number">6</span>  <span class="comment"># Rf为y轴交点的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建图形和坐标系</span></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">6</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制箭头</span></span><br><span class="line">ax.arrow(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, head_width=<span class="number">0.2</span>, head_length=<span class="number">0.3</span>, fc=<span class="string">&#x27;black&#x27;</span>, ec=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax.arrow(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, head_width=<span class="number">0.2</span>, head_length=<span class="number">0.3</span>, fc=<span class="string">&#x27;black&#x27;</span>, ec=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标题</span></span><br><span class="line">ax.text(<span class="number">10</span>, -<span class="number">0.5</span>, <span class="string">r&#x27;$\beta$&#x27;</span>, fontsize=<span class="number">12</span>, ha=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line">ax.text(-<span class="number">0.5</span>, <span class="number">10</span>, <span class="string">r&#x27;$E(R)$&#x27;</span>, fontsize=<span class="number">12</span>, va=<span class="string">&#x27;center&#x27;</span>, rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐藏刻度</span></span><br><span class="line">ax.set_xticks([])</span><br><span class="line">ax.set_yticks([])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐藏边框线条</span></span><br><span class="line"><span class="keyword">for</span> spine <span class="keyword">in</span> ax.spines.values():</span><br><span class="line">    spine.set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制增函数</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br><span class="line">y = a * x + Rf</span><br><span class="line">plt.plot(x, y, color=<span class="string">&#x27;black&#x27;</span>, linestyle=<span class="string">&#x27;-&#x27;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在线段中间标记红色点，并写上点的名字</span></span><br><span class="line">mid_point_x = <span class="number">5</span>  <span class="comment"># x轴坐标</span></span><br><span class="line">mid_point_y = a * mid_point_x + Rf  <span class="comment"># y轴坐标</span></span><br><span class="line">plt.plot(mid_point_x, mid_point_y, <span class="string">&#x27;ro&#x27;</span>)  <span class="comment"># 标记红色点</span></span><br><span class="line">ax.text(mid_point_x, mid_point_y + <span class="number">0.5</span>,  <span class="string">r&#x27;\begin&#123;CJK&#125;&#123;UTF8&#125;&#123;song&#125;基金P\end&#123;CJK&#125;&#x27;</span>, fontsize=<span class="number">12</span>, color=<span class="string">&#x27;red&#x27;</span>, ha=<span class="string">&#x27;center&#x27;</span>)  <span class="comment"># 在点上方写上点的名字</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在y轴交点处标上Rf</span></span><br><span class="line">ax.plot(<span class="number">0</span>, Rf, <span class="string">&#x27;ro&#x27;</span>)  <span class="comment"># 标记交点</span></span><br><span class="line">ax.text(-<span class="number">0.5</span>, Rf, <span class="string">&#x27;Rf&#x27;</span>, fontsize=<span class="number">12</span>, va=<span class="string">&#x27;center&#x27;</span>, ha=<span class="string">&#x27;right&#x27;</span>)  <span class="comment"># 添加标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画从Rf向右延申的蓝色线</span></span><br><span class="line">plt.plot([<span class="number">0</span>, mid_point_x], [Rf, Rf], color=<span class="string">&#x27;blue&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画从基金P开始的垂直于x轴的蓝色线，终点设置为与水平蓝色线相交的位置</span></span><br><span class="line">plt.plot([mid_point_x, mid_point_x], [mid_point_y, Rf], color=<span class="string">&#x27;blue&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在坐标右侧添加一个文本框</span></span><br><span class="line">text_box_content = <span class="string">r&#x27;\begin&#123;CJK&#125;&#123;UTF8&#125;&#123;song&#125;斜率$=\frac&#123;\overline&#123;R_p&#125;-\overline&#123;R_f&#125;&#125;&#123;\beta_p&#125;$\end&#123;CJK&#125;&#x27;</span>+ <span class="string">r&#x27;$\\$&#x27;</span>+<span class="string">r&#x27;\begin&#123;CJK&#125;&#123;UTF8&#125;&#123;song&#125;证券市场线上任一个组合的斜率即为特雷诺比率，\\即单位系统风险下的超额收益率\end&#123;CJK&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">3</span>, <span class="number">5</span>, text_box_content, fontsize=<span class="number">12</span>, bbox=<span class="built_in">dict</span>(facecolor=<span class="string">&#x27;white&#x27;</span>, alpha=<span class="number">0.5</span>), va=<span class="string">&#x27;top&#x27;</span>, ha=<span class="string">&#x27;left&#x27;</span>, usetex=<span class="literal">True</span>) </span><br><span class="line"><span class="comment">#verticle align\herizon align</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="OS应用"><a href="#OS应用" class="headerlink" title="OS应用"></a>OS应用</h1><h2 id="Python文件打包"><a href="#Python文件打包" class="headerlink" title="Python文件打包"></a>Python文件打包</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> filedialog</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">select_file</span>():</span><br><span class="line">    <span class="comment"># 弹出文件选择框</span></span><br><span class="line">    filename = filedialog.askopenfilename()</span><br><span class="line">    <span class="comment"># filename = input(&#x27;请输入要打包脚本的文件名：&#x27;)</span></span><br><span class="line">    <span class="comment"># 打包参数：--onefile 生成单个可执行文件 --noconfirm 不询问直接打包 --distpath 打包后文件的存放路径，由于是			shell命令，所以用空格分隔，不用冒号</span></span><br><span class="line">    subprocess.run([<span class="string">&#x27;pyinstaller&#x27;</span>, <span class="string">&#x27;--onefile&#x27;</span>, <span class="string">&#x27;--noconfirm&#x27;</span>, <span class="string">&#x27;--distpath&#x27;</span>, <span class="string">&#x27;./&#x27;</span>, filename])</span><br><span class="line">    shutil.rmtree(<span class="string">&#x27;./build&#x27;</span>)</span><br><span class="line">    <span class="comment"># messagebox.showinfo(f&#x27;./&#123;filename.split(&quot;.&quot;)[0]&#125;.spec&#x27;)</span></span><br><span class="line">    <span class="comment"># os.remove(&#x27;./修改文件名-汇总文件名.spec&#x27;)</span></span><br><span class="line">    <span class="comment"># if os.path.exists(f&#x27;./&#123;filename.split(&quot;.&quot;)[0]&#125;.spec&#x27;):</span></span><br><span class="line">        <span class="comment"># messagebox.showinfo(f&#x27;./&#123;filename.split(&quot;.&quot;)[0]&#125;.spec&#x27;)</span></span><br><span class="line">        <span class="comment"># os.remove(f&#x27;./&#123;filename.split(&quot;.&quot;)[0]&#125;.spec&#x27;)</span></span><br><span class="line">    root.destroy() <span class="comment"># 关闭窗口</span></span><br><span class="line"></span><br><span class="line">root = tk.Tk()</span><br><span class="line">button = tk.Button(root, text=<span class="string">&quot;Select file&quot;</span>, command=select_file)</span><br><span class="line">button.pack()</span><br><span class="line">root.mainloop()</span><br></pre></td></tr></table></figure>
<h2 id="文件压缩"><a href="#文件压缩" class="headerlink" title="文件压缩"></a>文件压缩</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">source = [<span class="string">&#x27;D:\Develop_Blog\source\Repository\Python数据分析\Jungle.py&#x27;</span>]</span><br><span class="line">target_dir = <span class="string">&#x27;D:\Develop_Blog\source\Repository\Python数据分析\Backup&#x27;</span></span><br><span class="line"><span class="comment"># target = target_dir + os.sep+time.strftime(&#x27;%Y%m%d%H%M%S&#x27;)+&#x27;.zip&#x27;</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(target_dir):</span><br><span class="line">    os.mkdir(target_dir)</span><br><span class="line">today = target_dir + os.sep+time.strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>)</span><br><span class="line">now = time.strftime(<span class="string">&#x27;%H%M%S&#x27;</span>)</span><br><span class="line">comment = <span class="built_in">input</span>(<span class="string">&#x27;Enter a comment --&gt;&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(comment) == <span class="number">0</span>:</span><br><span class="line">    target = today+os.sep+now+<span class="string">&#x27;.zip&#x27;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    target = today+os.sep+now+<span class="string">&#x27;_&#x27;</span>+comment.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;_&#x27;</span>)+<span class="string">&#x27;.zip&#x27;</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(today):</span><br><span class="line">    os.mkdir(today)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Successfully created directory&#x27;</span>,today)</span><br><span class="line">zip_command = <span class="string">&#x27;zip -r &#123;0&#125; &#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(target,<span class="string">&#x27; &#x27;</span>.join(source))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Zip command is:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(zip_command)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Running:&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> os.system(zip_command) == <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Successful backup to&#x27;</span>,target)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Backup FAILED&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="修改汇总文件名"><a href="#修改汇总文件名" class="headerlink" title="修改汇总文件名"></a>修改汇总文件名</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tkinter</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> filedialog, simpledialog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化文件夹</span></span><br><span class="line">blank_close = tkinter.Tk()</span><br><span class="line">blank_close.withdraw()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹出文件夹选择框</span></span><br><span class="line">folder_path = filedialog.askdirectory()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件夹下的文件名</span></span><br><span class="line">filename = os.listdir(folder_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 汇总文件名</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">summarize_filename</span>(<span class="params">filename</span>):</span><br><span class="line">    df = pd.DataFrame(np.row_stack(filename))</span><br><span class="line">    excel_name = simpledialog.askstring(<span class="string">&quot;输入框&quot;</span>,<span class="string">&quot;请输入要保存的Excel文件名: &quot;</span>, parent=blank_close)</span><br><span class="line">    df.to_excel(<span class="string">f&#x27;./<span class="subst">&#123;excel_name&#125;</span>.xlsx&#x27;</span>, header=<span class="literal">False</span>, index=<span class="literal">False</span>, sheet_name=<span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化计数器</span></span><br><span class="line">total_files = <span class="built_in">len</span>(filename)</span><br><span class="line">modified_files = <span class="number">0</span></span><br><span class="line">unmodified_files = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历文件夹中的所有文件并更改文件名</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rename_file</span>():</span><br><span class="line">    <span class="keyword">if</span> filename:</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> filename:</span><br><span class="line">            <span class="keyword">if</span> file.endswith(<span class="string">&#x27;.pdf&#x27;</span>):</span><br><span class="line">                file_path = os.path.join(folder_path, file)</span><br><span class="line">                base_name = os.path.splitext(file)[<span class="number">0</span>]</span><br><span class="line">                <span class="comment"># 更改文件名</span></span><br><span class="line">                new_filename = base_name + <span class="string">&#x27;.pptx&#x27;</span></span><br><span class="line">                new_file_path = os.path.join(folder_path, new_filename)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    os.rename(file_path, new_file_path)</span><br><span class="line">                    <span class="comment"># 拼接文件路径</span></span><br><span class="line">                    <span class="comment"># print(&quot;File renamed from &quot; + file + &quot; to &quot; + new_filename) # 通过+号拼接字符串，其中							变量须为字符串类型，即variable = str</span></span><br><span class="line">                    <span class="comment"># print(&quot;File renamed from &#123;&#125; to &#123;&#125;&quot;.format(file, new_filename)) # 通过.format()拼接						字符串，其中变量可以为任意类型</span></span><br><span class="line">                    <span class="comment"># 或：print(&quot;File renamed from &#123;0&#125; to &#123;1&#125;&quot;.format(file, new_filename)) </span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&#x27;File renamed from <span class="subst">&#123;file&#125;</span> to <span class="subst">&#123;new_filename&#125;</span>&#x27;</span>)</span><br><span class="line">                    modified_files += <span class="number">1</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="comment"># 打印错误信息</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&#x27;Error renaming file <span class="subst">&#123;file&#125;</span>: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                unmodified_files += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Selected folder is empty.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印统计结果</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Total files: <span class="subst">&#123;total_files&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Modified files: <span class="subst">&#123;modified_files&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Unmodified files: <span class="subst">&#123;unmodified_files&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    summarize_filename(filename)</span><br><span class="line">    rename_file()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;File renaming process completed.&quot;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="项目应用"><a href="#项目应用" class="headerlink" title="项目应用"></a>项目应用</h1><h2 id="爬虫应用-01"><a href="#爬虫应用-01" class="headerlink" title="爬虫应用-01"></a>爬虫应用-01</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> tkinter</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox</span><br><span class="line">blank_close = tkinter.Tk()</span><br><span class="line">blank_close.withdraw()</span><br><span class="line">messagebox.showinfo(<span class="string">&#x27;提示&#x27;</span>,<span class="string">&#x27;确认后导入《律所清单》Excel文件&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> retrying <span class="keyword">import</span> retry</span><br><span class="line">start_time = datetime.datetime.now()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;律所网站爬取测试&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;浏览器设置变量--无界面模式&#x27;&#x27;&#x27;</span></span><br><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">browser = webdriver.Chrome(options=chrome_options)</span><br><span class="line">chrome_options.page_load_strategy = <span class="string">&#x27;none&#x27;</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas.core.frame <span class="keyword">import</span> DataFrame</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;打开文件文本框&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> win32ui</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">dlg = win32ui.CreateFileDialog(<span class="number">1</span>)</span><br><span class="line">dlg.SetOFNInitialDir(<span class="string">&#x27;D:\&#x27;&#x27;</span>)</span><br><span class="line">dlg.DoModal()</span><br><span class="line">filename = dlg.GetPathName()</span><br><span class="line">save_root = os.path.split(filename)</span><br><span class="line">save_root = save_root[<span class="number">0</span>]+<span class="string">&#x27;\\&#x27;</span></span><br><span class="line"><span class="comment"># print(save_root)</span></span><br><span class="line"><span class="comment"># print(filename[:filename.rfind(&quot;.&quot;)])</span></span><br><span class="line">LawFirm = pd.read_excel(<span class="string">r&#x27;&#x27;</span>+filename+<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;去除空格&#x27;&#x27;&#x27;</span></span><br><span class="line">LawFirm = LawFirm.applymap(<span class="keyword">lambda</span> x:x.strip() <span class="keyword">if</span> <span class="built_in">type</span>(x)==<span class="built_in">str</span> <span class="keyword">else</span> x)</span><br><span class="line">df = LawFirm.values.tolist()</span><br><span class="line">Info_dict = <span class="built_in">dict</span>(df)</span><br><span class="line"><span class="comment"># print(Info_dict[&#x27;北京市金杜（广州）律师事务所&#x27;])</span></span><br><span class="line">dictionary = &#123;<span class="string">&#x27;姓名&#x27;</span>:[],<span class="string">&#x27;性别&#x27;</span>:[],<span class="string">&#x27;民族&#x27;</span>:[],<span class="string">&#x27;执业机构:&#x27;</span>:[],<span class="string">&#x27;执业证号&#x27;</span>:[],<span class="string">&#x27;律师（法律职业）资格证号&#x27;</span>:[],<span class="string">&#x27;执业时间&#x27;</span>:[],<span class="string">&#x27;毕业院校&#x27;</span>:[],<span class="string">&#x27;所读专业&#x27;</span>:[],<span class="string">&#x27;最高学历&#x27;</span>:[],<span class="string">&#x27;取得学历时间&#x27;</span>:[],<span class="string">&#x27;取得学位时间&#x27;</span>:[],<span class="string">&#x27;最高学位&#x27;</span>:[],<span class="string">&#x27;本年度注册情况&#x27;</span>:[],<span class="string">&#x27;链接&#x27;</span>:[]&#125;</span><br><span class="line"><span class="comment"># @retry(wait_fixed=10, stop_max_attempt_number=1)</span></span><br><span class="line">Test_env = <span class="built_in">input</span>(<span class="string">&#x27;是否测试：是/否&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> q <span class="keyword">in</span> Info_dict.keys():</span><br><span class="line">    address = Info_dict[q]</span><br><span class="line">    <span class="comment"># browser = webdriver.Chrome()</span></span><br><span class="line">    browser.get(address)</span><br><span class="line">    xpath = <span class="string">&quot;//div[@class=&#x27;infodetail&#x27;]/table/tbody/tr[8]/td[3]/a&quot;</span></span><br><span class="line">    url_pre = browser.find_elements()</span><br><span class="line">    url_pre = browser.find_elements(By.XPATH,xpath)</span><br><span class="line">    urllist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> url_pre:</span><br><span class="line">        url = i.get_attribute(<span class="string">&quot;href&quot;</span>)</span><br><span class="line">        urllist.append(url)</span><br><span class="line">    <span class="comment"># print(urllist)</span></span><br><span class="line">    <span class="comment"># print(len(urllist))</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;律所人员网页爬取测试&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">    <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">    <span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">    <span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">    <span class="comment"># browser = webdriver.Chrome()</span></span><br><span class="line">    namelist = [<span class="string">&#x27;姓名&#x27;</span>,<span class="string">&#x27;性别&#x27;</span>,<span class="string">&#x27;民族&#x27;</span>,<span class="string">&#x27;执业机构:&#x27;</span>,<span class="string">&#x27;执业证号&#x27;</span>,<span class="string">&#x27;律师（法律职业）资格证号&#x27;</span>,<span class="string">&#x27;执业时间&#x27;</span>,<span class="string">&#x27;毕业院校&#x27;</span>,<span class="string">&#x27;所读专业&#x27;</span>,<span class="string">&#x27;最高学历&#x27;</span>,<span class="string">&#x27;取得学历时间&#x27;</span>,<span class="string">&#x27;取得学位时间&#x27;</span>,<span class="string">&#x27;最高学位&#x27;</span>,<span class="string">&#x27;本年度注册情况&#x27;</span>]</span><br><span class="line">    <span class="comment"># dictionary = &#123;&#x27;姓名&#x27;:[],&#x27;性别&#x27;:[],&#x27;民族&#x27;:[],&#x27;执业机构:&#x27;:[],&#x27;执业证号&#x27;:[],&#x27;律师（法律职业）资格证号&#x27;:[],&#x27;执业时间&#x27;:[],&#x27;毕业院校&#x27;:[],&#x27;所读专业&#x27;:[],&#x27;最高学历&#x27;:[],&#x27;取得学历时间&#x27;:[],&#x27;取得学位时间&#x27;:[],&#x27;最高学位&#x27;:[],&#x27;本年度注册情况&#x27;:[]&#125;</span></span><br><span class="line">    <span class="comment"># dictionary = dict.fromkeys(namelist)</span></span><br><span class="line">    <span class="comment"># print(type(dictionary[&#x27;姓名&#x27;]))</span></span><br><span class="line">    number = <span class="number">0</span></span><br><span class="line">    y = <span class="number">0</span></span><br><span class="line">    loop = <span class="number">0</span></span><br><span class="line">    pool_1 = &#123;<span class="string">&#x27;1&#x27;</span>:<span class="number">6</span>,<span class="string">&#x27;2&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;3&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;4&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;5&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;6&#x27;</span>:<span class="number">4</span>,<span class="string">&#x27;7&#x27;</span>:<span class="number">1</span>&#125;</span><br><span class="line">    <span class="comment"># pool_2 = &#123;&#x27;2&#x27;:&#x27;姓名&#x27;,&#x27;4&#x27;:&#x27;性别&#x27;,&#x27;6&#x27;:&#x27;民族&#x27;,&#x27;2&#x27;:&#x27;执业机构&#x27;,&#x27;4&#x27;:&#x27;执业证号&#x27;,&#x27;2&#x27;:&#x27;律师证号&#x27;,&#x27;4&#x27;:&#x27;执业时间&#x27;,&#x27;2&#x27;:&#x27;毕业院校&#x27;,&#x27;4&#x27;:&#x27;所读专业&#x27;,&#x27;2&#x27;:&#x27;最高学历&#x27;,&#x27;4&#x27;:&#x27;最高学位&#x27;,&#x27;2&#x27;:&#x27;取得学位时间&#x27;,&#x27;4&#x27;:&#x27;取得学历时间&#x27;,&#x27;2&#x27;:&#x27;本年度注册情况&#x27;&#125;</span></span><br><span class="line">    pool_2 = &#123;<span class="string">&#x27;1&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;姓名&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;性别&#x27;</span>,<span class="number">6</span>:<span class="string">&#x27;民族&#x27;</span>&#125;,<span class="string">&#x27;2&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;执业机构:&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;执业证号&#x27;</span>&#125;,<span class="string">&#x27;3&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;律师（法律职业）资格证号&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;执业时间&#x27;</span>&#125;,<span class="string">&#x27;4&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;毕业院校&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;所读专业&#x27;</span>&#125;,<span class="string">&#x27;5&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;最高学历&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;取得学位时间&#x27;</span>&#125;,<span class="string">&#x27;6&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;最高学位&#x27;</span>,<span class="number">4</span>:<span class="string">&#x27;取得学历时间&#x27;</span>&#125;,<span class="string">&#x27;7&#x27;</span>:&#123;<span class="number">2</span>:<span class="string">&#x27;本年度注册情况&#x27;</span>&#125;&#125;</span><br><span class="line">    <span class="comment"># TEST = pool_2.get(&#x27;1&#x27;,&#123;&#125;).get(2)</span></span><br><span class="line">    <span class="comment"># print(dictionary[TEST])</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> urllist:</span><br><span class="line">        browser.get(i)</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">8</span>):</span><br><span class="line">                <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(pool_1.get(<span class="built_in">str</span>(p))+<span class="number">1</span>):</span><br><span class="line">                    xpath = <span class="string">&#x27;//div[@class=&quot;infodetail&quot;]/table[1]/tbody/tr[&#x27;</span> + <span class="built_in">str</span>(p) + <span class="string">&#x27;]/td[&#x27;</span> + <span class="built_in">str</span>(y) + <span class="string">&#x27;]&#x27;</span></span><br><span class="line">                    url_pre = browser.find_elements(By.XPATH,xpath)</span><br><span class="line">                    <span class="keyword">for</span> t <span class="keyword">in</span> url_pre:</span><br><span class="line">                        name = t.text</span><br><span class="line">                        <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> namelist:</span><br><span class="line">                            <span class="keyword">if</span> <span class="built_in">len</span>(name) != <span class="number">0</span>:</span><br><span class="line">                                pool_track = pool_2.get(<span class="built_in">str</span>(p),&#123;&#125;).get(y)</span><br><span class="line">                                <span class="comment"># dictionary.get(pool_track).append(name)</span></span><br><span class="line">                                dictionary[pool_track].append(name)</span><br><span class="line">                                <span class="comment"># pool_add = &#123;pool_track:name&#125;</span></span><br><span class="line">                                <span class="comment"># dictionary.update(pool_add)</span></span><br><span class="line">                                <span class="comment"># dictionary.update(&#123;&#x27;链接&#x27;:i&#125;)</span></span><br><span class="line">                                <span class="comment"># print(pool_track,name,pool_track,p,y)</span></span><br><span class="line">                            <span class="keyword">else</span>:</span><br><span class="line">                                name = <span class="literal">None</span></span><br><span class="line">                                pool_track = pool_2.get(<span class="built_in">str</span>(p),&#123;&#125;).get(y)</span><br><span class="line">                                dictionary[pool_track].append(name)</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="literal">None</span></span><br><span class="line">        dictionary[<span class="string">&#x27;链接&#x27;</span>].append(i)</span><br><span class="line">        <span class="keyword">if</span> Test_env == <span class="string">&quot;是&quot;</span>:</span><br><span class="line">            number = number + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> number == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">df = pd.DataFrame.from_dict(dictionary,orient=<span class="string">&#x27;index&#x27;</span>)</span><br><span class="line">df = df.T</span><br><span class="line"><span class="comment"># print(dictionary)</span></span><br><span class="line"><span class="comment"># print(df)</span></span><br><span class="line">browser.quit()</span><br><span class="line"></span><br><span class="line">message = <span class="built_in">input</span>(<span class="string">&#x27;文件名： 如：律所遍历 &#x27;</span>   )</span><br><span class="line">df.to_excel(save_root + message +<span class="string">&#x27;.xlsx&#x27;</span>, sheet_name=<span class="string">&#x27;律所遍历&#x27;</span>, header=<span class="number">1</span>, index=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># message = input(&#x27;是否覆盖原文档:  是/否 &#x27;)</span></span><br><span class="line"><span class="comment"># if message == &#x27;是&#x27;:</span></span><br><span class="line"><span class="comment">#     df.to_excel(r&#x27;&#x27; + save_root + &#x27;律所遍历.xlsx&#x27;, sheet_name=&#x27;律所遍历&#x27;, header=1, index=False)</span></span><br><span class="line"><span class="comment">#     df.to_excel(filename, sheet_name=&#x27;律所遍历&#x27;, header=1, index=False)</span></span><br><span class="line"><span class="comment"># else:</span></span><br><span class="line"><span class="comment">#     df.to_excel(r&#x27;&#x27; + save_root + &#x27;律所遍历.xlsx&#x27;, sheet_name=&#x27;律所遍历&#x27;, header=1, index=False)</span></span><br><span class="line">end_time = datetime.datetime.now()</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox</span><br><span class="line">blank_close = tkinter.Tk()</span><br><span class="line">blank_close.withdraw()</span><br><span class="line">messagebox.showinfo(<span class="string">&#x27;程序完成用时&#x27;</span>,end_time - start_time)</span><br><span class="line"><span class="comment"># print(&#x27;程序完成用时&#x27;,end_time - start_time)</span></span><br><span class="line"><span class="comment"># browser.close()</span></span><br><span class="line">apply = QApplication(sys.argv)</span><br><span class="line">self.widget</span><br></pre></td></tr></table></figure>
<h2 id="量化应用-01"><a href="#量化应用-01" class="headerlink" title="量化应用-01"></a>量化应用-01</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#获取基本数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span> (ID,ID_name):</span><br><span class="line">    df_getdata = w.edb(ID,<span class="string">&quot;20091001&quot;</span>,<span class="string">&quot;20211031&quot;</span>,<span class="string">&quot;Period=M;Days=Alldays;Fill=Previous&quot;</span>,usedf=<span class="literal">True</span>)[<span class="number">1</span>]</span><br><span class="line">    df_getdata.columns = ID_name</span><br><span class="line">    <span class="keyword">return</span> df_getdata</span><br><span class="line"><span class="comment">#计算指标的同比</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">df_yoy</span>(<span class="params">ID_code</span>):</span><br><span class="line">    yoy_code = [dictionary[i] <span class="keyword">for</span> i <span class="keyword">in</span> ID_code]</span><br><span class="line">    df_yoy = w.edb(yoy_code,<span class="string">&quot;20091001&quot;</span>,<span class="string">&quot;20211031&quot;</span>,<span class="string">&quot;Period=M;Days=Alldays;Fill=Previous&quot;</span>, usedf = <span class="literal">True</span>)[<span class="number">1</span>]</span><br><span class="line">    df_yoy.columns = ID_code</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(yoy_code)):</span><br><span class="line">        df_yoy[ID_code[i]+<span class="string">&#x27;同比&#x27;</span>] = df_yoy[[ID_code[i]]].pct_change(periods=<span class="number">12</span>)</span><br><span class="line">        <span class="keyword">del</span> df_yoy[ID_code[i]]</span><br><span class="line">    <span class="keyword">return</span> df_yoy</span><br><span class="line"><span class="comment">#获取收益率序列</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">df_return</span>(<span class="params">industry</span>):</span><br><span class="line">    df_return = w.wsd(industry,<span class="string">&quot;close&quot;</span>,<span class="string">&quot;20090901&quot;</span>,<span class="string">&quot;20211231&quot;</span>,<span class="string">&quot;Period=M;Days=Alldays;Fill=Previous&quot;</span>,usedf=<span class="literal">True</span>)[<span class="number">1</span>]</span><br><span class="line">    df_return.columns=[<span class="string">&#x27;return&#x27;</span>]</span><br><span class="line">    df_return = df_return.dropna()</span><br><span class="line">    df_return[<span class="string">&#x27;return_同比&#x27;</span>] = df_return[<span class="string">&#x27;return&#x27;</span>].pct_change(periods = <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">del</span> df_return[<span class="string">&#x27;return&#x27;</span>]</span><br><span class="line">    df_return = df_return.dropna()</span><br><span class="line">    <span class="keyword">return</span> df_return</span><br><span class="line"><span class="comment">#计算分位数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rank_pct</span>(<span class="params">alist</span>):</span><br><span class="line">    alist_sort = <span class="built_in">list</span>(np.sort(alist))</span><br><span class="line">    result = [alist_sort.index(i)/(<span class="built_in">len</span>(alist)-<span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> alist]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="comment">#ty = 1 为连续上涨，ty = 0为连续下跌</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compare</span>(<span class="params">alist,ty</span>):</span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> ty == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(alist)-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> alist[i]&gt;=alist[i+<span class="number">1</span>]:</span><br><span class="line">                s = s+<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> ty == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(alist)-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> alist[i]&lt;= alist[i+<span class="number">1</span>]:</span><br><span class="line">                s=s+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"><span class="comment">#计算指标的信号</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">event</span>(<span class="params">alist</span>):</span><br><span class="line">    K1,K2,K3,K4,K5 = [],[],[],[],[]</span><br><span class="line">    <span class="comment">#获取序列的分位数</span></span><br><span class="line">    alist_drop = pd.DataFrame(alist).dropna().iloc[:,<span class="number">0</span>].tolist()</span><br><span class="line">    alist_drop_chg = pd.DataFrame(alist).dropna().pct_change(periods=<span class="number">1</span>).dropna().iloc[:,<span class="number">0</span>].tolist()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(alist_drop) == <span class="built_in">len</span>(alist):</span><br><span class="line">        rank = rank_pct(alist)</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">len</span>(alist_drop) != <span class="built_in">len</span>(alist):</span><br><span class="line">        rank = [<span class="number">0.5</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (<span class="built_in">len</span>(alist)-<span class="built_in">len</span>(alist_drop))]+rank_pct(alist_drop)</span><br><span class="line">    rank_chg = [<span class="number">0.5</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (<span class="built_in">len</span>(alist)-<span class="built_in">len</span>(alist_drop_chg))]+rank_pct(alist_drop_chg)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(alist)):</span><br><span class="line">        <span class="comment">#获得信号K1</span></span><br><span class="line">        <span class="keyword">if</span> rank[i]&lt; <span class="number">0.3</span>:</span><br><span class="line">            k1=-<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="number">0.3</span>&lt;=rank[i]&lt;=<span class="number">0.7</span>:</span><br><span class="line">            k1=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> rank[i]&gt;<span class="number">0.7</span>:</span><br><span class="line">            k1=<span class="number">1</span></span><br><span class="line">        K1.append(k1)</span><br><span class="line">        <span class="comment">#获得信号K2</span></span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            k2=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> np.isnan(alist[i-<span class="number">1</span>]):</span><br><span class="line">            k2=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> alist[i]-alist[i-<span class="number">1</span>]&gt;<span class="number">0</span>:</span><br><span class="line">            k2=<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> alist[i]-alist[i-<span class="number">1</span>]&lt;<span class="number">0</span>:</span><br><span class="line">            k2=-<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> alist[i] == alist[i-<span class="number">1</span>] == <span class="number">0</span>:</span><br><span class="line">            k2=<span class="number">0</span></span><br><span class="line">        K2.append(k2)</span><br><span class="line">        <span class="comment">#获得信号K3</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;=<span class="number">3</span>:</span><br><span class="line">            k3=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> np.isnan(alist[i-<span class="number">3</span>]):</span><br><span class="line">            k3=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> compare(alist[i-<span class="number">3</span>:i+<span class="number">1</span>],<span class="number">1</span>) == <span class="number">0</span>:<span class="comment">#因子值连续上涨3个月</span></span><br><span class="line">            k3=<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> compare(alist[i-<span class="number">3</span>:i+<span class="number">1</span>],<span class="number">0</span>) == <span class="number">0</span>:<span class="comment">#因子值连续下跌3个月</span></span><br><span class="line">            k3=-<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            k3=<span class="number">0</span></span><br><span class="line">        K3.append(k3)</span><br><span class="line">        <span class="comment">#获得信号K4</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;=<span class="number">3</span>:</span><br><span class="line">            k4=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> np.isnan(alist[i-<span class="number">3</span>]):</span><br><span class="line">            k4=<span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> compare(alist[i-<span class="number">3</span>-<span class="number">1</span>:i],<span class="number">1</span>) == <span class="number">0</span> <span class="keyword">and</span> alist[i]&lt;alist[i-<span class="number">1</span>]:<span class="comment">#因子值连续上涨3个月后最新一期下跌</span></span><br><span class="line">            k4=-<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> compare(alist[i-<span class="number">3</span>-<span class="number">1</span>:i],<span class="number">0</span>) == <span class="number">0</span> <span class="keyword">and</span> alist[i]&gt;alist[i-<span class="number">1</span>]:<span class="comment">#因子值连续下跌3个月后最新一期上涨</span></span><br><span class="line">            k4=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            k4=<span class="number">0</span></span><br><span class="line">        K4.append(k4)</span><br><span class="line">        <span class="comment">#获得信号K5</span></span><br><span class="line">        <span class="keyword">if</span> rank_chg[i]&gt;<span class="number">0.8</span>:</span><br><span class="line">            k5=<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> rank_chg[i]&lt;<span class="number">0.2</span>:</span><br><span class="line">            k5=-<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="number">0.2</span>&lt;= rank_chg[i]&lt;=<span class="number">0.8</span>:</span><br><span class="line">            k5=<span class="number">0</span></span><br><span class="line">        K5.append(k5)</span><br><span class="line">    <span class="keyword">return</span> K1,K2,K3,K4,K5</span><br><span class="line"><span class="comment">#回测结果函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">result_fun</span>(<span class="params">return_list,rate_list</span>):</span><br><span class="line">    result = []</span><br><span class="line">    i = np.argmax((np.maximum.accumulate(return_list)-return_list)/np.maximum.accumulate(return_list))</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> pd.DataFrame()</span><br><span class="line">    j = np.argmax(return_list[:i])</span><br><span class="line">    MaxDrawdown = -(return_list[j]-return_list[i])/return_list[j]</span><br><span class="line">    return_year = <span class="built_in">pow</span>(return_list[-<span class="number">1</span>],<span class="number">12</span>/<span class="built_in">len</span>(return_list))-<span class="number">1</span></span><br><span class="line">    volatility = np.std(np.array(rate_list)-<span class="number">1</span>)*<span class="built_in">pow</span>(<span class="number">12</span>,<span class="number">0.5</span>)</span><br><span class="line">    result.append(return_list[-<span class="number">1</span>])</span><br><span class="line">    result.append(return_year*<span class="number">100</span>)</span><br><span class="line">    result.append(volatility*<span class="number">100</span>)</span><br><span class="line">    result.append(MaxDrawdown*<span class="number">100</span>)</span><br><span class="line">    result.append(result[<span class="number">1</span>]/result[<span class="number">2</span>])</span><br><span class="line">    result=pd.DataFrame(result).T</span><br><span class="line">    result.columns = [<span class="string">&#x27;净值&#x27;</span>,<span class="string">&#x27;年化收益率&#x27;</span>,<span class="string">&#x27;年化波动率&#x27;</span>,<span class="string">&#x27;最大回撤&#x27;</span>,<span class="string">&#x27;夏普比率&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="comment">#获取行业数据</span></span><br><span class="line"><span class="keyword">from</span> WindPy <span class="keyword">import</span> w</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> trange</span><br><span class="line">w.start()</span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_columns&#x27;</span>,<span class="literal">None</span>)</span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_rows&#x27;</span>,<span class="literal">None</span>)</span><br><span class="line">ID_name = <span class="string">&#x27;社会消费品零售总额:当月同比,消费者信心指数（月）,CPI:当月同比,36大中城市日用工业消费品平均价格:空调机:1.5匹冷暖,36大中城市日用工业消费品平均价格:洗衣机:波轮式(5KG),36大中城市日用工业消费品平均价格:洗衣机:滚筒式(5KG),36大中城市日用工业消费品平均价格:冰箱:210-250立升,长江有色市场:平均价:铜:1,长江有色市场:平均价:铝:A00,价格:冷轧板卷:1.0mm:北京,价格:冷轧板卷:1.0mm:上海,价格:冷轧板卷:1.0mm:广州,中国塑料城价格指数,产量:空调:当月同比,产量:空调:累计同比,产量:家用洗衣机:当月同比,产量:家用洗衣机:累计同比,产量:家用电冰箱:当月同比,产量:家用电冰箱:累计同比,房屋竣工面积:累计同比,(停止)库存:家用空调:当月同比,(停止)库存:冰箱:当月同比,(停止)库存:洗衣机:当月同比,(停止)销量:家用空调:当月同比,(停止)内销量:家用空调:当月同比,(停止)销量:家用空调:累计同比,(停止)内销量:家用空调:累计同比,(停止)销量:冰箱:当月同比,(停止)内销量:冰箱:当月同比,(停止)销量:冰箱:累计同比,(停止)内销量:冰箱:累计同比,(停止)销量:洗衣机:当月同比,(停止)内销量:洗衣机:当月同比,(停止)销量:洗衣机:累计同比,(停止)内销量:洗衣机:累计同比&#x27;</span>.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">ID_code = <span class="string">&#x27;M0001428,M0012303,M0000612,S6805558,S6805550,S6805551,S6805559,S0182161,S0182162,S0033141,S0033155,S0033145,S5431605,S0028203,S0028205,S0028211,S0028213,S0028207,S0028209,S0073297,S5616246,S5616354,S5616429,S5616250,S5616256,S5616254,S5616260,S5616358,S5616364,S5616362,S5616368,S5616433,S5616439,S5616437,S5616443&#x27;</span>.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">dictionary= <span class="built_in">dict</span>(<span class="built_in">zip</span>(ID_name,ID_code))</span><br><span class="line">industry =<span class="string">&#x27;801111.SI&#x27;</span><span class="comment">#白电行业</span></span><br><span class="line"><span class="comment"># len(ID_name)</span></span><br><span class="line"></span><br><span class="line">df=get_data(ID_code,ID_name)</span><br><span class="line">df_m = df[[<span class="string">&#x27;长江有色市场:平均价:铜:1&#x27;</span>,<span class="string">&#x27;长江有色市场:平均价:铝:A00&#x27;</span>,<span class="string">&#x27;价格:冷轧板卷:1.0mm:北京&#x27;</span>,<span class="string">&#x27;价格:冷轧板卷:1.0mm:上海&#x27;</span>,<span class="string">&#x27;价格:冷轧板卷:1.0mm:广州&#x27;</span>,<span class="string">&#x27;中国塑料城价格指数&#x27;</span>]]</span><br><span class="line">df_m=df_m.pct_change(periods=<span class="number">12</span>).dropna()+<span class="number">1</span></span><br><span class="line">df_m[<span class="string">&#x27;原材料价格指数&#x27;</span>]=(df_m[<span class="string">&#x27;长江有色市场:平均价:铜:1&#x27;</span>]+df_m[<span class="string">&#x27;长江有色市场:平均价:铝:A00&#x27;</span>]+(df_m[<span class="string">&#x27;价格:冷轧板卷:1.0mm:北京&#x27;</span>]+df_m[<span class="string">&#x27;价格:冷轧板卷:1.0mm:上海&#x27;</span>]+df_m[<span class="string">&#x27;价格:冷轧板卷:1.0mm:广州&#x27;</span>])/<span class="number">3</span>+df_m[<span class="string">&#x27;中国塑料城价格指数&#x27;</span>])/<span class="number">4</span></span><br><span class="line">df=df.iloc[:,<span class="number">0</span>:<span class="number">7</span>].join(df.iloc[:,<span class="number">13</span>:])</span><br><span class="line">df=df.join(df_m[[<span class="string">&#x27;原材料价格指数&#x27;</span>]])</span><br><span class="line">df=df.join(df_yoy([<span class="string">&#x27;36大中城市日用工业消费品平均价格:空调机:1.5匹冷暖&#x27;</span>,<span class="string">&#x27;36大中城市日用工业消费品平均价格:洗衣机:波轮式(5KG)&#x27;</span>,<span class="string">&#x27;36大中城市日用工业消费品平均价格:洗衣机:滚筒式(5KG)&#x27;</span>,<span class="string">&#x27;36大中城市日用工业消费品平均价格:冰箱:210-250立升&#x27;</span>])*<span class="number">100</span>)</span><br><span class="line">df=df.iloc[:,<span class="number">0</span>:<span class="number">3</span>].join(df.iloc[:,<span class="number">7</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment">#收益率数据向后平移两期</span></span><br><span class="line">df = df_return(industry).dropna().shift(-<span class="number">2</span>).join(df).iloc[:-<span class="number">2</span>,:]</span><br><span class="line"><span class="comment"># df</span></span><br><span class="line"><span class="comment">#简单逻辑演绎回测</span></span><br><span class="line">a=df[<span class="string">&#x27;(停止)销量:家用空调:当月同比&#x27;</span>].tolist()</span><br><span class="line">b=df[<span class="string">&#x27;(停止)销量:冰箱:当月同比&#x27;</span>].tolist()</span><br><span class="line">c=df[<span class="string">&#x27;(停止)销量:洗衣机:当月同比&#x27;</span>].tolist()</span><br><span class="line">d=df[<span class="string">&#x27;原材料价格指数&#x27;</span>].tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment">#空调、冰箱、洗衣机的销售额大致为2:1:1</span></span><br><span class="line">signal=<span class="number">0.8</span>*np.array(pd.DataFrame(event(a)).<span class="built_in">sum</span>().tolist())-<span class="number">0.2</span>*np.array(pd.DataFrame(event(d)).<span class="built_in">sum</span>().tolist())</span><br><span class="line"></span><br><span class="line">index_rate = df[<span class="string">&#x27;return_同比&#x27;</span>].tolist()</span><br><span class="line">rate_me=[]</span><br><span class="line">rate_index=[]</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(type(int(rate)))</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(signal)):</span><br><span class="line">    <span class="keyword">if</span> signal[i]&gt;<span class="number">0</span>:</span><br><span class="line">        rate = <span class="number">1</span>+index_rate[i]</span><br><span class="line">    <span class="keyword">elif</span> signal[i]&lt;<span class="number">0</span>:</span><br><span class="line">        rate= <span class="number">1</span> </span><br><span class="line">    rate_me.append(rate)</span><br><span class="line">    rate_index.append(<span class="number">1</span>+index_rate[i])</span><br><span class="line">value_me = [<span class="number">1</span>]</span><br><span class="line">value_index = [<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(rate_me)):</span><br><span class="line">    value_me.append(value_me[i]*rate_me[i])</span><br><span class="line">    value_index.append(value_index[i]*rate_index[i])</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.style.use(<span class="string">&#x27;ggplot&#x27;</span>)</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">4</span>),dpi=<span class="number">1000</span>)</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;时间&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;净值&#x27;</span>)</span><br><span class="line">plt.plot(pd.DataFrame(value_me,index = pd.date_range(<span class="string">&#x27;2009-11-30&#x27;</span>,periods=<span class="built_in">len</span>(value_me),freq=<span class="string">&#x27;M&#x27;</span>)),label = <span class="string">&#x27;择时策略&#x27;</span>)</span><br><span class="line">plt.plot(pd.DataFrame(value_index,index = pd.date_range(<span class="string">&#x27;2009-11-30&#x27;</span>,periods=<span class="built_in">len</span>(value_me),freq=<span class="string">&#x27;M&#x27;</span>)),label = <span class="string">&#x27;基准指数&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">df_result = pd.concat([result_fun(value_me,rate_me),result_fun(value_index,rate_index)])</span><br><span class="line">df_result.index = [<span class="string">&#x27;简单逻辑&#x27;</span>,<span class="string">&#x27;白电指数&#x27;</span>]</span><br><span class="line"><span class="comment"># df_result</span></span><br><span class="line"><span class="comment"># df.shape</span></span><br><span class="line"><span class="comment">#择时策略回测 </span></span><br><span class="line">index,win_rate,count,profit_loss,record = [],[],[],[],[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> trange(<span class="number">1</span>,df.shape[<span class="number">1</span>]):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        <span class="keyword">if</span> df.columns[i] != <span class="string">&#x27;原材料价格指数&#x27;</span>:</span><br><span class="line">            df_check = pd.concat([pd.DataFrame(event(df.iloc[:,i].tolist()[:<span class="number">87</span>])[j]),pd.DataFrame(df[<span class="string">&#x27;return_同比&#x27;</span>].tolist()[:<span class="number">87</span>])],axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> df.columns[i] == <span class="string">&#x27;原材料价格指数&#x27;</span>:</span><br><span class="line">            df_check = pd.concat([pd.DataFrame(-<span class="number">1</span>*np.array(event(df.iloc[:,i].tolist()[:<span class="number">87</span>])[j])),pd.DataFrame(df[<span class="string">&#x27;return_同比&#x27;</span>].tolist()[:<span class="number">87</span>])],axis=<span class="number">1</span>)</span><br><span class="line">        df_check.columns = [<span class="string">&#x27;signal&#x27;</span>,<span class="string">&#x27;rate&#x27;</span>]</span><br><span class="line">        df_check[<span class="string">&#x27;win&#x27;</span>] = df_check[<span class="string">&#x27;rate&#x27;</span>].apply(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">        <span class="comment">#计算胜率</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            win_rate.append(df_check.groupby(<span class="string">&#x27;signal&#x27;</span>).agg(<span class="string">&#x27;mean&#x27;</span>)[<span class="string">&#x27;win&#x27;</span>][<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            win_rate.append(np.nan)</span><br><span class="line">        <span class="comment">#计算历史发生次数</span></span><br><span class="line">        <span class="keyword">try</span>:<span class="comment">#如：第一个指标的所有行，转为list，取前87个，代入event函数，获得五种信号，取第j种信号，转为dataframe，统计值为1的个数。即每个指标在前87期发生的次数。总共30个指标，每个指标5个信号，共产生150个信号。df.iloc[:,i].tolist()[:87]即取每个指标的前87期数据，计算得到5种信号。</span></span><br><span class="line">            <span class="comment"># count.append(pd.DataFrame(event(df.iloc[:,i].tolist()[:87])[j]).value_counts()[1])</span></span><br><span class="line">            count.append(pd.Series(pd.DataFrame(event(df.iloc[:,i].tolist()[:<span class="number">87</span>])[j]).values.flatten()).value_counts()[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            count.append(np.nan)</span><br><span class="line">        <span class="comment">#计算盈亏比</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            profit_loss.append(<span class="built_in">abs</span>(df_check[df_check[<span class="string">&#x27;signal&#x27;</span>] == <span class="number">1</span>].groupby(<span class="string">&#x27;win&#x27;</span>).agg(<span class="string">&#x27;mean&#x27;</span>)[<span class="string">&#x27;rate&#x27;</span>].pct_change(periods = <span class="number">1</span>)[<span class="number">1</span>]+<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            profit_loss.append(np.nan)</span><br><span class="line"></span><br><span class="line">        index_name = df.columns[i]</span><br><span class="line">        <span class="keyword">if</span> j == <span class="number">0</span>:</span><br><span class="line">            index.append(index_name+<span class="string">&#x27;;处于历史较高位置&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> j == <span class="number">1</span>:</span><br><span class="line">            index.append(index_name + <span class="string">&#x27;;本月较上月变动大于0&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> j == <span class="number">2</span>:</span><br><span class="line">            index.append(index_name + <span class="string">&#x27;;连续三个月上涨&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> j== <span class="number">3</span>:</span><br><span class="line">            index.append(index_name + <span class="string">&#x27;;连续三个月下跌后上涨&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> j== <span class="number">4</span>:</span><br><span class="line">            index.append(index_name + <span class="string">&#x27;;月涨幅处于历史80%以上&#x27;</span>)</span><br><span class="line">        record.append([i,j])</span><br><span class="line">df_event = pd.concat([pd.DataFrame(index),pd.DataFrame(count),pd.DataFrame(win_rate),pd.DataFrame(profit_loss),pd.DataFrame(record)],axis=<span class="number">1</span>)</span><br><span class="line">df_event.columns = [<span class="string">&#x27;信号名称&#x27;</span>,<span class="string">&#x27;历史触发次数&#x27;</span>,<span class="string">&#x27;胜率&#x27;</span>,<span class="string">&#x27;盈亏比&#x27;</span>,<span class="string">&#x27;指标索引&#x27;</span>,<span class="string">&#x27;信号索引&#x27;</span>]</span><br><span class="line">df_event_effect = df_event[(df_event[<span class="string">&#x27;历史触发次数&#x27;</span>] &gt; <span class="number">7</span>) &amp; (df_event[<span class="string">&#x27;胜率&#x27;</span>] &gt; <span class="number">0.7</span>) &amp; (df_event[<span class="string">&#x27;盈亏比&#x27;</span>] &gt; <span class="number">1.5</span>) ]</span><br><span class="line">df_event</span><br><span class="line">df_event_effect</span><br><span class="line">index_id = df_event_effect[<span class="string">&#x27;指标索引&#x27;</span>].tolist()</span><br><span class="line">sig = df_event_effect[<span class="string">&#x27;信号索引&#x27;</span>].tolist()</span><br><span class="line">sig_all = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(index_id)):</span><br><span class="line">    <span class="keyword">if</span> index_id[i] == <span class="number">26</span>:</span><br><span class="line">        sig_all.append(-<span class="number">1</span>*np.array(event(df.iloc[:,index_id[i]].tolist()[<span class="number">87</span>:])[sig[i]]))</span><br><span class="line">    <span class="keyword">elif</span> index_id[i] != <span class="number">26</span>:</span><br><span class="line">        sig_all.append(event(df.iloc[:, index_id[i]].tolist()[<span class="number">87</span>:])[sig[i]])</span><br><span class="line">signal = pd.DataFrame(sig_all).replace(-<span class="number">1</span>,<span class="number">0</span>).<span class="built_in">sum</span>().tolist()</span><br><span class="line"><span class="comment"># signal</span></span><br><span class="line">index_rate = df[<span class="string">&#x27;return_同比&#x27;</span>].tolist()[<span class="number">87</span>:]</span><br><span class="line">rate_me = []</span><br><span class="line">rate_index = []</span><br><span class="line">rate = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(signal)):</span><br><span class="line">    <span class="keyword">if</span> signal[i] &gt; <span class="number">0</span>:</span><br><span class="line">        rate = <span class="number">1</span> + index_rate[i]</span><br><span class="line">    <span class="keyword">elif</span> signal[i] == <span class="number">0</span>:</span><br><span class="line">        rate = <span class="number">1</span></span><br><span class="line">    rate_me.append(rate)</span><br><span class="line">    rate_index.append(<span class="number">1</span> + index_rate[i])</span><br><span class="line">value_me = [<span class="number">1</span>]</span><br><span class="line">value_index = [<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(rate_me)):</span><br><span class="line">    value_me.append(value_me[i]*rate_me[i])</span><br><span class="line">    value_index.append(value_index[i]*rate_index[i])</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">4</span>),dpi=<span class="number">1000</span>)</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;时间&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;净值&#x27;</span>)</span><br><span class="line">plt.plot(pd.DataFrame(value_me,index = pd.date_range(<span class="string">&#x27;2017-03-31&#x27;</span>,periods=<span class="built_in">len</span>(value_me),freq=<span class="string">&#x27;M&#x27;</span>)),label = <span class="string">&#x27;择时策略&#x27;</span>)</span><br><span class="line">plt.plot(pd.DataFrame(value_index,index = pd.date_range(<span class="string">&#x27;2017-03-31&#x27;</span>,periods=<span class="built_in">len</span>(value_me),freq=<span class="string">&#x27;M&#x27;</span>)),label = <span class="string">&#x27;基准指数&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">df_result = pd.concat([result_fun(value_me,rate_me),result_fun(value_index,rate_index)])</span><br><span class="line">df_result.Index = [<span class="string">&#x27;择时策略&#x27;</span>,<span class="string">&#x27;白电指数&#x27;</span>]</span><br><span class="line">df_result</span><br></pre></td></tr></table></figure>
<h2 id="Var三种计量方法的Python应用"><a href="#Var三种计量方法的Python应用" class="headerlink" title="Var三种计量方法的Python应用"></a>Var三种计量方法的Python应用</h2><h3 id="参数法"><a href="#参数法" class="headerlink" title="参数法"></a>参数法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(adj_close_df)</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置权重和组合收益周期并计算组合收益</span></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)] * <span class="built_in">len</span>(tickers))</span><br><span class="line">historical_returns = (log_returns * weights).<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line">days = <span class="number">5</span></span><br><span class="line">historical_x_day_returns = historical_returns.rolling(window=days).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立协方差矩阵并计算组合标准差</span></span><br><span class="line">cov_matrix = log_returns.cov() * <span class="number">252</span></span><br><span class="line">portfolio_std_dev = np.sqrt(weights.T @ cov_matrix @ weights)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算不同置信区间的VaR并输出</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm</span><br><span class="line">confidence_levels = [<span class="number">0.90</span>, <span class="number">0.95</span>, <span class="number">0.99</span>]</span><br><span class="line">VaRs = []</span><br><span class="line"><span class="keyword">for</span> cl <span class="keyword">in</span> confidence_levels:</span><br><span class="line">    VaR = portfolio_value * (norm.ppf(<span class="number">1</span> - cl) * portfolio_std_dev * np.sqrt(days / <span class="number">252</span>) - historical_returns.mean() * days)</span><br><span class="line">    VaRs.append(VaR)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;<span class="string">&quot;Confidence Level&quot;</span>:&lt;<span class="number">20</span>&#125;</span> <span class="subst">&#123;<span class="string">&quot;Value at Risk&quot;</span>:&lt;<span class="number">20</span>&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">40</span>)</span><br><span class="line"><span class="keyword">for</span> cl, VaR <span class="keyword">in</span> <span class="built_in">zip</span>(confidence_levels, VaRs):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;cl * <span class="number">100</span>:&gt;<span class="number">6.0</span>f&#125;</span>%: <span class="subst">&#123;<span class="string">&quot;&quot;</span>:&lt;<span class="number">8</span>&#125;</span> $<span class="subst">&#123;VaR:&gt;<span class="number">10</span>,<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 绘制组合回报分布图以及VaR分位点</span></span><br><span class="line"><span class="comment"># 根据投资组合价值取得实际回报金额</span></span><br><span class="line">historical_x_day_returns_dollar = historical_x_day_returns * portfolio_value</span><br><span class="line"><span class="comment"># 绘制分布图</span></span><br><span class="line">plt.hist(historical_x_day_returns_dollar, bins=<span class="number">50</span>, density=<span class="literal">True</span>, alpha=<span class="number">0.5</span>, label=<span class="string">f&#x27;<span class="subst">&#123;days&#125;</span>-Day Returns&#x27;</span>)</span><br><span class="line"><span class="comment"># 绘制分位点直线</span></span><br><span class="line"><span class="keyword">for</span> cl, VaR <span class="keyword">in</span> <span class="built_in">zip</span>(confidence_levels, VaRs):</span><br><span class="line">    plt.axvline(x=-VaR, linestyle=<span class="string">&#x27;--&#x27;</span>, color=<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;VaR at &#123;&#125;% Confidence&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">int</span>(cl * <span class="number">100</span>)))</span><br><span class="line">plt.xlabel(<span class="string">f&#x27;<span class="subst">&#123;days&#125;</span>-Day Portfolio Return ($)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio <span class="subst">&#123;days&#125;</span>-Day Returns and Parametric VaR Estimates&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="历史模拟法"><a href="#历史模拟法" class="headerlink" title="历史模拟法"></a>历史模拟法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># %% [markdown]</span></span><br><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置权重及组合收益周期并计算组合收益</span></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)] * <span class="built_in">len</span>(tickers))</span><br><span class="line">historical_returns = (log_returns * weights).<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line">days = <span class="number">50</span></span><br><span class="line">range_returns = historical_returns.rolling(window = days).<span class="built_in">sum</span>()</span><br><span class="line">range_returns = range_returns.dropna()</span><br><span class="line"><span class="built_in">print</span>(range_returns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算VaR并绘制分布表</span></span><br><span class="line">confidence_interval = <span class="number">0.99</span></span><br><span class="line">VaR = -np.percentile(range_returns, <span class="number">100</span> - (confidence_interval * <span class="number">100</span>))*portfolio_value</span><br><span class="line"><span class="built_in">print</span>(VaR)</span><br><span class="line"></span><br><span class="line">return_window = days</span><br><span class="line">range_returns = historical_returns.rolling(window=return_window).<span class="built_in">sum</span>()</span><br><span class="line">range_returns = range_returns.dropna()</span><br><span class="line">range_returns_dollar = range_returns * portfolio_value</span><br><span class="line"></span><br><span class="line">plt.hist(range_returns_dollar.dropna(), bins=<span class="number">50</span>, density=<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">f&#x27;<span class="subst">&#123;return_window&#125;</span>-Day Portfolio Return (Dollar Value)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio <span class="subst">&#123;return_window&#125;</span>-Day Returns (Dollar Value)&#x27;</span>)</span><br><span class="line">plt.axvline(-VaR, color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;dashed&#x27;</span>, linewidth=<span class="number">2</span>, label=<span class="string">f&#x27;VaR at <span class="subst">&#123;confidence_interval:<span class="number">.0</span>%&#125;</span> confidence level&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="蒙特卡洛模拟法"><a href="#蒙特卡洛模拟法" class="headerlink" title="蒙特卡洛模拟法"></a>蒙特卡洛模拟法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(adj_close_df)</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立组合回报和组合标准差方程</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">expected_return</span>(<span class="params">weights, log_returns</span>):</span><br><span class="line">    <span class="keyword">return</span> np.<span class="built_in">sum</span>(log_returns.mean()*weights)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standard_deviation</span> (weights, cov_matrix):</span><br><span class="line">    variance = weights.T @ cov_matrix @ weights</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(variance)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立协方差矩阵，计算组合回报和组合标准差，设置权重</span></span><br><span class="line">cov_matrix = log_returns.cov()</span><br><span class="line"><span class="built_in">print</span>(cov_matrix)</span><br><span class="line"></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)]*<span class="built_in">len</span>(tickers))</span><br><span class="line">portfolio_expected_return = expected_return(weights, log_returns)</span><br><span class="line">portfolio_std_dev = standard_deviation (weights, cov_matrix)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立蒙特卡洛(Monte Carlo Simulation)方程并执行</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_z_score</span>():</span><br><span class="line">    <span class="keyword">return</span> np.random.normal(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立方程计算模拟组合收益</span></span><br><span class="line">days = <span class="number">20</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">scenario_gain_loss</span>(<span class="params">portfolio_value, portfolio_std_dev, z_score, days</span>):</span><br><span class="line">    <span class="keyword">return</span> portfolio_value * portfolio_expected_return * days + portfolio_value * portfolio_std_dev * z_score * np.sqrt(days)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复10000次模拟</span></span><br><span class="line">simulations = <span class="number">10000</span></span><br><span class="line">scenarioReturn = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(simulations):</span><br><span class="line">    z_score = random_z_score()</span><br><span class="line">    scenarioReturn.append(scenario_gain_loss(portfolio_value, portfolio_std_dev, z_score, days))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置置信区间，计算VaR并绘制分布图</span></span><br><span class="line">confidence_interval = <span class="number">0.99</span></span><br><span class="line">VaR = -np.percentile(scenarioReturn, <span class="number">100</span> * (<span class="number">1</span> - confidence_interval))</span><br><span class="line"><span class="built_in">print</span>(VaR)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制10000次模拟得到的VaR的分布图</span></span><br><span class="line">plt.hist(scenarioReturn, bins=<span class="number">50</span>, density=<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Scenario Gain/Loss ($)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio Gain/Loss Over <span class="subst">&#123;days&#125;</span> Days&#x27;</span>)</span><br><span class="line">plt.axvline(-VaR, color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;dashed&#x27;</span>, linewidth=<span class="number">2</span>, label=<span class="string">f&#x27;VaR at <span class="subst">&#123;confidence_interval:<span class="number">.0</span>%&#125;</span> confidence level&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>码农开荒</category>
      </categories>
      <tags>
        <tag>增删改查</tag>
        <tag>数据结构</tag>
        <tag>类对象方法区分</tag>
        <tag>存储与执行</tag>
        <tag>Latex绘图</tag>
        <tag>修改汇总文件名</tag>
        <tag>Python文件打包</tag>
        <tag>爬虫</tag>
        <tag>量化建模</tag>
        <tag>VarInPython</tag>
      </tags>
  </entry>
  <entry>
    <title>上清所登记结算</title>
    <url>/post/63033/</url>
    <content><![CDATA[<h1 id="上清所发行登记业务"><a href="#上清所发行登记业务" class="headerlink" title="上清所发行登记业务"></a>上清所发行登记业务</h1><p><a href="https://www.nafmii.org.cn/hyfw/hyflmd/hyzmd/">银行间市场会员总名单</a></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E5%B8%82%E5%9C%BA%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84.png" alt="债券市场基本架构" /></p>
<h2 id="发行登记托管结算业务概览"><a href="#发行登记托管结算业务概览" class="headerlink" title="发行登记托管结算业务概览"></a>发行登记托管结算业务概览</h2><ol>
<li>持有人服务：账户管理，托管、清算、结算及配套服务等</li>
<li>发行人服务：招标发行，账户管理、信息披露、登记、代理付息兑付及配套服务等</li>
<li>增值服务：抵押品管理，债券估值</li>
</ol>
<h2 id="账户业务"><a href="#账户业务" class="headerlink" title="账户业务"></a>账户业务</h2><ol>
<li><p>账户类别：<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A6%E6%88%B7%E7%B1%BB%E5%88%AB.jpg" style="zoom: 10%;" /></p>
</li>
<li><p>持有人账户范围：<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%8C%81%E6%9C%89%E4%BA%BA%E8%B4%A6%E6%88%B7%E8%8C%83%E5%9B%B4%E4%BF%AE%E6%AD%A3.png" /></p>
</li>
</ol>
<h2 id="发行登记业务、代理付息兑付业务：略"><a href="#发行登记业务、代理付息兑付业务：略" class="headerlink" title="发行登记业务、代理付息兑付业务：略"></a>发行登记业务、代理付息兑付业务：略</h2><h1 id="上清所清算结算业务"><a href="#上清所清算结算业务" class="headerlink" title="上清所清算结算业务"></a>上清所清算结算业务</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><ol>
<li><p>“清算”的含义：在结算日，计算交易参与人所需交割债券或支付资金数额的过程。包括全额逐笔清算、净额轧差清算。</p>
</li>
<li><p>“结算”的含义：狭义的结算指债券与资金的最终转移。债券电子化后,债券结算通常由CSD在托管账户之间划转；资金结算一种由CSD提供资金账户结算，另一种是通过其他机构如央行大额支付系统等对资金结算。广义结算也包括清算。</p>
</li>
<li><p>双边逐笔全额结算：交易双方根据交易成交结果，逐笔计算并确定相互间应收应付义务的过程，不同成交合同之间的应收应付义务完全独立，不相互轧抵；<em><font color =red>风险控制：双边授信、抵押品、双边违约处理</font></em></p>
</li>
<li><p>多边净额清算(CCP净额清算)：每个参与主体在整个清算系统的应收应付进行轧差，形成单个参与主体对清算系统的单一净额头寸。（现券+回购）<em><font color =red>风险控制：资格准入、保证金、CCP风险监控+违约处理</font></em><br><em>中国人民银行公告[2013]第12号：全部交易均采用券款对付（DVP）结算方式</em></p>
</li>
<li><p>结算账户：</p>
<ol>
<li><p>产品结算(债券结算)：开立在上海清算所的持有人账户</p>
</li>
<li><p>资金结算：开立在大额支付系统的清算账户 或 开立在上海清算所的资金结算专户</p>
<ol>
<li>大额支付系统直接参与者：<br>①可通过其在支付系统的清算账户或开立资金结算专户办理券款对付资金结算；<br>②通过大额清算账户办理的，开户时需提交其大额支付系统行号及清算账户账号</li>
<li>非大额支付系统直接参与者<br>①必须开立资金结算专户完成资金结算<br>②当日结算日终前,确保资金结算专户内有足额资金</li>
</ol>
<p><em>中国人民银行公告[2013]第12号：债券结算资金专户实行日终“零余额”管理</em></p>
</li>
</ol>
</li>
</ol>
<table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E8%B4%A6%E6%88%B7%E5%BC%80%E7%AB%8B%E7%94%B3%E8%AF%B7%E8%A1%A8(%E7%9B%B4%E6%8E%A5%E7%BB%93%E7%AE%97%E6%88%90%E5%91%98).png" style="zoom:50%;"/></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%B8%E6%AC%BE%E5%AF%B9%E4%BB%98%E8%B5%84%E9%87%91%E7%BB%93%E7%AE%97%E8%B4%A6%E6%88%B7%E4%BF%A1%E6%81%AF%E8%A1%A8(%E7%9B%B4%E6%8E%A5%E7%BB%93%E7%AE%97%E6%88%90%E5%91%98).png"  style="zoom:50%;"/></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B5%84%E9%87%91%E8%B4%A6%E6%88%B7%E5%BC%80%E6%88%B7%E9%80%9A%E7%9F%A5%E4%B9%A6.png" style="zoom:80%;" /></td>
    </tr>
</table>

<h2 id="业务流程"><a href="#业务流程" class="headerlink" title="业务流程"></a>业务流程</h2><table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%8A%E6%B5%B7%E6%B8%85%E7%AE%97%E6%89%80%E6%B8%85%E7%AE%97%E3%80%81%E7%BB%93%E7%AE%97%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B.jpg" style="zoom: 20%;" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%85%A8%E9%A2%9D%E7%BB%93%E7%AE%97%E4%B8%9A%E5%8A%A1%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%A4%84%E7%90%86.jpg" alt="全额结算业务的系统处理" style="zoom:20%;" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%87%80%E9%A2%9D%E7%BB%93%E7%AE%97%E4%B8%9A%E5%8A%A1%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%A4%84%E7%90%86.jpg"  alt="净额结算业务的系统处理" style="zoom:20%;" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4.png" alt="业务处理时间" style="zoom:50%;" /></td>
    </tr>
</table>

<ol>
<li><p>结算业务重要时点：</p>
<ol>
<li>全额结算：DVP交易结算截止17:00</li>
<li>净额结算（均为DVP）：T+0结算的交易截止15:30，T+1结算的交易截止16:30；<br>T+0结算：15:40起，会员即可在客户端查看清算通知单，准备应付券款，15:45-16:15会员付款付券</li>
</ol>
</li>
<li><p>结算资金存入：通过结算成员开户银行直接将款项划入清算所大额支付系统清算账户，清算所收到款项后，增加结算成员在清算所的资金结算专户余额。<br>1）汇款时间：工作日17：00前<br>2）结算方式：汇兑，即采用电汇或网银中的跨行汇款等<br>3）请选择开户时指定的资金往来账户作为汇款账户（付款账户），以便系统能自动入账。<br>4）请正确填写收款人信息。（详见资金结算专户开户通知书）</p>
</li>
<li><p>结算资金外部提款及内部划转</p>
<ol>
<li>账户范围：<br>（一）债券全额结算业务的资金结算账户；<br>（二）债券净额清算结算账户、保证金账户、清算基金账户；<br>（三）外汇询价交易中央对手清算业务自营人民币保证金账户。</li>
<li>外部提款路径：开立在商业银行的账户、开立在其他托管机构的账户<br>注意：原则上不超过三个；仅限于市场成员自身的账户；指定其中一<br>个作为提款的默认收款账户。</li>
<li>内部划转：可为上述资金账户开通内转支付功能</li>
<li>操作流程：（一）通过客户终端发出提款指令；（二）外部提款通过大额支付系统划入相关账户</li>
<li>提指令提交时间：工作日9：00-17：00；</li>
<li>信息查询：可通过客户端实时查询资金结算账户余额和出入记录。<br>（<a href="http://www.shclearing.com/xxpl/ywts/201512/t20151230_123437.html）">http://www.shclearing.com/xxpl/ywts/201512/t20151230_123437.html）</a></li>
</ol>
</li>
<li>结算专户资金日终批量退回<ol>
<li>退回次数：共3次(16:35、16:40、17:00）</li>
<li>当日具有应付款义务的结算成员，其资金结算专户资金不予退回</li>
<li>成交指令阶段：买卖双方一方或双方未确认的</li>
<li>结算指令阶段：等券或等款状态的结算指令</li>
<li>17:00提款截止前，可在客户端发起自主提款指令</li>
</ol>
</li>
<li>资金账户结息<ol>
<li>资金结算专户；净额最低保证金账户；净额变动保证金账户；清算基金账户<br>以上账户均按日计息按季结息，每季度末月的20日为结息日。<br>注：每季度结息日次日，结算成员及清算会员可下载计息单据并查收利息资金</li>
</ol>
</li>
<li>履行结算指令—DVP（全额）<ol>
<li>检查卖券方账户的产品余额是否足够</li>
<li>检查买券方账户的结算资金是否足够<br>若产品和资金均足够，则将产品从卖券方过户至买券方账户，将结算资金从买方划付至卖方<br>若产品或资金不足，则结算状态变更为等券或等款，直至余额足够后完成结算<br>若到日终仍不足额，则结算失败</li>
<li>合规性审查<br>要素检查<br>风控指标检查</li>
<li>实时轧差：上海清算所承继交易双方的应收/付资金和应收/付证券进行轧差计算。</li>
<li>风险监控：根据轧差结果对会员的资金净额、其盯市盈亏情况进行风险监控，并根据具体情形采取各项措施。</li>
<li>实时查询：会员可通过客户端对风控指标检查的处理状态、轧差结果进行实时查询。</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>内控指引与法律法规</category>
      </categories>
      <tags>
        <tag>上清所登记结算</tag>
      </tags>
  </entry>
  <entry>
    <title>债券的久期-凸性</title>
    <url>/post/55094/</url>
    <content><![CDATA[<h1 id="债券的久期和凸性"><a href="#债券的久期和凸性" class="headerlink" title="债券的久期和凸性"></a>债券的久期和凸性</h1><h2 id="麦考利久期-Macaulay-duration-："><a href="#麦考利久期-Macaulay-duration-：" class="headerlink" title="麦考利久期(Macaulay duration)："></a><strong>麦考利久期(Macaulay duration)：</strong></h2><p>每次支付金额的现值占当前债券价格的比率作为权重，计算平均到期时间。<br>对于零息债券，其久期等于到期期限</p>
<script type="math/tex; mode=display">\begin{align}D_{mac}&=\dfrac{\sum_{t=1}^{T}\dfrac{C_{t}}{(1+y)^t}\times{t}}{P}\\{D_{mac}}&=\sum_{t=1}^{T}t\times{W_t}\end{align}</script><h2 id="修正久期-Modified-Duration-："><a href="#修正久期-Modified-Duration-：" class="headerlink" title="修正久期(Modified Duration)："></a><strong>修正久期(Modified Duration)：</strong></h2><ul>
<li><p>单位利率变动，债券价格变动的<font color =red>百分比</font>，度量价格对于利率变动的敏感性。</p>
</li>
<li><p>久期和修正久期是一个近似值，收益率变化幅度小时，久期和修正久期近似效果较好；当收益率变化幅度越大时，久期和修正久期的近似效果差。</p>
<script type="math/tex; mode=display">{MD/D_m}=\dfrac{\Delta{P}/{P}}{\Delta{y}}=\dfrac{D_{mac}}{1+y/m}</script></li>
<li><p>修正久期越大，利率变动对债券价格的影响程度就越大。</p>
</li>
</ul>
<div class="note info flat"><script type="math/tex; mode=display">\begin{align}&\text{原式：}P=\sum\limits_{i=1}^{n}\dfrac{C}{(1+{YTM})^{i}}+\dfrac{F}{(1+YTM)^n}\\&\text{求导：}\textcolor{red}{\dfrac{\dfrac{dP}{dYTM}}{P}}=-\dfrac{1}{1+YTM}\times\textcolor{blue}{\dfrac{\dfrac{nF}{(1+YTM)^n}+\sum_{i=1}^{n}\dfrac{iC}{(1+YTM)^i}}{P}}\\&\text{或零息债券：}P=\frac{Ct}{(1+y)^t}\\&\text{求导：}dP=-\dfrac{C_t\cdot{t}}{(1+y)^{t+1}}d(y)=-\dfrac{P\cdot{t}}{1+y}d(y)\\&\text{变形：}\dfrac{\Delta{P}}{P}=-\dfrac{t}{1+y}d(y)=-\dfrac{D_{mac}}{1+y}\times{\Delta{y}}=-D_m\times{\Delta{y}}\quad{(5)}\end{align}</script></div>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%8D%E5%90%8CYTM%E5%80%BA%E5%88%B8%E7%9A%84%E4%B9%85%E6%9C%9F.jpg" alt="不同YTM债券的久期" style="zoom:50%;" /><sup><a href ="https://finance.eastmoney.com/a/202208292493323044.html">[1]</a></sup></p>
<h2 id="美元久期-Dollar-Duration-："><a href="#美元久期-Dollar-Duration-：" class="headerlink" title="美元久期(Dollar Duration)："></a><strong>美元久期(Dollar Duration)：</strong></h2><ul>
<li>美元久期是指利率变动（或者说单位利率变动）导致的债券价值变动的金额，(<script type="math/tex">-P\times{D_m}=D_{dollar}</script>)即$D_m$价格变动百分比乘以价格-得到变动金额，即价格-收益率曲线-切线斜率。</li>
<li><p>Price value of basis point（PVBP-基点价值）：利率变动一个基点时，债券价格变动金额。</p>
<ul>
<li>记为：PV01(present value of 1bp) or DV01(dollar value of 1bp)</li>
</ul>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/487786099">公式推导</a></p>
</li>
</ul>
<p>根据式(5)可得：<script type="math/tex">\begin{align}&\text{原式：}\dfrac{dP}{P\times{dy}}=-\dfrac{1}{1+y}D_{mac}=-D_m\\&\text{变形：}\dfrac{dP}{dy}=-\dfrac{P}{1+y}D_{mac}=-P\times{D_m}=D_{dollar}\\&\text{另：}\quad{}dP=-D_{dollar}\times{dr}\\&\text{DV01=}D_{dollar}\times{0.01\%}=D_m\times{P}\times{0.01\%}\end{align}</script></p>
<ul>
<li>DV01对冲：<script type="math/tex">\text{对冲比率}=\dfrac{DV01^A}{DV01^B}</script></li>
</ul>
<h2 id="凸性-convexity-："><a href="#凸性-convexity-：" class="headerlink" title="凸性(convexity)："></a>凸性(convexity)：</h2><p>凸性是对债券价格利率敏感性的二阶估计，是对债券久期利率敏感性的测量。凸性（ Convexity ）是收益率变化 1 %所引起的久期的变化。凸性越大,债券价格曲线弯曲程度越大,用修正久期度量债券的利率风险所产生的误差越大。</p>
<p>在价格(y)-收益率(x)曲线中，债券价格随利率的变化关系是非线性的，凸向原点的。</p>
<script type="math/tex; mode=display">\begin{align}{Con}&=\sum_{t=1}^{T}(W_t\times{t(t+1))}\\{MCon}&=\sum_{t=1}^{T}\dfrac{W_t\times{t(t+1)}}{(1+y)^2}=\sum_{t=1}^{T}t(1+t)\times{\dfrac{\dfrac{C_t}{(1+y)^t}}{P}}\times{\dfrac{1}{(1+y)^2}}\\\text{经过对债券}&\text{价格公式进行泰勒展开，变形得到由修正久期与凸性构成的}{\Delta{P}/{P}}\text{公式}\\\dfrac{\Delta{P}}{P}&=-D_{m}\Delta{y}+\frac{1}{2}Con(\Delta{y})^2\end{align}</script><div class="note info flat"><p><a href="https://zhuanlan.zhihu.com/p/47022333?utm_id=0">公式推导及结论</a></p>
<ul>
<li><p>张亦春、郑振龙的《金融市场学》认为，现在的久期概念是利率敏感性资产价值变动的百分比对利率变动的一阶敏感性，即$D_{m}=-\frac{dP/P}{dy}$ 。Macaulay久期不是久期，只是久期计算公式中的一部分。<strong>修正久期才真正考察了债券价值的利率风险</strong>。</p>
</li>
<li><p>蒋崇辉、马永开指出，修正久期不能简单理解为对Macaulay久期的“修正”，<strong>修正久期的本质是债券价格相对于市场基准利率变化的敏感性。</strong></p>
</li>
<li><p>张宗新的《投资学》同样提到<strong>久期最初表示平均还款期限，但实际运用中久期表示的是债券价格的波动性</strong>。</p>
</li>
<li><p><strong>Change in price=Duration effect+Convexity effect</strong></p>
</li>
</ul>
</div>
<h2 id="有效久期"><a href="#有效久期" class="headerlink" title="有效久期"></a><strong>有效久期</strong></h2><p>有效久期不需要考虑各期现金流的变化情况，不包含利率变化导致现金流发生变化的具体时间，而只考虑利率一定变化下的价格总体情况。因此，有效久期能够较准确地衡量具有隐含期权性质的金融工具的利率风险。对于没有隐含期权的金融工具，有效久期与修正久期是相等的。</p>
<script type="math/tex; mode=display">D_{eff}=-\dfrac{\Delta{P}/P}{\Delta{y}}=\dfrac{P_--P_+}{P_0\times{2\Delta{y}}}=\dfrac{P_--P_+}{P_0\times(y_A-y_B)}</script><h2 id="有效凸性："><a href="#有效凸性：" class="headerlink" title="有效凸性："></a>有效凸性：</h2><script type="math/tex; mode=display">C_{eff}=\dfrac{D_--D_+}{\Delta{y}}=\dfrac{P_-+P_+-2P_0}{P_0\Delta{y^2}}</script><h2 id="基于有效久期和凸性的对冲："><a href="#基于有效久期和凸性的对冲：" class="headerlink" title="基于有效久期和凸性的对冲："></a>基于有效久期和凸性的对冲：</h2><p>$P=\dfrac{VD_v}{D_p}$</p>
<p>$-VD_v-P_1D_1-P_2D_2=0$</p>
<p>$-VD_v-P_1D_1-P_2D_2=0$</p>
<h1 id="到-即-期收益率"><a href="#到-即-期收益率" class="headerlink" title="到(即)期收益率"></a>到(即)期收益率</h1><h2 id="中债估值中心-收益率曲线"><a href="#中债估值中心-收益率曲线" class="headerlink" title="中债估值中心-收益率曲线"></a><a href="https://yield.chinabond.com.cn/cbweb-mn/yield_main?locale=zh_CN">中债估值中心-收益率曲线</a></h2><ul>
<li><strong>即期收益率（Spot rate）：</strong>无息债到期收益率</li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%8D%B3%E6%9C%9F%E6%94%B6%E7%9B%8A%E7%8E%87.png" alt="即期收益率"></p>
<ul>
<li><strong>到期收益率：</strong>持有至到期收益率</li>
</ul>
<h1 id="经济周期四阶段及经济指标"><a href="#经济周期四阶段及经济指标" class="headerlink" title="经济周期四阶段及经济指标"></a>经济周期四阶段及经济指标</h1><ul>
<li><strong>考虑因素：</strong>GDP、利率、就业率、CPI、工业企业-产成品存货、工业企业-营业收入、PPI、PMI</li>
<li><strong>产成品存货：</strong>指企业报告期末已经加工生产并完成全部生产过程，可以对外销售的制成产品。<font color=red>每月27号公布上月数据。</font></li>
<li><strong>PMI：</strong>制造业采购经理调查指标体系包括生产、新订单、新出口订单、在手订单、产成品库存、采购量、进口、主要原材料购进价格、出厂价格、原材料库存、从业人员、供应商配送时间、生产经营活动预期等13个分类指数。制造业PMI是由5个扩散指数（分类指数）加权计算而成。5个分类指数及其权数是依据其对经济的先行影响程度确定的。具体包括：新订单指数，权数为30%；生产指数，权数为25%；从业人员指数，权数为20%；供应商配送时间指数，权数为15%；原材料库存指数，权数为10%。<font color =red>更新规律为月频。每月月末发布该指标当月数据。</font></li>
<li><strong>PPI：</strong>反映工业企业产品第一次出售时的出厂价格的变化趋势和变动幅度；工业生产者出厂价格统计调查涵盖1638个基本分类的20000多种工业产品的价格。工业生产者出厂价格（PPI）采集不含增值税的价格，而购进价格（PPIRM）采集含税的价格。<font color =red>国家统计局口径，每月9-16日上午9:30发布新闻</font>，会在月底根据和国家统计局合作的内部资料进行精度上的调整。</li>
<li><strong>CPI：</strong>价格指数是反映一定时期内居民家庭所购买的生活消费品价格和服务项目价格变动趋势和程度的相对数。通过该指数可以观察和分析消费品的零售价格和服务项目价格变动对居民收入和消费支出的影响。<font color =red>国家统计局口径，每月9-16日上午9:30发布新闻</font>，会在月底根据和国家统计局合作的内部资料进行精度上的调整。</li>
<li><strong>营业收入：</strong>营业收入指企业经营主要业务和其他业务所确认的收入总额。<font colore =red>每月27号公布上月值。</font></li>
<li><strong>城镇调查失业率：</strong>根据国家劳动力调查推算的城镇失业人口占城镇就业人口与失业人口之和的百分比。</li>
<li><strong>周期四阶段：</strong>繁荣、衰退、萧条、复苏</li>
<li><strong>阶段与库存表现：</strong>繁荣期-主动补库存、衰退-被动补库存、萧条-主动去库存、复苏-被动去库存。<font color =red>即库存变动滞后于需求变动。</font></li>
<li><strong>阶段与信贷周期：</strong>繁荣-利率低-就业高-消费者信心强-通膨；到达顶点后衰退，反之。</li>
<li>Consumer price index (CPI) measures the changes in the price of goods and services paid by consumers.</li>
<li>The Producer Price Index (PPI) measures the average change over time in the prices domestic producers receive for their output. It is a measure of <a href="https://www.investopedia.com/terms/i/inflation.asp">inflation</a> at the wholesale level that is compiled from thousands of indexes measuring producer prices by industry and product category. <ul>
<li>工业品出厂价格由生产成本、利润和税金三部分组成，它是工业产品进入流通领域的最初价格。</li>
</ul>
</li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%BB%8F%E6%B5%8E%E5%91%A8%E6%9C%9F%E5%9B%9B%E9%98%B6%E6%AE%B5.jpg" alt="经济周期四阶段" style="zoom: 67%;" /></p>
<h1 id="货币中性"><a href="#货币中性" class="headerlink" title="货币中性"></a>货币中性</h1><ul>
<li>定义：货币中性是货币数量论一个基本命题的简述，是指货币供给的增长将导致价格水平的相同比例增长，对于实际产出水平（比如实际产出Y，实际利率）没有产生影响。</li>
<li>货币中性，只成立于长期，在短期中是不成立的。因为在短期中，货币供给的变化是会影响到经济，故此时货币是非中性的。</li>
</ul>
<h1 id="博弈论-斯塔克博格（Stackelberg）双寡头模型"><a href="#博弈论-斯塔克博格（Stackelberg）双寡头模型" class="headerlink" title="博弈论-斯塔克博格（Stackelberg）双寡头模型"></a>博弈论-斯塔克博格（Stackelberg）双寡头模型</h1><p>斯塔克博格模型是一个双寡头动态模型。该模型假设有两个企业，与古诺模型类似，这两个企业的决策的选择也是产量。在这两个企业中，其中一个企业处于支配地位，先行动进行产量选择，另一个企业处于从属地位，在支配企业选择产量之后再进行选择，因此，这是一个动态博弈问题。我们再假设博弈结构的其他方面，比如策略空间、收益函数和信息结构等与古诺模型一样。因此，这个斯塔克博格博弈模型是一个完全且完美信息的动态博弈。与古诺模型的唯一区别只是两博弈方的选择现在是先后进行的，而不是同时进行的。</p>
<h1 id="期限结构理论"><a href="#期限结构理论" class="headerlink" title="期限结构理论"></a>期限结构理论</h1><p>略。</p>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>理论杂货</category>
      </categories>
      <tags>
        <tag>久期-凸性</tag>
      </tags>
  </entry>
  <entry>
    <title>初级会计师</title>
    <url>/post/65888/</url>
    <content><![CDATA[<h1 id="习题笔记汇总："><a href="#习题笔记汇总：" class="headerlink" title="习题笔记汇总："></a>习题笔记汇总：</h1><h1 id="第一章-会计信息要求："><a href="#第一章-会计信息要求：" class="headerlink" title="第一章 会计信息要求："></a>第一章 会计信息要求：</h1><ol>
<li>变更存货计价方法属于会计政策变更</li>
<li>同一企业不同时期发生的“相同或者相似的”交易或者事项，应当采用一致的会计政策，不得随意变更</li>
<li>即使月末结账忙碌，也需要将月末发生的交易或事项及时进行确认、计量、记录和报告，不得提前或延后</li>
<li>获取合理报酬，反映了会计职业的经济性，非反映社会属性</li>
<li>小企业会计准则主要适用于符合《中小企业划型标准规定》所规定的小型企业标准的企业，但以下小企业除外：a.股票或债券在市场公开交易的小企业，b.金融机构或其他具有金融性质的小企业，c.企业集体内的母公司和子公司</li>
<li>企业会计准则主要用于上市公司，金融机构，国有企业等大中型企业</li>
<li>我国的政府会计准则制度体系主要有：基本准则、具体准则及应用指南、会计制度、会计准则制度</li>
<li>在持续经营（而非会计分期）的前提下，会计确认、计量和报告应该以企业持续、正常的生产经营活动为前提。</li>
<li>会计主体确定了空间范围；会计分期确定了时间范围。</li>
<li><strong>会计核算基础</strong>包括权责发生制和收付实现制，政府会计由预算会计和财务会计购成。预算会计实行收付实现制，财务会计实行权责发生制。</li>
<li><strong>谨慎性：</strong>要求企业对交易或者事项进行会计确认、计量和报告应当保持应有的谨慎。<strong>不应高估资产或者收益、低估负债或者费用。</strong></li>
<li><strong>重要性：</strong>要求企业提供的会计信息应当反映与企业财务状况、经营成果和现金流量有关的所有重要交易或者事项。在符合重要性和成本效益原则的前提下，保证会计信息的完整性。<strong>重要性不能仅根据金额判断，还要结合其性质，如：小金额导致盈转亏，则需要作为前期差错追溯调整，而不能根据重要性直接计入当年报表。</strong></li>
<li><strong>相关性：</strong>各项资产或负债按照流动性列示能够提供可靠且更加相关的信息的，可以按照其流动性顺序列示。体现了相关性的会计信息质量要求。<strong>反馈价值、预测价值</strong></li>
<li><strong>可比性：</strong>同一企业不同时期相似或相同，会计政策一致；不同企业同一时期相似或者相同，采用规定的会计政策，确保会计信息口径一致，相互可比。<strong>纵向可比 及 横向可比；不得随意变更</strong></li>
<li><strong><font color =red>实质重于形式：</font></strong>对于投资企业，无法参与财务和经营决策，不能对公司施加重大影响。基于此原则，不能采用权益法核算所投企业；购买少数股权，在合并报表层面，属于一项权益性交易，本质上是少数股东收回投资，属于筹资活动。根据此原则，产生的现金流量归属筹资活动。例2：附有追索权的票据出售给银行、合并报表的编制。<font color =red>按照经济实质进行会计确认、计量和报告，不仅仅以交易或事项的法律形式为依据。</font></li>
<li><strong>可理解性：</strong>清晰明了。</li>
<li><strong>可靠性：强调真实、诚信为本、操守为重、坚持准则、不做假账；以实际发生的交易或事项</strong></li>
<li><strong>及时性:</strong>（对相关性和可靠性起着制约作用）</li>
<li>注册会计师职业道德：诚信、客观公正、独立性、专业胜任能力和勤勉尽责、保密、良好职业行为</li>
<li>会计人员职业道德：坚持诚信，守法奉公；坚持准则，守则敬业；坚持学习，守正创新。</li>
</ol>
<h1 id="第二章-会计基础："><a href="#第二章-会计基础：" class="headerlink" title="第二章 会计基础："></a>第二章 会计基础：</h1><p><em>(4)所建造的固定资产已达到预定可使用状态，但尚未办理竣工结算的，应当自达到预定可使用状态之日起，根据工程预算、造价或者工程实际成本等，按暂估价值转入固定资产，并按有关计提固定资产折旧的规定，计提固定资产折旧。待办理竣工决算手续后再调整原来的暂估价值(追溯调整但不需要调整原已计提的折旧额。<strong>(会计估计变更:未来适用法)</strong></em></p>
<h3 id="2-1-会计要素与会计等式"><a href="#2-1-会计要素与会计等式" class="headerlink" title="2.1 会计要素与会计等式"></a>2.1 会计要素与会计等式</h3><ol>
<li>会计要素按照其性质分为资产、负债、所有者权益、收入、费用以及利润。</li>
<li>会计科目按其反映的经济内容不同，可分为资产类、负债类、所有者权益类、共同类、损益类、成本类</li>
</ol>
<h3 id="2-2-会计凭证和会计账簿"><a href="#2-2-会计凭证和会计账簿" class="headerlink" title="2.2 会计凭证和会计账簿"></a>2.2 会计凭证和会计账簿</h3><ol>
<li>各种日记账、总账以及资本、债权、债务明细账都可采用三栏式账簿，<strong>三栏式账簿设有借方、贷方和余额三个金额栏目的账簿，不设数量栏，适用于只需要进行金额核算而不需要进行数量核算的明细核算，</strong>如”应收账款”、”应付账款”等债权债务结算科目的明细分类核算。</li>
<li><strong>多栏式明细账需要登记多栏的数据，下面有很多分类的科目明细账，按照明细科目或明细项目分设若干专栏,以在同一账页上集中反映各有关明细科目的金额。</strong>适用于费用、成本、收入的明细核算,如”制造费用”、”管理费用”、”营业外收入”和”营业外支出”等科目的明细分类核算。</li>
<li><strong>数量金额式明细账的借方、贷方和余额三个栏目内都分设数量、单价和金额三个小栏</strong>，借以反映财产物资的实物数量和价值量。</li>
<li>多栏式的可以用三栏的代替，但是数量金额的不可以。 数量金额一般用于成本。</li>
</ol>
<table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%89%E6%A0%8F%E5%BC%8F%E6%98%8E%E7%BB%86%E8%B4%A62.png" /></td> 
        <td><img src="https://view-cache.book118.com/view5/M01/16/19/wKh2BF37OfmAFc2MAACiPo504VE708.png" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%89%E6%A0%8F%E5%BC%8F%E6%98%8E%E7%BB%86%E8%B4%A6.png" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%95%B0%E9%87%8F%E9%87%91%E9%A2%9D%E5%BC%8F%E6%98%8E%E7%BB%86%E8%B4%A6.png" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%A4%9A%E6%A0%8F%E5%BC%8F%E6%98%8E%E7%BB%86%E8%B4%A6.png" /></td>
    <tr> 
</table>

<h3 id="2-3-财产清查"><a href="#2-3-财产清查" class="headerlink" title="2.3 财产清查"></a>2.3 财产清查</h3><ol>
<li><p>账账核对与账实核对</p>
</li>
<li><p>往来款项的清查一般采用发函询证的方法；实物资产清查的方法有：实地盘点法和技术推算法（通过量方、计尺等技术推算财产物资的结存数量）。</p>
</li>
</ol>
<h3 id="2-4-会计账务处理程序"><a href="#2-4-会计账务处理程序" class="headerlink" title="2.4 会计账务处理程序"></a>2.4 会计账务处理程序</h3><ol>
<li>记账凭证账务处理程序（<strong>适合规模小业务少的单位</strong>）、汇总记账凭证账务处理程序、科目汇总表账务处理程序（<strong>又称记账凭证汇总表账务处理程序</strong>，不利于单位对账目进行检查），这三种主要的账务处理程序中，都是根据明细账和总分类账编制财务报表的。</li>
</ol>
<h1 id="第三章-流动资产"><a href="#第三章-流动资产" class="headerlink" title="第三章 流动资产"></a>第三章 流动资产</h1><h3 id="3-1-货币资金"><a href="#3-1-货币资金" class="headerlink" title="3.1 货币资金"></a>3.1 货币资金</h3><ol>
<li>其他货币资金—外埠存款（外地开立的账户）/银行本票</li>
<li>销售商品收到商业汇票—应收票据</li>
<li>企业外埠除了采购人员可从中提取少量现金外，一律采用转账结算。</li>
<li>企业现金的而限额是由开户行根据单位的实际需要核定的，一般按照单位3~5天日常零星开支所需确定。</li>
</ol>
<h3 id="3-2-交易性金融资产"><a href="#3-2-交易性金融资产" class="headerlink" title="3.2 交易性金融资产"></a>3.2 交易性金融资产</h3><ol>
<li><p>取得交易性金融资产时，相关交易费用计入投资收益。</p>
</li>
<li><p>信用证保证金存款是指外贸企业在开立信用证时向银行存入一定抵押担保资金</p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>经济业务</th>
<th>借方</th>
<th>贷方</th>
</tr>
</thead>
<tbody>
<tr>
<td>购入交易性金融资产</td>
<td>交易性金融资产-成本 90</td>
<td>其他货币资金  90</td>
</tr>
<tr>
<td>股价上升</td>
<td>交易性金融资产-公允价值变动  15</td>
<td>公允价值变动损益  15</td>
</tr>
<tr>
<td>宣告股利</td>
<td>应收股利  3</td>
<td>投资收益  3</td>
</tr>
<tr>
<td>派发现金股利</td>
<td>其他货币资金  3</td>
<td>应收股利  3</td>
</tr>
<tr>
<td>股价下降后出售</td>
<td>其他货币资金  97.5<br />投资收益  7.5</td>
<td>交易性金融资产-成本  90<br />-公允价值变动 15</td>
</tr>
<tr>
<td>小结：出售时确认的投资收益:</td>
<td>$(6.5-7)\times{15}=-7.5$</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>出售交易性金融资产时，确认的投资收益金额是取得价款和该项交易性金融资产账面价值差额、并扣除转让金融商品的应交增值税的余额。另，不需要把期间公允价值变动损益结转到投资收益。</li>
<li>金融商品转让按照卖出价扣除买入价（不需要扣除已宣告未发放现金股利和已到付息期未领取的利息）后的余额作为销售额计算增值税，即转让金融商品按盈亏相抵后的余额为销售额。</li>
<li>转让金融商品按盈亏相抵后出现负差，可结转下一纳税期与下期转让金融商品销售额互抵，但年末时仍出现负差的，不得转入下一纳税年度。</li>
<li>交易性金融资产初始成本不包含已宣告但尚未发放的现金股利或已到付息期但尚未领取的利息，即对应计入应收股利和应收利息。<font color =red>购入交易性金融资产时，支付的相关交易费用（手续费、印花税等）<strong>计入投资收益核算。</strong></font><br>取得交易性金融资产时，如果实际支付的价款中包含已经宣告但尚未分派的现金股利，应作为应收股利单独核算，而不是直接计入相关资产的成本或初始确认金额</li>
</ol>
<h3 id="3-3-应收及预付款项"><a href="#3-3-应收及预付款项" class="headerlink" title="3.3 应收及预付款项"></a>3.3 应收及预付款项</h3><ol>
<li>坏账准备科目的贷方余额反映已经提取但尚未转销的坏账准备数额，借方余额表示已有坏账准备小于发生的坏账。已经发生的坏账损失会减少坏账准备，应转销实际发生的坏账，所以借记坏账准备科目。<br>即预期有坏账，计提坏账准备，先转入坏账准备贷方，确认信用减值损失，待确认实际损失且批报后，计入坏账准备借方，冲减应收账款。</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>经济业务</th>
<th>借方</th>
<th>贷方</th>
</tr>
</thead>
<tbody>
<tr>
<td>计提应收账款的坏账准备</td>
<td>信用减值损失</td>
<td>坏账准备</td>
</tr>
<tr>
<td>收回已转销的应收账款</td>
<td>应收账款</td>
<td>坏账准备</td>
</tr>
<tr>
<td>转销无法收回备抵法核算的应收账款</td>
<td>坏账准备</td>
<td>应收账款</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><p>银行汇票存款和银行本票存款属于其他货币资金核算的内容。</p>
</li>
<li><p>商业汇票背书转让以取得所需物资时，会涉及”原材料“、”应交税费—应交增值税（进项税额）“和”银行存款“科目；票据贴现，涉及”银行存款“和“财务费用”。</p>
</li>
<li><strong>其他应收款指除<font color =red>应收票据、应收账款和预付账款</font>以外的，企业应收、暂付其他单位和个人的各种款项。</strong></li>
<li><strong>小企业应收款项减值采用直接转销法，</strong>发生的坏账损失计入营业外支出。<font color =red>日常核算中应收款项可能发生的坏账损失不进行会计处理。只有在实际发生坏账时，才作为坏账损失计入营业外支出。</font>采用直接转销法，会高估企业期末应收款项，因为在资产负债表上，应收账款是按账面余额而不是账面价值反映，这在一定程度上高估了期末应收款项。</li>
<li><strong>企业确定应收账款减值只能采用备抵法，不得采用直接转销法。</strong>（企业，非小企业）</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">可以转回的减值准备</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">应收账款、存货、交易性金融资产、持有待售资产、债券投资、其他债券投资、合同履约成本</td>
</tr>
<tr>
<td style="text-align:left"><strong>不可转回的减值准备</strong></td>
</tr>
<tr>
<td style="text-align:left">长期股权投资、采用成本模式进行后续计量的投资性房地产、固定资产、生产性生物资产、无形资产、商誉、探明石油天然气矿区权益和井及相关设施等</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>免税农产品可以从其支付的采购价款中扣除增值税扣除率所占金额，作为其进项税额处理。如：免税农产品采购金额为80万，增值税扣除率为9%，则采购成本为$80\times{91\%=72.8}$</li>
</ol>
<h3 id="3-4-存货"><a href="#3-4-存货" class="headerlink" title="3.4 存货"></a>3.4 存货</h3><ul>
<li>企业采用<strong>实际成本法</strong>核算时，可以采用个别计价法、<strong>先进先出法</strong>、月末一次加权平均法、移动加权平均法。除此核算方法，还有<strong>计划成本法</strong>、毛利率法、零售价法。</li>
</ul>
<ol>
<li><strong>毛利率法计算期末存货成本。</strong>如：毛利率为25%，期初存货700万，本期新增100万，本期销售收入900万，则期末存货为：$800-900\times{0.75}=125$</li>
<li><strong>售价金额法：</strong>如某商场为增值税一般纳税人，采用售价金额法核算。该商场2023年1月份期初存货的进价为100万元，售价总额为200万元，本月购入的进价成本为500万元，售价总额为800万元，本期销售收入600万元。则2023年1月期未存货的成本为 (240)万元。<br>即：<script type="math/tex">\begin{align}&商品进销差价率=[(200-100)+(800-500)]/(200+800)=40\%\\&{\text{23年1月的销售成本}=600\times(1-40\%)=360}\\&{\text{23年1月期末存货成本}=100+500-360=240}\end{align}</script></li>
<li><strong>采用计划成本核算：</strong><font color =red><strong>适用于存货品种繁多、收发频繁的企业，</strong></font>或者管理上需要分别核算其计划成本和成本差异的。<br>例：某企业材料采用计划成本核算。月初结存材料计划划成本为200万元，材料成本差异为节约20万元，当月购入材料一批，实际成本为135万元，计划成本为150万元，领用材料的计划成本为180万元。当月结存材料的实际成本为 (153)万元。即：<script type="math/tex">\begin{align}&(-20-15)/(200+150)=10\%\\&180\times{(1-10\%)=162}\\&(200-20+135-162)=153 \end{align}</script></li>
</ol>
<h4 id="3-4-1-委托加工物资"><a href="#3-4-1-委托加工物资" class="headerlink" title="3.4.1 委托加工物资"></a>3.4.1 委托加工物资</h4><ol>
<li>委托加工物资也可以采用计划成本或售价进行核算，其方法于库存商品相似。<br><font color =red><strong>委托加工物资，由受托方代收代缴的消费税，收回后用于直接销售的，记入“委托加工物资”科目。</strong><br><strong>收回后用于继续加工的，记入“应交税费—应交消费税”</strong></font><sup><a href="https://www.dongao.com/cjks/cjkjsw/202004013104006.shtml">Source</a></sup><br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%A7%94%E6%89%98%E5%8A%A0%E5%B7%A5%E7%89%A9%E8%B5%84-%E6%B6%88%E8%B4%B9%E7%A8%8E%E5%A4%84%E7%90%86.png" alt="委托加工物资-消费税处理" style="zoom: 25%;" /></li>
</ol>
<h4 id="3-4-2-材料成本差异"><a href="#3-4-2-材料成本差异" class="headerlink" title="3.4.2 材料成本差异"></a>3.4.2 材料成本差异</h4><ul>
<li>包括实际成本购入计入材料采购、计划成本结转至材料采购、差额结转入库材料成本差异（超支则将差额计入借方材料成本差异(资产类科目，借方表资产价值比计划增加)）、计算材料成本差异率、原材料结转计划成本费用、结转产成品应负担的成本差异（对应将计算后差额计入贷方材料成本差异，表卖出的资产价值比计划增加）</li>
<li>购进材料实际成本小于计划成本的差额属于节约差异，反映在材料成本差异账户的贷方。发出材料应负担的超支差异，在材料成本差异账户贷方反映。发出材料应负担的节约差异在借方反映。</li>
<li><em>材料成本差异（资产类）：用于核算企业各种材料的实际成本与计划成本的差异，借方登记实际成本大于计划成本的差异额(超支额)，贷方登记实际成本小于计划成本的差异额(节约额)以及已分配的差异额。</em><br>企业采用计划成本对材料进行日常核算，应按月分摊发出材料应负担的成本差异，不应在季末或年末一次计算分摊。</li>
</ul>
<p>例：<font color =red>A公司原材料按计划成本核算。(即原材料账户余额为计划成本)</font>7月份原材料账户余额9 000元，材料成本差异账户借方余额900元。本月购入原材料实际成本20 000元，增值税2 600元，购入材料已经验收入库，其计划成本17 695元，本月生产产品用材料10 000元，车间用材料2 000元。</p>
<table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%9D%90%E6%96%99%E6%88%90%E6%9C%AC%E5%B7%AE%E5%BC%821.png" width="620" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%9D%90%E6%96%99%E6%88%90%E6%9C%AC%E5%B7%AE%E5%BC%822.png" width="620" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%9D%90%E6%96%99%E6%88%90%E6%9C%AC%E5%B7%AE%E5%BC%823.png" width="620" /></td>
    </tr>
</table>

<h4 id="3-4-3-周转材料"><a href="#3-4-3-周转材料" class="headerlink" title="3.4.3 周转材料"></a>3.4.3 周转材料</h4><ul>
<li>生产包装物—制造费用；出售/出借，单独计价—其他业务成本；出售/出借，不单独计价（即伴随出售/出借）—销售费用。</li>
</ul>
<h1 id="第四章-非流动资产"><a href="#第四章-非流动资产" class="headerlink" title="第四章 非流动资产"></a>第四章 非流动资产</h1><h3 id="4-1-长期股权投资"><a href="#4-1-长期股权投资" class="headerlink" title="4.1 长期股权投资"></a>4.1 长期股权投资</h3>]]></content>
      <categories>
        <category>CPA</category>
      </categories>
      <tags>
        <tag>初级会计师</tag>
      </tags>
  </entry>
  <entry>
    <title>利率体系与指标分析</title>
    <url>/post/28330/</url>
    <content><![CDATA[<h1 id="中国利率体系"><a href="#中国利率体系" class="headerlink" title="中国利率体系"></a>中国利率体系</h1><p><a href="http://camlmac.pbc.gov.cn/goutongjiaoliu/113456/113469/4351958/index.html">《中国的利率体系与利率市场化改革》—易纲，202109</a></p>
<div class="note info flat"><table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%88%91%E5%9B%BD%E5%88%A9%E7%8E%87%E4%BD%93%E7%B3%BB%E5%92%8C%E8%B0%83%E6%8E%A7%E6%A1%86%E6%9E%B6" alt="我国利率体系和调控框架" style="zoom:50%;" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B8%AD%E5%9B%BD%E5%88%A9%E7%8E%87%E4%BD%93%E7%B3%BBrandom1" style="zoom:50%;" /></td>
    </tr>
</table>
</div>
<h2 id="央行资产负债表"><a href="#央行资产负债表" class="headerlink" title="央行资产负债表"></a>央行资产负债表</h2><ol>
<li><p><strong>中央银行的资产</strong>是指中央银行在一定时点所拥有的各种债权，包括国外资产（主要包括外汇和黄金）、对金融机构债权（是中央银行对商业银行和其他金融机构的贴现与贷款余额）、政府债券和其他资产（包括固定资产等）等。</p>
</li>
<li><p><strong>中央银行的负债</strong>是指金融机构、政府、个人和其他部门持有的对中央银行的债权，主要包括通货发行或货币发行,（包括流通中现金即非银行公共所持现金和商业银行等金融机构库存现金两部分）、商业银行等金融机构存款（包括法定存款准备金和超额存款准备金）、国库及公共机构存款、其他负债（包括外国中央银行和金融机构在中央银行的存款等）等。</p>
</li>
<li><p><strong>资本项目</strong>包括中央银行的资本、准备金、未分配利润等。</p>
</li>
</ol>
<h2 id="货币政策工具"><a href="#货币政策工具" class="headerlink" title="货币政策工具"></a>货币政策工具</h2><p><strong>货币政策工具：</strong><br>    1.公开市场操作：<br>        a.常规操作：央票、回购交易、国库定存、现券交易<br>        b.创新工具：短期流动性调节工具SLO、常备借贷便利SLF、中期借贷便利MLF、补充抵押贷款PSL<br>    2.央行贷款：再贷款、再贴现<br>    3.准备金利率、存贷款基准利率</p>
<p>货币市场、债券市场、信贷市场的指标性利率分别为存款类金融机构间的债券回购利率（DR）、国债收益率、贷款市场报价利率（LPR）</p>
<p><strong><a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125431/125463/2881199/index.html">公开市场操作(OMO)</a>：</strong>每日开展逆回购操作，主要包括回购交易（对象为<a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125431/125469/4889129/index.html">51家一级交易商</a>）、现券交易和发行中央银行票据，不含MLF、SLO、PSL、国库现金定存。<br><em>短期流动性调节工具（Short-term Liquidity Operations, SLO）：调节市场短期资金供给，熨平突发性、临时性因素导致的市场资金供求大幅波动</em><br><strong><a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125443/125854/2895400/index.html">常备借贷便利（StandingLendingFacility，SLF）</a>：</strong>金融机构主动发起。央行与金融机构“一对一”交易，针对性强。用于满足机构较长期限的大额流动性需求，期限为1-3个月，抵押式发放，对象为存款类金融机构，政策行和全国性商行为主。<br><div class="note info flat"><p>抵押不转移对抵押物的占管形态，仍由抵押人保管；质押改变了质押物的占管形态，由质权人保管。</p>
</div><br><strong><a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125446/125870/2809123/index.html">中期借贷便利利率（Medium-term Lending Facility，MLF）</a>：</strong><font color =red>每月月中</font>开展MLF操作。发放对象为符合宏观审慎要求的商业银行和政策行。采取质押式发放，质押券为国债、央票、政金债、高级信用债。<br><strong><a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125440/3876551/3876493/index.html">贷款市场报价利率（LPR）</a>：</strong>2019年改革后<font color =red>代替贷款基准利率</font>，成为金融机构贷款利率定价的主要参考基准。各报价行在公开市场操作利率（主要为1年期MLF）的基础上加点报价，最终形成了“MLF利率→LPR→贷款利率”的利率传导机制，贷款利率和债券利率之间的相互参考作用也有所增强。<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/LPR%26MLF.png" alt="LPR&MLF" style="zoom: 50%;" /><br><a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/4634692/4634697/5112065/index.html"><strong>结构性货币政策工具：</strong></a>如再贴现—对金融机构持有的已贴现票据进行贴现的业务，用于支持扩大涉农、小微和民营企业融资；抵押补充贷款(2014年)；租赁住房贷款支持计划—8个城市开展试点，支持市场化批量收购存量住房、扩大租赁住房供给；碳减排支持工具(2021年)。<br><strong>抵押补充贷款（Pledged Supplemental Lending，PSL）：</strong>为开发性金融支持棚改、支持国民经济重点领域、薄弱环节和社会事业发展提供长期稳定、成本适当的资金来源。<br><strong>存款准备金利率：</strong>2020年超额准备金利率由0.72%降至0.35%，与活期存款基准利率一致<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%AD%98%E6%AC%BE%E5%87%86%E5%A4%87%E9%87%91%E5%88%A9%E7%8E%87.png" alt="存款准备金利率" style="zoom: 50%;" /><br><strong><a href="https://www.chinamoney.com.cn/chinese/bkshibor/">上海银行间同业拆放利率（Shibor）：</a></strong>2007年。报价行的算术平均利率，单利、无担保、批发性利率；包含8个品种：O/N、1W、2W、1M、3M、6M、9M、1Y<br><strong>常规货币政策（一般性货币政策工具）：</strong>通过控制短期利率进行调控，工具包括：法定存款准备金率、公开市场操作、再贴现率<br><strong>选择行货币政策工具及其他政策工具：</strong>消费者信用控制、证券市场信用控制、不动产信用控制、直接信用控制、间接信用控制<br><strong>创新型货币政策工具：</strong>SLO、SLF、PSL、MLF、TLF(临时流动性便利)、CRA(临时准备金动用安排)、TMLF(定向中期借贷便利)<br><strong>非传统货币政策：</strong><sup><a href="https://epaper.gmw.cn/gmrb/html/2010-08/27/nw.D110000gmrb_20100827_2-07.htm#:~:text=%E6%89%80%E8%B0%93%E9%9D%9E%E4%BC%A0%E7%BB%9F%E8%B4%A7%E5%B8%81%E6%94%BF,%E4%BF%A1%E8%B4%B7%E5%92%8C%E8%B5%84%E4%BA%A7%E5%B8%82%E5%9C%BA%E3%80%82">[1]</a></sup> <sup><a href="https://www.sohu.com/a/225901690_481741">[2]</a></sup>资产购买工具、量化宽松、负利率<br><div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">OMO</button><button type="button" class="tab " data-href="test1-2">SLF</button><button type="button" class="tab " data-href="test1-3">超额准备金率</button><button type="button" class="tab " data-href="test1-4">DR007</button><button type="button" class="tab " data-href="test1-5">MLF</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>中国宏观-银行与货币-央行货币政策工具-逆回购利率：7天、14天、28天、63天</strong></p></div><div class="tab-item-content" id="test1-2"><p><strong>中国宏观-银行与货币-央行货币政策工具-常备借贷便利(SLF)利率: 隔夜、7天、1个月</strong></p></div><div class="tab-item-content" id="test1-3"><p><strong>中国宏观-利率汇率-存款利率-人民银行对金融机构存款利率</strong></p></div><div class="tab-item-content" id="test1-4"><p><strong>中国宏观-固收数据-回购利率-银行间质押式回购-DR001、007、014、021、1M、2M、3M、4M、6M、9M、1Y</strong></p></div><div class="tab-item-content" id="test1-5"><p><strong>中国宏观-银行与货币-央行货币政策工具-中期借贷便利操作-3个月、6个月、1年</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%9F%AD%E6%9C%9F%E6%94%BF%E7%AD%96%E5%88%A9%E7%8E%87%E5%92%8C%E5%88%A9%E7%8E%87%E8%B5%B0%E5%BB%8A" alt="短期政策利率和利率走廊" style="zoom: 25%;" /></p>
<h1 id="资金分层及高频指标"><a href="#资金分层及高频指标" class="headerlink" title="资金分层及高频指标"></a>资金分层及高频指标</h1><p><em>注：相对于月度、季度指标，高频指标一般为日度、周度、旬度</em></p>
<h2 id="资金分层"><a href="#资金分层" class="headerlink" title="资金分层"></a><a href="https://southern-ficc.github.io/post/44421/">资金分层</a></h2><p><strong>银行间市场：</strong>存款类机构与银行间机构分层：R007 - DR007；R001 - DR001</p>
<p>上海交易所与银行间分层：GC007 - R007；GC001 - R001</p>
<p><strong>超额流动性：</strong>R007 - 7天逆回购利率；DR007 - 7天逆回购利率</p>
<p>期限利差、机构间利差（国股行与中小行与非银机构、城投与国债）、产品间利差（非银机构基金证券及货币市场基金）、市场间利差（上海交易所与银行间）</p>
<p>基本面影响政策面，政策面影响资金面、资金面影响供需面、供需面影响情绪面</p>
<h2 id="基本面"><a href="#基本面" class="headerlink" title="基本面"></a>基本面</h2><p>⒈经济增长和通货膨胀指标决定利率中长期走势。—*’国家统计局、海关总署’<br>⒉对于债券，长期限债券易受经济因子影响。长期来看，经济增长强/弱大致对应着货币政策紧/松。<br>⒊基本面：[实体和金融杠杆、广义信贷、房价]、[经济增长、通胀数据]</p>
<ul>
<li><p><strong>通货膨胀指标(月度|次月上旬<em>‘10日左右’</em>)：</strong><br>居民消费价格指数CPI；工业生产者出厂价格指数PPI；工业生产者购进价格指数PPIRM</p>
</li>
<li><p><strong>经济增长指标(月度|次月中旬<em>‘15日左右’</em>)：</strong><br>GDP(季度|次月中旬<em>‘18日左右’</em>)；<strong>生产法</strong>—规模以上工业增加值[<font color =red>工业</font>]；<u><strong>支出法</strong></u>—[<font color =red>投资</font>]固定资产投资、房地产市场基本情况；[<font color =red>消费</font>]社会消费品零售总额；[<font color =red>净出口</font>]进出口数据(次月上旬<em>‘8日左右’</em>)<br>注：GDP核算方法：生产法、收入法、支出法。</p>
</li>
<li><strong>生产法下的高频指标路径：</strong><br>1.<a href="https://www.stats.gov.cn/sj/tjbz/gmjjhyfl/202302/P020230213400314380798.pdf">国家统计局行业划分</a>：<br>工业包含①采矿业、②制造业、③[电力、热力、燃气及水生产和供应业]等3个行业，共40个细分大类。通过细分大类获得重点行业高频指标<br>2.<a href="https://data.stats.gov.cn/files/html/quickSearch/trcc/trcc01.html">投入产出表—国家统计局</a><br>根据2020年投入产出表,对于工业生产下的40个细分大类，前10大行业占比总和达到了52%。其中，钢铁产业、化工产业、汽车产业与多个行业相关性较高。<br><em><font color =grey>按照国家统计调查制度，自1987年起，每五年开展一次全国投入产出调查，编制两张全国投入产出表，最新编制的为2020年投入产出表。按照《国务院关于开展第五次全国经济普查的通知》，将于2023年开展第五次全国经济普查，并统筹开展投入产出调查。下一张表为2023年投入产出表，预计于2025年编制完成并公布。</font></em></li>
<li><strong>支出法下的高频指标：</strong><br><strong>1.<a href="https://www.stats.gov.cn/zs/tjws/tjzb/202301/t20230101_1903707.html">社会消费品零售总额(为消除春节影响，1、2月合并发布)：</a></strong>企业（单位、个体户）通过交易售给个人、社会集团非生产、非经营用的实物商品金额，以及提供餐饮服务所取得的收入金额。<br><strong>1.1.按消费形态分类：</strong>商品零售(限额以上单位零售、限额以下单位零售)、餐饮收入。其中，对于商品零售，统计局仅统计限额以上单位零售。<br>1.2.<strong>高频指标：</strong>限额以上单位商品零售共计16类细分类科目，其中汽车类、石油及制品类，粮油食品类、服装类等四类细分科目占比最大。另，由于粮油食品类波动性小，不作为社会消费品零售总额的波动因子。<br><strong>2.投资相关的高频指标：</strong>固定资产投资、房地产市场基本情况<br>固定资产投资：由于统计局在2018年后仅公布累计同比，且每年统计口径都会有调整，因此可以通过移动平均值降低变动误差。<br><strong>高频指标：</strong>原材料（中国水泥网<strong>每周</strong>水泥价格指数(开工率、全国CEMPI)；沥青—道路基建(基础设施固定资产投资)；浮法玻璃、螺纹钢—房地产固定资产投资；）100大中城市成交土地占地面积；30大中城市商品房成交面积。<br><strong>3.出口相关的高频指标：</strong><br>海关总署发布的贸易数据：由于商品分类和出口目的国分类没有对应高频指标，因此采用能够反映外需的综合指标跟踪出口变动。<br>运输方式：海运(干散货运输、邮轮运输、集装箱运输)<br><strong>高频指标：</strong>上海航运交易所：中国出口集装箱运价指数(CCFI)和上海出口集装箱运价指数(SCFI)、波罗的海干散货指数—反映全球市场对大宗原料产品的需求、美国制造业PMI—最大去向国。<br><strong>4.通货膨胀及相关高频指标：</strong><br><strong>4.1.CPI：</strong>要包含<u>食品烟酒、</u>衣着、居住、生活用品及服务、<u>交通通信、</u>教育文化娱乐、医疗保健、其他用品及服务等8大类，共268个基本分类的商品与服务价格。<strong>统计局通常将CPI分为两大类，其中食品权重约为19%左右，非食品权重约为81%左右，其中食品权重主导CPI走势。畜肉类对CPI影响大，猪肉价格最大。</strong><br><strong>高频指标：</strong>商务部每周公布食用农产品价格指数，农业部每日公布农产品批发价格200指数、菜篮子产品批发价格200指数、猪肉批发价、现货价:布伦特DTD:原油。<br><strong>4.2.PPI：</strong>根据统计局的定义，工业生产者价格指数包括工业生产者出厂价格指数(PPI)和工业生产者购进价格指数(PPIRM)。<strong>统计局通常将PPI分为生产资料和生活资料两大类，其中生产资料包含采掘、原材料、加工3个子类，生活资料包含食品、衣着、一般日用品、耐用消费品4个子类。</strong><br><strong>高频指标：</strong>生产资料指标：生产资料价格指数(商务部)、南华期货商 品指数(南华期货)、南华期货工业品指数(南华期货)、CRB现货综合指数(CRB)。<br><em><font color =grey>PPI反映工业企业产品第一次出售时的出厂价格的变化趋势和变动幅度，PPIRM反映工业企业作为中间投入产品的购进价格的变化趋势和变动幅度。</font></em></li>
</ul>
<h2 id="政策面"><a href="#政策面" class="headerlink" title="政策面"></a>政策面</h2><p>货币政策四大目标：稳定物价、充分就业、经济增长及国际收支平衡。</p>
<p>基本面影响政策面(货币政策：OMO、、监管政策、MPA、财政政策：税收调节，预算、发行国债、扩大或减小财政支出)</p>
<p>政策面：利率债、信用债</p>
<p>法定准备金调节再贴现利率调节公开市场业务(最常用)；</p>
<h2 id="资金面"><a href="#资金面" class="headerlink" title="资金面"></a>资金面</h2><h3 id="货币："><a href="#货币：" class="headerlink" title="货币："></a>货币：</h3><p><strong>狭义流动性(银行间流动性)——主要通过央行的货币政策工具直接调控。</strong></p>
<ol>
<li><p><strong>M0=流通中现金；M1=M0＋企业活期存款＋农村存款＋信用卡存款＋个人活期存款＋现金管理类金融产品(余额宝)＋第三方支付机构的备付金；M2=M1＋定期存款</strong><br>“中金公司指出，央行在1994年未将居民活期存款纳入M1统计是有一定历史背景的。在当时个人存款被统称为“储蓄存款”，分为活期储蓄和定期储蓄，但无论是活期储蓄还是定期储蓄，其流动性在当时都受到较大的限制。因为缺乏银行卡和便利的支付手段，储蓄存款虽然可以提现，但若不经过“提现”这一环节，活期储蓄存折是无法用来购物的，也就是说，活期储蓄存款并不能满足随时、直接转化为购买力这一M1的内涵。但是，随着银行卡、电子支付的普及，居民活期存款目前完全可以用于直接支付。”</p>
</li>
<li><p><strong>流动性跟踪：</strong></p>
<ol>
<li><strong>超储率：</strong>即超额存款准备金率是超额存款准备金与一般性存款的比值，即<strong>超储率=超额存款准备金/一般性存款。其衡量银行体系流动性松紧的关键指标，超储率高表示银行间资金相对充裕，反之则表明银行间资金面较为紧张，银行对央行净投放力度的敏感度会上升。</strong>相比于超额准备金率，超储率更加能反应银行总体的资金面情况。(一般来源于每个季度的货币政策执行报告中:2、5、8、11)</li>
<li><strong>公开市场操作：</strong>7天逆回购投放数量、到期数量、投放价格；</li>
<li><strong>质押式回购成交量变动：</strong>银行间质押式回购平均日成交量、隔夜回购平均日成交量；</li>
<li><strong>DR007、DR001价格变动、R007-DR007价格变动(资金分层、银行体系融出意愿)；</strong></li>
<li><strong>同业存单：</strong>发行价格、数量、净融资数据；</li>
<li><strong>票据利率：**</strong>6M、3M票据利率价格变动</li>
<li><strong>政府债券：</strong>国债、地方债发行数量、净发行数量、缴款数量、净缴款数量</li>
</ol>
</li>
</ol>
<h3 id="信用："><a href="#信用：" class="headerlink" title="信用："></a>信用：</h3><p><strong>广义流动性——反映实体经济的融资需求。</strong>主要受经济环境、狭义流动性和信贷政策影响，经济环境良好，企业资本回报率高，则实体融资需求就会提高，信用扩张增加。</p>
<p>货币与信用实际存在着：“宽货币+宽信用”、“紧货币+紧信用”和“宽货币+紧信用”、“紧货币+宽信用”四种组合。前两者是央行理想中的状态，而后两者则是现实中经常出现的状态。要观察货币和信用松紧周期，前者主要是关注央行关于基础货币操作和银行间利率，后者则主要是M2和社融指标。后者往往通过对于M2增速与社融增速来确定市场信用状态。当M2增速高于社融增速时，市场实际上仍处于紧信用周期。</p>
<h2 id="供需面"><a href="#供需面" class="headerlink" title="供需面"></a>供需面</h2><p><strong>投资者行为及供求关系：</strong><br>1.投资者：商业银行、银行理财、保险、基金及资管、券商、外资及其他<br>2.投资者的需求由投资者的规模(负债端|融资能力)、风控体系及要求、投资范围约束决定。<br>3.对于债券：<br> ①供给因素：债券净发行量增加，会导致该债券利率有更多上升的压力。<br> ②需求因素：投资者对于债券需求变化。</p>
<font color =grey>例如：投资者对国债、国开债需求发生相对变化时，利差和隐含税率也可能出现波动。例如随着居民理财意识不断增强，广义基金规模扩张，可能导致国开债的相对需求增加，某些期限的利差和隐含税率中枢被压低，反过来当委外业务监管收紧时利差也可能走阔。</font>

<h2 id="情绪面"><a href="#情绪面" class="headerlink" title="情绪面"></a>情绪面</h2><p>投资者情绪</p>
<h1 id="利率风险特征与传导路径"><a href="#利率风险特征与传导路径" class="headerlink" title="利率风险特征与传导路径"></a>利率风险特征与传导路径</h1><h2 id="利率风险传导路径"><a href="#利率风险传导路径" class="headerlink" title="利率风险传导路径"></a>利率风险传导路径</h2><ol>
<li>利率风险具有隐蔽性和滞后性，以及有三大传导路径。<ol>
<li><strong>一是影响资产负债估值，降低净资产。</strong>整体来看，由于人身险公司资产久期普遍短于负债久期，利率下行将使得<strong>资产价值增量低于负债价值增量</strong>，从而使净资产下降。</li>
<li><strong>二是影响资负利差水平，产生利差损。</strong>在利率下行环境下，新配置资产收益率下降导致整体投资收益率下行。而保险负债成本存在一定刚性，滞后于收益率变动。<strong>资产端和负债端对利率变动反应时间的错配</strong>导致人身险公司的利差水平随着利率周期进行波动。</li>
<li><strong>三是影响业务现金流，增加流动性风险。</strong>利率下行周期通常伴随经济增速及居民可支配收入增速放缓，保险消费购买力下降，<strong>导致人身险公司经营现金流入下降，流动性风险加大。</strong></li>
</ol>
</li>
</ol>
<h2 id="利率风险管理策略"><a href="#利率风险管理策略" class="headerlink" title="利率风险管理策略"></a>利率风险管理策略</h2><ol>
<li><p><strong>传统的利率风险管理策略</strong>主要包括<strong><font color =red>期限结构匹配、现金流匹配和久期匹配</font></strong>，国外和行业头部机构还会用到凸性匹配和随机利率模型。<br><strong>在实际操作过程中，利率风险管理面临诸多难点和挑战：</strong></p>
<ol>
<li><strong>一是期限结构匹配和成本收益匹配较难平衡兼顾。</strong>长期资产收益率较难覆盖负债成本。如果增配长期债券，期限结构匹配状况改善，但成本收益错配可能加剧。</li>
<li><strong>二是负债产品的复杂性，加大利率风险管理难度。</strong>人身险产品较为复杂，公司需要根据自身负债特征进行利率风险管理。</li>
<li><strong>三是监管视角多样，需要兼顾多重管理目标。</strong>在不同监管视角下的利率风险计量规则存在一定差异，公司需要兼顾多重管理目标。</li>
</ol>
</li>
<li><p><strong>利率风险管理实践与建议：</strong></p>
<p><strong>近年来，保险资金投资渠道不断拓宽，各保险资管机构通过债权计划、股权计划、创投基金等方式支持新质生产力和实体经济高质量发展。</strong><br>从国外保险市场经验来看，结合政策的辅助，资产和负债两端联动调整有望缓解利率风险对保险公司长期经营的冲击。<strong>行业层面，</strong>为防范行业利差损风险，监管已引导保险公司逐步下调预定利率。<strong>建议未来要根据利率走势，持续下调预定利率，降低负债成本。公司层面，</strong>在日常经营过程中，需要以资负管理为核心和主要抓手，加强资负两端协调联动，建立并持续优化利率风险管理机制。<strong>产品策略上，要持续优化产品结构，增加风险共担型产品占比。<font color =red>配置策略上，要充分考虑负债特性，兼顾期限结构、成本收益和现金流匹配。</font>适当拉长资产久期，平衡好配置盘和交易盘比例。</strong>把握结构性投资机会，增厚长期收益水平。保险公司还可逐步探索、研究使用国债期货等衍生工具来管理利率风险。</p>
</li>
</ol>
<h2 id="低利率环境与保险资产配置现状"><a href="#低利率环境与保险资产配置现状" class="headerlink" title="低利率环境与保险资产配置现状"></a>低利率环境与保险资产配置现状</h2><ol>
<li><p><strong>现状：</strong>受债务高企、人口红利渐失、劳动力成本上升以及技术创新和制度创新放缓等一系列因素的影响，我国经济增长速度不断放缓。考虑到企业去杠杆过程中需要维持低利率水平来降低资金成本，人口老龄化、劳动力成本上升等导致投资需求减少，再加上受国外主要经济体的低利率环境影响。</p>
</li>
<li><p>在利率下行趋势下，短期内保险公司以固定收益类为主的存量资产的市场价值将会上升，浮动利率资产(如银行活期存款)的收益则会减少，而新增资产投资回报率将受市场整体回报率下降影响而降低。总体来看，低利率环境并不利于保险资产长期投资回报率的提升。当前保险公司存量保单的承诺保证利率较低，出现大规模利差损的可能性较小。</p>
</li>
<li><p>在低利率环境下，无论是传统的债券和定期存款，还是债权计划、信托产品、理财产品等非标资产，都难免产生收益率的下降。在低利率环境下固定收益类产品的收益率不断降低。但由于负债成本的刚性约束，保单支付需要保险公司有合理的收益和稳定的现金流。在这种背景下，保险公司将有可能攀爬风险曲线，通过适度增加对风险资产的配置来获取较高的投资回报。</p>
</li>
</ol>
<h2 id="低利率环境下保险资产配置策略"><a href="#低利率环境下保险资产配置策略" class="headerlink" title="低利率环境下保险资产配置策略"></a>低利率环境下保险资产配置策略</h2><ol>
<li>总体策略:加久期、稳收益、防风险</li>
<li><strong>加大符合配置需求的债权计划、低风险企业债、优先股以及固定收益金融产品的配置力度，在拉长久期的同时使固定收益资产的收益率稳定在相对较高水平。</strong></li>
<li>着眼长期投资、<strong>价值投资配置权益类资产</strong>。<strong>长期投资、价值投资的关键就是选取ROE较高、盈利和ROE比较稳定的公司</strong>，在其PB处于历史低位时买入，并进行长期持有，预期年均收益率达到ROE/(1-ROE)100%。</li>
<li><strong>扩大另类投资占比。目前，保险公司的另类投资主要集中在房地产、债权计划、信托、理财产品</strong>等。保险公司应进一步<strong>扩大另类投资的领域</strong>和规模，充分发挥保险资金期限长、金额大的优势。例如，<strong>保险资金可以通过债权计划PPP、股权投资和委托建设相结合等方式，对地方性基础设施建设或旧城改造项目进行融资;保险资金也可借助自身的资金实力和保险业务的系统优势，通过并购、股权投资等方式布局养老、医疗、健康、大数据产业。</strong>总体而言，另类投资的投资方向是具有稳定现金流、适度回报率以及较低风险的产业。</li>
<li>积极参与境外资产配置。在当前中国利率有下行压力、美元进入加息周期的背景下，积极进行境外资产配置有助于保险公司抵抗利率周期，并在全球化范围内分散风险。目前，保险资金可投资的海外标的包括股票、债券、基金和不动产等。</li>
</ol>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li><a href="https://zhuanlan.zhihu.com/p/391679912">央行货币政策框架解读</a></li>
<li><a href="https://mp.weixin.qq.com/s/5u9whdtVXYMSRJH6INYW0A">2024年05月15日——《严禁！手工补息！》</a></li>
<li><a href="https://mp.weixin.qq.com/s/S1wLW8n5UCjxW_mqQH_giQ">2024年07月12日——“手工补息”叫停对存款脱媒的影响</a></li>
<li><a href="https://m.163.com/money/article/CB7FOV53002580S6.html">2017年01月20日——低利率环境对保险资产配置的影响及对策</a></li>
</ol>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>理论杂货</category>
      </categories>
      <tags>
        <tag>利率与资金面</tag>
        <tag>货币政策工具</tag>
        <tag>风险指标</tag>
      </tags>
  </entry>
  <entry>
    <title>投资业绩评价及风险管理(VaR in Python)</title>
    <url>/post/62142/</url>
    <content><![CDATA[<h1 id="Wind指标"><a href="#Wind指标" class="headerlink" title="Wind指标"></a>Wind指标</h1><ul>
<li><p>地域利差：取筛选条件下每个债在X时点与国开债的利差，以余额为权进行求和。</p>
</li>
<li><p>地域久期：将某地区发行在时点X存续的全部债看成投资组合，取修正久期，以余额为权进行求和。</p>
</li>
<li>样本券选取方式：在X时点存续的城投债，剔永续债、剔abs。</li>
<li><a href="https://www.msci.com/www/blog-posts/factors-in-focus-are-your/02933279202">[MSCI Model]</a></li>
</ul>
<p>历年偏离度变化 | 剩余期限分布 | 年化收益率 | 年化波动率 | 最大回撤 | 恢复天数 | 年化夏普利率 | 卡玛比率 | 月度正收益率 | 年度ALPHA | 年度择时能力 | </p>
<ul>
<li>风险收益分析：区间收益、最大回撤、Alpha、Beta、Sharpe、Treynor、年化波动率、信息比率、Jensen、Sortino、Calmar、Sterling</li>
<li>拟合业绩表现</li>
<li>业绩表现：Alpha、Beta、Sharpe、信息比率、收益标准差、跟踪误差、超额回报、年化回报、回报</li>
</ul>
<h1 id="投资组合管理"><a href="#投资组合管理" class="headerlink" title="投资组合管理"></a>投资组合管理</h1><p>略。均值-方差模型、CAPM、有效市场假说、现代投资组合理论、协方差、相关系数 <script type="math/tex">\rho_{i,j} = \dfrac{\text{cov}(i,j)}{\sigma_i\sigma_j}</script>、资产收益的可行集、最小方差前沿、有效前沿、无差异曲线、资本配置线CAL、最优CAL、资本市场线CML、系统性风险、非系统性风险、证券市场线SML</p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/SML%E5%92%8CCML.png" alt="SML和CML" style="zoom:50%;" /></p>
<h1 id="投资风险管理"><a href="#投资风险管理" class="headerlink" title="投资风险管理"></a>投资风险管理</h1><h2 id="风险管理目标"><a href="#风险管理目标" class="headerlink" title="风险管理目标"></a>风险管理目标</h2><ol>
<li>针对不同风险类型制定可操作的风险识别、评估、 监测、应对、报告的方法和流程，并通过评估、稽核、检查等手段保证风险管理制度的贯彻落实。</li>
<li>全面性原则(决策、执行、监督、反馈)、适应性原则、有效性原则、制衡性原则、独立性原则、重要性原则</li>
</ol>
<h2 id="风险类型"><a href="#风险类型" class="headerlink" title="风险类型"></a>风险类型</h2><h3 id="市场风险"><a href="#市场风险" class="headerlink" title="市场风险"></a>市场风险</h3><p><strong>定义：</strong>是指由于市场价格（利率、汇率、股票价格和商品价格等）的波动而引起的公司资产发生损失的风险。 </p>
<table>
   <tr>
      <td>1.政策风险</td>
      <td>①宏观政策，包括财政政策、产业政策、货币政策等，都会对金融市场造成影响，进而影响基金的收益水平。<br>②管理：主要在于对国家宏观政策的把握与预测。</td>
   </tr>
   <tr>
      <td>2.经济周期性<br>波动风险 </td>
      <td>经济发展有一定周期性，基金便会追随经济总体趋向而发生变动。</td>
   </tr>
   <tr>
      <td>3.利率风险</td>
      <td>①因利率变化而产生的基金价值的不确定性。<br>②主要受通货膨胀预期、中央银行的货币政策、经济周期和国际利率水平等的影响。</td>
   </tr>
   <tr>
      <td>4.购买力风险</td>
      <td>由于通货膨胀等因素的影响而导致购买力下降，降低基金实际收益，使投资者收益率降低的风险，又称为通货膨胀风险。</td>
   </tr>
   <tr>
      <td>5.汇率风险</td>
      <td>①因汇率变动而产生的基金价值的不确定性。<br>②影响汇率的因素有国际收支及外汇储备、利率、通货膨胀和政治局势等。 </td>
   </tr>
</table>

<h3 id="信用风险"><a href="#信用风险" class="headerlink" title="信用风险"></a>信用风险</h3><p><strong>定义：</strong>是指因融资方、交易对手或发行人等违约导致公司损失的风险。<br><strong>管理措施：</strong><br>1.建立针对债券发行人的内部信用评级制度，结合外部信用评级，进行发行人信用风险管理。<br>2.建立交易对手信用评级制度，根据交易对手的资质、交易记录、信用记录和交收违约记录等因素对交易对手进行信用评级，并定期更新。</p>
<h3 id="流动性风险"><a href="#流动性风险" class="headerlink" title="流动性风险"></a>流动性风险</h3><p><strong>定义：</strong>流动性是资产在短期内以低成本完成市场交易的能力。(是指公司无法以合理成本及时获得充足资金，以偿付到期债务、履行其他支付义务和满足正常业务开展的资金需求的风险)<br><strong>管理措施：</strong><br>1.制定流动性风险管理制度，平衡资产的流动性与盈利性，以适应投资组合日常运作需要。<br>2.及时对投资组合资产进行流动性分析和跟踪，包括计算各类证券的历史平均交易量、换手率和相应的变现周期。<br>3.关注投资者申赎意愿。4.建立流动性预警机制。5.进行流动性压力测试。6.制定流动性风险处置预案</p>
<h3 id="其他风险"><a href="#其他风险" class="headerlink" title="其他风险"></a>其他风险</h3><ol>
<li><strong>操作风险：</strong>是指由于不完善或有问题的内部程序、人员、系统 或外部事件所造成公司损失的风险。<br><strong>合规风险：</strong>是指因公司或工作人员的经营管理或执业行为违反法律、法规或准则而使公司被依法追究法律责任、采取监管措施、给予纪律处分、出现财产损失或商业信誉损失的风险。<br><strong>法律风险：</strong>是指公司因未能遵循法律法规规定及要求，致使 公司面临诉讼纠纷、赔偿、罚款，导致公司受损失的风险。<br><strong>洗钱风险：</strong>是指公司的产品或服务被不法分子利用从事洗钱 活动，进而对公司在法律、声誉、合规、经营等方面造成不利影响的风险。公司关注洗钱风险与其他风险之间的关联性和传导性，审慎评估洗钱 风险对公司声誉、运营、财务等方面的影响，防范洗钱风险传导与扩散。<br><strong>信息技术风险：</strong>是指内、外部原因造成公司网络和信息系统 服务能力异常或数据损毁、泄漏，导致网络和信息系统在业务实现、响应 速度、处理能力、网络和数据安全等方面不能保障交易与业务管理稳定、 高效、安全运行，从而造成损失的风险。<br><strong>声誉风险：</strong>是指由于公司行为或外部事件、及其工作人员违反 廉洁规定、职业道德、业务规范、行规行约等相关行为，导致投资者、发行人、监管机构、自律组织、社会公众、媒体等对公司形成负面评价，从而损害公司品牌价值，不利于公司正常经营，甚至影响到市场稳定和社会 稳定的风险。<br><strong>廉洁风险：</strong>是指公司员工利用职权谋取私利给公司带来危害性或负面影响的可能性。 </li>
</ol>
<h2 id="风险指标"><a href="#风险指标" class="headerlink" title="风险指标"></a>风险指标</h2><p><strong>风险分类：</strong><br>1.事前风险测度：衡量投资组合在将来的表现和风险情况；<br>2.事后风险测度：研究投资组合在历史上的表现和风险情况<br><strong>指标分类：</strong><br>1.描述收益的不确定性：反映投资组合市场风险的指标有基于收益率及方差的风险指标，如波动率、回撤、下行风险标准差等。<br>2.风险敏感性度量指标：如β系数、久期、凸性等<br><strong>波动率：</strong><br>1.投资组合波动率是单位时间收益率的标准差。<br>2.单位时间根据数据来源和应用场景可以取每日、每周、每月、每年等。<br>3.公募基金一般都会公布每日净值增长率。</p>
<p><font color =red><strong>跟踪误差：</strong></font><br>1.跟踪误差是证券组合相对基准组合的<font color= red>跟踪偏离度的标准差：</font><font color =red>$跟踪偏离度=证券组合的真实收益率-基准组合的收益率$</font><br>2.跟踪误差产生的原因：1.复制误差：某些成分股因流动性不足而难以以公允的价格买入。2.现金留存：投资组合不能全部投资于指数标的。3.各项费用。4.其他影响<br><strong>主动比重（AS）：</strong><br>1.主动比重是指投资组合持仓与基准不同的部分。衡量投资组合相对于基准的偏离程度。<br>2.基于投资组合持仓（波动率和跟踪误差基于收益率）<br>3.主动比重为0的投资组合，实质上是一个指数基金<br>4.常用于分析追求相对收益的股票型基金。<br><strong>最大回撤：</strong><br>1.最大回撤测量投资组合在指定区间内从最高点到最低点的回撤。<br><strong>下行标准差：</strong><br>1.波动率计算中，既包括了收益率高于平均值的波动，也考虑了低于平均值的单位区间的波动。有时需要关注收益率不达目标时的风险，这就需要用到下行标准差。</p>
<h2 id="风险价值-VaR-5548-5542"><a href="#风险价值-VaR-5548-5542" class="headerlink" title="风险价值(VaR)-5548-5542"></a>风险价值(VaR)-5548-5542</h2><ol>
<li><p>又称在险价值、风险收益、风险报酬，是指在给定的时间区间内和给定的置信水平下，利率、汇率等市场风险要素发生变化时，投资组合所面临的潜在最大损失。<br>例：某投资组合在持有期为1 周、置信水平为95%的情况下，若所计算的风险价值为-0.82%，则表明该资产组合在1周中的损失有95%的可能大性不会超过-0.82%。</p>
</li>
<li><p>VaR的估算方法</p>
<table>
<tr>
<td>参数法</td>
<td>又称为方差一协方差法，依据历史数据计算出风险因子收益率分布的参数值，如方差、均值和风险因子间的相关系数等。</td>
</tr>
<tr>
<td>历史模拟法（历史模拟未来）</td>
<td>假设市场未来的变化方向与历史发展状况大致相同，依据风险因子收益的近期历史数据的估算，模拟出未来的风险因子收益变化。</td>
</tr>
<tr>
<td>蒙特卡洛模拟法（银行常用， 复杂但精确）</td>
<td>在估算之前，需要有风险因子的概率分布模型，继而重复模拟风险因子变动的过程。在进行足够数量的模拟后，组合价值的模拟分布将会收敛于组合的真实分布， 求出最后的组合VaR 值。计算量较大，但被认为是最精准贴近的计算VaR 值方法。</td>
<tr>
</table>

</li>
</ol>
<h2 id="预期损失-ES"><a href="#预期损失-ES" class="headerlink" title="预期损失(ES)"></a>预期损失(ES)</h2><p><strong>定义：</strong>在给定时间区间和置信区间内，投资组合损失的期望值。又称为条件风险价值或条件尾部期望或尾部损失。<br>例：在置信水平X下，VaR值在-0.82%的位置，这意味着有的把握保证时间区间T内投资的损失不会大于0.82%。但VaR是一个分位值，不能衡量最左侧区域的风险情况；而ES是最左侧区域所有损失的期望值，也就是在1-X的极端情况发生时损失的平均值。<br><em>注：分位数就是所选数值及小于该数值的所有数值的数量在总数量中的占比</em></p>
<h2 id="压力测试"><a href="#压力测试" class="headerlink" title="压力测试"></a>压力测试</h2><p>1.用以应对可能发生的巨大损失事件。关键是选择压力情景。<br>2.投资管理人可以根据压力测试的结果采取措施，包括调整产品持仓结构、变更投资标的、暂停申赎等，必要时应实施应急预案。监管机构要求基金公司自身要持有一定的风险准备金以应对压力情景。</p>
<h2 id="股票基金的风险管理"><a href="#股票基金的风险管理" class="headerlink" title="股票基金的风险管理"></a>股票基金的风险管理</h2><p><strong>持股集中度：</strong>前十大重仓股投资市值/基金股票投资总市值×100%<br><strong>行业集中度：</strong>前三大行业或前五大行业的行业投资集中度。<br><strong>持股数量</strong><br><strong>风格暴露分析：</strong><br><strong>平均市值：</strong>基金对大盘股、中盘股和小盘股的投资风险暴露情况。<br><strong>判断投资价值型股票还是成长型股票：</strong>① 如果股票基金的平均市盈率、平均市净率小于市场指数的市盈率和市净率，可以认为该股票基金属于价值型基金；② 如果股票基金的平均市盈率、平均市净率大于市场指数的市盈率和市净率，可以认为该股票基金属于成长型基金。<br><strong>基金股票换手率：</strong>(期间股票交易量/2)/期间基金平均资产净值</p>
<h2 id="债券基金的风险管理"><a href="#债券基金的风险管理" class="headerlink" title="债券基金的风险管理"></a>债券基金的风险管理</h2><p><strong>利率风险：</strong>1.债券的价格与市场利率呈反向变动；2.债券基金久期越长，净值随利率的波动幅度就越大，所承担的利率风险就越高。通常用久期乘以利率变化来衡量利率变动对债券基金净值的影响。<br><strong>信用风险(债券、交易对手)、流动性风险、提前赎回风险、再投资风险、可转债的特定风险、债券回购风险。</strong></p>
<h1 id="投资业绩评价"><a href="#投资业绩评价" class="headerlink" title="投资业绩评价"></a>投资业绩评价</h1><h2 id="一、绝对收益"><a href="#一、绝对收益" class="headerlink" title="一、绝对收益"></a>一、绝对收益</h2><p>定义：是指证券或投资组合在一定时间区间内所获得的回报。</p>
<ol>
<li>持有区间收益率<br>资产回报：股票、债券、房地产等资产价格的增加/减少<script type="math/tex; mode=display">\begin{align}资产回报率=\dfrac{期末资产价格-期初资产价格}{起初资产价格}\times{100\%}\end{align}</script>收入回报：分红、利息、租金等。<script type="math/tex; mode=display">收入回报率=\dfrac{期间收入}{起初资产价格}\times{100\%}</script></li>
<li>现金流和时间加权收益率<br>用以因应：基金种包含多个不同的证券，且红利或利息时间不一；基金各时间区间内申赎带来的资金流动。<br>现金流加权：<script type="math/tex">\text{现金流加权平均收益率} = \dfrac{\sum_{i=1}^{n} CF_i \times r_i}{\sum_{i=1}^{n} CF_i}</script><br>时间加权：<script type="math/tex">\text{时间加权平均收益率} = \dfrac{\sum_{i=1}^{n} CF_i \times (1 + r_i)^{\frac{t_i}{T}}}{\sum_{i=1}^{n} CF_i}</script></li>
<li>平均收益率：算术平均收益率和几何平均收益率<br>几何平均收益率：<script type="math/tex">(\sqrt[n]{\prod_{\omega}^{\alpha}(1+R_{t})}-1)\times100\%</script>​</li>
<li>基金收益率的计算：<script type="math/tex; mode=display">期末基金单位资产净值(\text{NAV})=\dfrac{期末基金资产净值}{期末基金单位总份额}</script>假定红利发放后立即对本基金进行再投资，且红利以除息前一日的单位净值为计算基准立即进行再投资，<br><script type="math/tex">\begin{align}R_{0}^{t}&=(1+R_1)(1+R_2)...(1+R_{t})-1\\&=(\frac{\text{NAV}_{1}}{\text{NAV}_{0}}\times\frac{\text{NAV}_{2}}{\text{NAV}_{1}-D_1}...\frac{\text{NAV}_{n}}{\text{NAV}_{n-1}-D_{n-1}})\end{align}</script>​</li>
</ol>
<h2 id="二、相对收益"><a href="#二、相对收益" class="headerlink" title="二、相对收益"></a>二、相对收益</h2><p>定义：相对收益又叫超额收益，代表一定时间区间内，基金收益超出业绩比较基准的部分。</p>
<ol>
<li>算术法：<script type="math/tex">R_{超额}=R_{组合}-R_{基准}</script></li>
<li>几何法：<script type="math/tex">R_{超额}=\dfrac{1+R_{组合}}{1+R_{基准}}-1</script></li>
</ol>
<h3 id="三、风险调整后收益"><a href="#三、风险调整后收益" class="headerlink" title="三、风险调整后收益"></a>三、风险调整后收益</h3><h3 id="夏普利率"><a href="#夏普利率" class="headerlink" title="夏普利率"></a>夏普利率</h3><ol>
<li><p>威廉<script type="math/tex">\cdot</script>夏普根据CAPM提出的经风险调整的业绩测度指标<br><script type="math/tex">夏普利率=\dfrac{组合平均收益率 - 平均无风险收益率}{组合标准差}</script>​<br>即：组合的单位风险下的超额收益率</p>
<table>
 <tr>
     <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%A4%8F%E6%99%AE%E5%88%A9%E7%8E%87-%E8%B5%84%E6%9C%AC%E5%B8%82%E5%9C%BA%E7%BA%BF.png" alt="资本市场线" style="zoom:40%;" /></td>
 </tr>
</table>

</li>
</ol>
<h3 id="特雷诺比率"><a href="#特雷诺比率" class="headerlink" title="特雷诺比率"></a>特雷诺比率</h3><ol>
<li>来源于CAPM，表示的是单位系统风险下的超额收益率</li>
<li><p>公式：<script type="math/tex">特雷诺比率=\dfrac{组合平均收益率 - 平均无风险收益率}{\beta_{p}}</script>​</p>
<table>
 <tr>
     <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%89%B9%E9%9B%B7%E8%AF%BA%E6%AF%94%E7%8E%87-%E8%AF%81%E5%88%B8%E5%B8%82%E5%9C%BA%E7%BA%BF.png" alt="证券市场线" style="zoom: 40%;" /></td>
 </tr>
</table>

</li>
</ol>
<h3 id="詹森比率"><a href="#詹森比率" class="headerlink" title="詹森比率"></a>詹森比率</h3><p>定义：衡量的是基金组合收益中超过CAPM模型预测值的那一部分超额收益</p>
<p>公式：$詹森\alpha = (\overline{R_p}-\overline{R_f})-\beta_p \times (\overline{R_m} -\overline{R_f})$</p>
<h3 id="信息比率与跟踪误差"><a href="#信息比率与跟踪误差" class="headerlink" title="信息比率与跟踪误差"></a>信息比率与跟踪误差</h3><ol>
<li>信息比率是单位跟踪误差所对应的超额收益。 </li>
<li>信息比率越大，说明该基金在同样的跟踪误差水平上能获得更大的超额收益，或者在同样的超额收益水平下跟 踪误差更小。</li>
<li><script type="math/tex">信息比率=\dfrac{投资组合收益-业绩比较基准收益}{跟踪误差}=\dfrac{超额收益}{跟踪误差}</script>​</li>
<li>实际操作中一般根据投资范围和投资目标选取基准指数，可以是全市场指数、风格指数，也可以是由不同指数复合而成的复合指数。</li>
<li>跟踪误差是证券组合相对基准组合的跟踪偏离度的标准差：<script type="math/tex">跟踪偏离度=证券组合的真实收益率-基准组合的收益率</script></li>
<li>跟踪误差产生的原因：1.复制误差：某些成分股因流动性不足而难以以公允的价格买入。2.现金留存：投资组合不能全部投资于指数标的。3.各项费用。4.其他影响</li>
</ol>
<h3 id="绝对收益归因"><a href="#绝对收益归因" class="headerlink" title="绝对收益归因"></a>绝对收益归因</h3><ol>
<li>考察各个因素对基金总收益的贡献，其本质是对基金总收益的分解。</li>
<li>在特定区间内，每个证券和每个行业如何贡献到组合的整体收益。</li>
</ol>
<h3 id="相对收益归因"><a href="#相对收益归因" class="headerlink" title="相对收益归因"></a>相对收益归因</h3><p><strong>Brinson模型</strong><br>例：<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%9B%B8%E5%AF%B9%E6%94%B6%E7%9B%8A%E5%BD%92%E5%9B%A01.png" style="zoom:50%;" /><br><strong>【结论】</strong><br><strong>配置效应：</strong>基金中股票、债券和现金权重为70:7:23，它的收益率仅反映了从60:30:10的基准权重转变到70:7:23所引起的收益变化，<br>而不包括基金经理在各个市场中积极选择证券所带来的收益变化。即：资产配置带来的贡献为：<script type="math/tex">(70\%-60\%)\times5.81\%+(7\%-30\%)\times1.45\%+(23\%-10\%)\times0.48\%=0.31\%</script><br><strong>选择效应：</strong><br>如果业绩中有0.31%应归功于各资产类别间的成功配置，那么1.37%-0.31%=1.06%就应该源于在每一个大类资<br>产中的行业及具体证券的选择。选择效应带来的贡献<script type="math/tex">70\%\times(7.28-5.81)+7\%\times(1.89-1.45)=1.06\%</script>​<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%9B%B8%E5%AF%B9%E6%94%B6%E7%9B%8A%E5%BD%92%E5%9B%A02.png" style="zoom:50%;" /></p>
<h3 id="债券投资组合的构建"><a href="#债券投资组合的构建" class="headerlink" title="债券投资组合的构建"></a>债券投资组合的构建</h3><ol>
<li><p>考虑因素：<br>a.同股票相同因素：投资目标和理念、投资策略、投资范围、业绩基准、风险收益；<br>b.个性化因素：信用结构、期限结构、组合久期、流动性和杠杆率</p>
</li>
<li><p>基准选择：以债券指数为主，在投资范围允许的前提下，加入一定比例股票指数形成复合基准。</p>
</li>
</ol>
<h1 id="VaR风险计量及代码"><a href="#VaR风险计量及代码" class="headerlink" title="VaR风险计量及代码"></a>VaR风险计量及代码</h1><p><strong>在一定概率水平 (置信度) 下，某一金融资产或证券组合价值在未来特定时期内的最大可能损失。</strong></p>
<h2 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h2><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>局部估值法</th>
<th>完全估值法</th>
</tr>
</thead>
<tbody>
<tr>
<td>参数方法</td>
<td><strong>方差-协方差法(德尔塔-正态分布法)</strong><br />假定组合回报服从正态分布，利用历史数据计算资产组合收益率的标准差与相应置信度下分位数的乘积。</td>
<td><strong>蒙特卡洛模拟法</strong><br />与历史模拟法计算原理相似，但是数据选择存在差异，即基于随机数模拟得到市场价格变化，而不是来自于历史观察。其基本思路为：假设资产价格的变动依附在某种随机过程形态，利用电脑模拟，在目标时间范围内产生随机价格的途径，并依次构建资产报酬分布，最终计算出VaR值。</td>
</tr>
<tr>
<td>非参数方法</td>
<td></td>
<td><strong>历史模拟法</strong><br />假设市场未来的变化方向与市场的历史发展状况大致相同，根据市场因子的历史样本变化模拟证券组合的未来损益分布，利用分位数给出一定置信度下的VaR估计。</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注：</strong>局部估值——通过仅在资产组合的初始状态进行一次估值，并利用局部要求来推断可能的资产变化而得出风险价值衡量值。完全估值——通过对各种情景下投资组合的重新定价来衡量风险。</p>
<table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%96%B9%E5%B7%AE-%E5%8D%8F%E6%96%B9%E5%B7%AE%E6%B3%95%E7%AE%80%E5%8C%96%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F.png"/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%8E%86%E5%8F%B2%E6%A8%A1%E6%8B%9F%E6%B3%95%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F.png" alt="历史模拟法计算公式" /></td>
    </tr>
</table>

<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ol>
<li><strong>方差-协方差法(分位数、标准差、持有期)：</strong><ol>
<li>投资组合的各风险因子服从联合正态分布</li>
<li>线性假定，持有期内，投资组合的风险暴露与风险因子之间是线性相关的</li>
<li>求解正态分布X~N(u,σ2)曲线下，覆盖面值95%所对应的分位数(Z-Score),把非标准正态分布转换成正太分布(X-u)/σ=1%,解X。</li>
<li><strong>推导：</strong></li>
</ol>
</li>
</ol>
<table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/VaR-Covar%20approach.jpg" /></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/VaR-Covar%20approach2.png"/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/VaR-Covar%20approach3.png"/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/VaR-Covar%20approach4.png" /></td>
    </tr>
</table>


<ol>
<li><strong>历史模拟法：</strong><ol>
<li>为组合中的风险因素安排一个历史的市场变化序列；</li>
<li>计算每一历史市场变化的资产组合的收益变化；</li>
<li>推算出VaR值。</li>
<li><strong>推导：</strong></li>
</ol>
</li>
</ol>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/VaR-Historical%20Simulation%20approach.jpg" /></p>
<h2 id="Var三种计量方法的Python应用"><a href="#Var三种计量方法的Python应用" class="headerlink" title="Var三种计量方法的Python应用"></a>Var三种计量方法的Python应用</h2><h3 id="参数法"><a href="#参数法" class="headerlink" title="参数法"></a>参数法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(adj_close_df)</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置权重和组合收益周期并计算组合收益</span></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)] * <span class="built_in">len</span>(tickers))</span><br><span class="line">historical_returns = (log_returns * weights).<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line">days = <span class="number">5</span></span><br><span class="line">historical_x_day_returns = historical_returns.rolling(window=days).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立协方差矩阵并计算组合标准差</span></span><br><span class="line">cov_matrix = log_returns.cov() * <span class="number">252</span></span><br><span class="line">portfolio_std_dev = np.sqrt(weights.T @ cov_matrix @ weights)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算不同置信区间的VaR并输出</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm</span><br><span class="line">confidence_levels = [<span class="number">0.90</span>, <span class="number">0.95</span>, <span class="number">0.99</span>]</span><br><span class="line">VaRs = []</span><br><span class="line"><span class="keyword">for</span> cl <span class="keyword">in</span> confidence_levels:</span><br><span class="line">    VaR = portfolio_value * (norm.ppf(<span class="number">1</span> - cl) * portfolio_std_dev * np.sqrt(days / <span class="number">252</span>) - historical_returns.mean() * days)</span><br><span class="line">    VaRs.append(VaR)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;<span class="string">&quot;Confidence Level&quot;</span>:&lt;<span class="number">20</span>&#125;</span> <span class="subst">&#123;<span class="string">&quot;Value at Risk&quot;</span>:&lt;<span class="number">20</span>&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">40</span>)</span><br><span class="line"><span class="keyword">for</span> cl, VaR <span class="keyword">in</span> <span class="built_in">zip</span>(confidence_levels, VaRs):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;cl * <span class="number">100</span>:&gt;<span class="number">6.0</span>f&#125;</span>%: <span class="subst">&#123;<span class="string">&quot;&quot;</span>:&lt;<span class="number">8</span>&#125;</span> $<span class="subst">&#123;VaR:&gt;<span class="number">10</span>,<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 绘制组合回报分布图以及VaR分位点</span></span><br><span class="line"><span class="comment"># 根据投资组合价值取得实际回报金额</span></span><br><span class="line">historical_x_day_returns_dollar = historical_x_day_returns * portfolio_value</span><br><span class="line"><span class="comment"># 绘制分布图</span></span><br><span class="line">plt.hist(historical_x_day_returns_dollar, bins=<span class="number">50</span>, density=<span class="literal">True</span>, alpha=<span class="number">0.5</span>, label=<span class="string">f&#x27;<span class="subst">&#123;days&#125;</span>-Day Returns&#x27;</span>)</span><br><span class="line"><span class="comment"># 绘制分位点直线</span></span><br><span class="line"><span class="keyword">for</span> cl, VaR <span class="keyword">in</span> <span class="built_in">zip</span>(confidence_levels, VaRs):</span><br><span class="line">    plt.axvline(x=-VaR, linestyle=<span class="string">&#x27;--&#x27;</span>, color=<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;VaR at &#123;&#125;% Confidence&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">int</span>(cl * <span class="number">100</span>)))</span><br><span class="line">plt.xlabel(<span class="string">f&#x27;<span class="subst">&#123;days&#125;</span>-Day Portfolio Return ($)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio <span class="subst">&#123;days&#125;</span>-Day Returns and Parametric VaR Estimates&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="历史模拟法"><a href="#历史模拟法" class="headerlink" title="历史模拟法"></a>历史模拟法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># %% [markdown]</span></span><br><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置权重及组合收益周期并计算组合收益</span></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)] * <span class="built_in">len</span>(tickers))</span><br><span class="line">historical_returns = (log_returns * weights).<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line">days = <span class="number">50</span></span><br><span class="line">range_returns = historical_returns.rolling(window = days).<span class="built_in">sum</span>()</span><br><span class="line">range_returns = range_returns.dropna()</span><br><span class="line"><span class="built_in">print</span>(range_returns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算VaR并绘制分布表</span></span><br><span class="line">confidence_interval = <span class="number">0.99</span></span><br><span class="line">VaR = -np.percentile(range_returns, <span class="number">100</span> - (confidence_interval * <span class="number">100</span>))*portfolio_value</span><br><span class="line"><span class="built_in">print</span>(VaR)</span><br><span class="line"></span><br><span class="line">return_window = days</span><br><span class="line">range_returns = historical_returns.rolling(window=return_window).<span class="built_in">sum</span>()</span><br><span class="line">range_returns = range_returns.dropna()</span><br><span class="line">range_returns_dollar = range_returns * portfolio_value</span><br><span class="line"></span><br><span class="line">plt.hist(range_returns_dollar.dropna(), bins=<span class="number">50</span>, density=<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">f&#x27;<span class="subst">&#123;return_window&#125;</span>-Day Portfolio Return (Dollar Value)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio <span class="subst">&#123;return_window&#125;</span>-Day Returns (Dollar Value)&#x27;</span>)</span><br><span class="line">plt.axvline(-VaR, color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;dashed&#x27;</span>, linewidth=<span class="number">2</span>, label=<span class="string">f&#x27;VaR at <span class="subst">&#123;confidence_interval:<span class="number">.0</span>%&#125;</span> confidence level&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="蒙特卡洛模拟法"><a href="#蒙特卡洛模拟法" class="headerlink" title="蒙特卡洛模拟法"></a>蒙特卡洛模拟法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置观察时间以及测试标的</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yfinance <span class="keyword">as</span> yf</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line"><span class="comment"># data = yf.download(&quot;JPM&quot;, start=&quot;2023-10-02&quot;, end=&quot;2023-10-31&quot;)</span></span><br><span class="line">years = <span class="number">15</span></span><br><span class="line">endDate = dt.datetime.now()</span><br><span class="line">startDate = endDate - dt.timedelta(days = <span class="number">365</span>*years)</span><br><span class="line">tickers = [<span class="string">&#x27;SPY&#x27;</span>, <span class="string">&#x27;BND&#x27;</span>, <span class="string">&#x27;GLD&#x27;</span>, <span class="string">&#x27;QQQ&#x27;</span>, <span class="string">&#x27;VTI&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据并取对数</span></span><br><span class="line">adj_close_df = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> ticker <span class="keyword">in</span> tickers:</span><br><span class="line">    data = yf.download(ticker, start=startDate, end=endDate)</span><br><span class="line">    adj_close_df[ticker] = data[<span class="string">&#x27;Adj Close&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(adj_close_df)</span><br><span class="line">log_returns = np.log(adj_close_df / adj_close_df.shift(<span class="number">1</span>))</span><br><span class="line">log_returns = log_returns.dropna()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立组合回报和组合标准差方程</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">expected_return</span>(<span class="params">weights, log_returns</span>):</span><br><span class="line">    <span class="keyword">return</span> np.<span class="built_in">sum</span>(log_returns.mean()*weights)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standard_deviation</span> (weights, cov_matrix):</span><br><span class="line">    variance = weights.T @ cov_matrix @ weights</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(variance)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立协方差矩阵，计算组合回报和组合标准差，设置权重</span></span><br><span class="line">cov_matrix = log_returns.cov()</span><br><span class="line"><span class="built_in">print</span>(cov_matrix)</span><br><span class="line"></span><br><span class="line">portfolio_value = <span class="number">1000000</span></span><br><span class="line">weights = np.array([<span class="number">1</span>/<span class="built_in">len</span>(tickers)]*<span class="built_in">len</span>(tickers))</span><br><span class="line">portfolio_expected_return = expected_return(weights, log_returns)</span><br><span class="line">portfolio_std_dev = standard_deviation (weights, cov_matrix)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立蒙特卡洛(Monte Carlo Simulation)方程并执行</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_z_score</span>():</span><br><span class="line">    <span class="keyword">return</span> np.random.normal(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立方程计算模拟组合收益</span></span><br><span class="line">days = <span class="number">20</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">scenario_gain_loss</span>(<span class="params">portfolio_value, portfolio_std_dev, z_score, days</span>):</span><br><span class="line">    <span class="keyword">return</span> portfolio_value * portfolio_expected_return * days + portfolio_value * portfolio_std_dev * z_score * np.sqrt(days)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复10000次模拟</span></span><br><span class="line">simulations = <span class="number">10000</span></span><br><span class="line">scenarioReturn = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(simulations):</span><br><span class="line">    z_score = random_z_score()</span><br><span class="line">    scenarioReturn.append(scenario_gain_loss(portfolio_value, portfolio_std_dev, z_score, days))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置置信区间，计算VaR并绘制分布图</span></span><br><span class="line">confidence_interval = <span class="number">0.99</span></span><br><span class="line">VaR = -np.percentile(scenarioReturn, <span class="number">100</span> * (<span class="number">1</span> - confidence_interval))</span><br><span class="line"><span class="built_in">print</span>(VaR)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制10000次模拟得到的VaR的分布图</span></span><br><span class="line">plt.hist(scenarioReturn, bins=<span class="number">50</span>, density=<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Scenario Gain/Loss ($)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">f&#x27;Distribution of Portfolio Gain/Loss Over <span class="subst">&#123;days&#125;</span> Days&#x27;</span>)</span><br><span class="line">plt.axvline(-VaR, color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;dashed&#x27;</span>, linewidth=<span class="number">2</span>, label=<span class="string">f&#x27;VaR at <span class="subst">&#123;confidence_interval:<span class="number">.0</span>%&#125;</span> confidence level&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h1 id="压力测试与适用VaR"><a href="#压力测试与适用VaR" class="headerlink" title="压力测试与适用VaR"></a>压力测试与适用VaR</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ol>
<li><p><strong>保险公司压力测试分为情景法测试、敏感性测试和反向压力测试三类。</strong></p>
<ol>
<li><strong>情景法测试</strong>评估多种风险因素同时联动变化情景下对公司偿付能力充足率的影响。 </li>
<li><strong>敏感性测试</strong>评估某一特定风险因素的变动对公司偿付能力充足率的影响。 </li>
<li><strong>反向压力测试</strong>针对特定风险因素，反向评估偿付能力充足率不达标时该风险因素的不利变动幅度。</li>
</ol>
</li>
<li><p><strong>压力测试</strong>是传统风险度量(VaR和ES等基于分布的度量方法)的补充，检测公司的被动防御。压力测试着眼于代表极端损失的分布尾部极值部分的计量。</p>
</li>
</ol>
<h2 id="风险因素与损失计量"><a href="#风险因素与损失计量" class="headerlink" title="风险因素与损失计量"></a>风险因素与损失计量</h2><h3 id="市场风险-1"><a href="#市场风险-1" class="headerlink" title="市场风险"></a><strong>市场风险</strong></h3><p>主要来源于投资交易类业务，包括股票投资、债券投资、大宗商品投资、金融衍生品投资等。</p>
<ol>
<li><strong>股票投资：</strong>以股价指数作压力测试因素(以可能出现的最大跌幅进行测试，又因各股均达最大跌幅可能性近似于零，因此转为指数)<br>指数有：上证指数、深证成指、沪深300指数、创业板指、恒生指数。</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>历史模拟法</th>
<th>蒙特拉洛模拟法</th>
<th>极值分析法</th>
</tr>
</thead>
<tbody>
<tr>
<td>根据交易策略选择时间窗口期，一般采用以22个交易日（相当于1个月），作A股压力测试的时间窗口，基于历史数据以22个连续交易日为时间窗口进行不断“切片”，将切出的最大跌幅作为参数。</td>
<td>基于历史数据，通过蒙特卡洛模拟方法模拟市场未来走势，取未来走势的最大跌幅作为参数。</td>
<td>是一种研究随机变量尾部分布的参数模型，具有向样本外扩展的能力，揭示出历史上尚未发生过的情形，因此极值分析法是一种强有力的压力测试研究工具。</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><strong>债券投资：</strong>以利率波动作压力测试因素(为剔除信用风险因素的影响，以国债利率作为研究对象，结合公司利率债久期结构，确定国债到期收益率品种，如公司债券平均久期为2年，则主要测试中证国债2年到期收益率变动情况。)<br><strong>测试方法：</strong>采用中证国债2年到期收益率在一段时间内连续22个交易日的波动情况及对应的价格波动情况，采用最大波动幅度作为参数值。</li>
<li><strong>期货投资：</strong>以净头寸的相反方向作测试因素(若净头寸为多头，则以期货价格大幅下跌作压力测试；反之，则以期货价格大幅上升作压力测试。)。<br><strong>测试方法：</strong>历史模拟法，如：以沪深300指数推出以来的数据作为样本数据，假设交易策略的时间窗口为22个连续交易日，取2002年以来沪深300指数连续22个交易日的最大跌幅作为极端跌幅值，取最大涨幅值作为极端涨幅值。</li>
<li><strong>与权益市场相关的其他法人产品：</strong>以基金、资管产品净值跌幅以及基金产品份额赎回率作为风险因子。<br><strong>测试方法：</strong>采用历史模拟法，以市场上相似产品的历史数据为基础，通过获取产品连续22个交易日（根据交易策略进行设定）的最大跌幅作为极端跌幅值。</li>
</ol>
<h3 id="信用风险-1"><a href="#信用风险-1" class="headerlink" title="信用风险"></a>信用风险</h3><p>涉及公司持有的企业债、公司债等信用债、证券公司的信用类业务(融资融券业务、股票质押业务)</p>
<ol>
<li><strong>测试价格极端跌幅的常用方法：</strong></li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>历史模拟法</th>
<th>Wilson模型法</th>
</tr>
</thead>
<tbody>
<tr>
<td>以企业债的历史收益率曲线为基础，统计历史上各级别企业债信用利差的最大上升值作为压力测试参数值。鉴于国内企业债大部分为AAA级和AA+级别，出于谨慎性，也可利用美国企业债信用利差的历史数据来作为参考。</td>
<td>采用Wilson模型直接建立从压力指标到PD和风险加权资产（RWA）的映射关系。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="流动性风险-1"><a href="#流动性风险-1" class="headerlink" title="流动性风险"></a>流动性风险</h3><p>流动性风险与市场风险、信用风险等其他各种风险密切相关。当测试对象因市场风险、信用风险而面临资产发生重大损失或负债意外增加时，很可能进一步面临流动性风险。可以认为流动性风险是公司总体风险状况的具体表现。但为明确分类和避免重复，流动性风险因素应指非其它风险因素引起的现金短缺。</p>
<h3 id="损失计量"><a href="#损失计量" class="headerlink" title="损失计量"></a>损失计量</h3><ol>
<li><strong>股指下跌：</strong><script type="math/tex">损失风险=股票规模\times{r}\times{\beta}</script>  (r为股价指数压力测试幅度，β为敏感性系数)</li>
<li><strong>利率上升：</strong><script type="math/tex">损失风险=债券投资规模\times{(D\times{\Delta{r}+\frac{1}{2}\times{C}\times{\Delta{r^2}}})}</script><br>(<script type="math/tex">{\Delta{r}}</script>为相应期限的压力测试幅度，D为债券久期，C为凸度)</li>
<li><strong>期货价格波动：</strong><script type="math/tex">损失风险=期货净头寸\times{\Delta{r}}</script>  (<script type="math/tex">{\Delta{r}}</script>为相应的股指期货价格压力测试幅度)</li>
<li><strong>信用损失风险：</strong><script type="math/tex">损失风险=债券规模\times{P(1-P_1\times\Delta{r_1}\times{\Delta{r_2}})}</script><br>(P为违约率压力参数，<script type="math/tex">{\Delta{r_1}}</script>为股指压力参数变动，<script type="math/tex">{\Delta{r_2}}</script>为利率压力参数变动)</li>
</ol>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>理论杂货</category>
      </categories>
      <tags>
        <tag>投资业绩评价及风险管理</tag>
      </tags>
  </entry>
  <entry>
    <title>本币交易梳理01--业务与规则</title>
    <url>/post/35581/</url>
    <content><![CDATA[<h2 id="一、银行间本币市场概述"><a href="#一、银行间本币市场概述" class="headerlink" title="一、银行间本币市场概述"></a>一、银行间本币市场概述</h2><h3 id="1-1-交易品种："><a href="#1-1-交易品种：" class="headerlink" title="1.1 交易品种："></a>1.1 交易品种：</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">货币市场</th>
<th>债券市场</th>
<th>衍生品市场</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">信用拆借（同业拆借）</td>
<td>现券买卖（含ABS）</td>
<td>债券远期</td>
</tr>
<tr>
<td style="text-align:left">回购</td>
<td>债券借贷</td>
<td>利率互换</td>
</tr>
<tr>
<td style="text-align:left"><font color=red>同业存单（及以下交易同债券）</font></td>
<td>预发行（路演）</td>
<td>标准利率互换</td>
</tr>
<tr>
<td style="text-align:left"><font color=red>标准化票据</font></td>
<td>广义包括回购和债券远期</td>
<td>标准债券远期</td>
</tr>
<tr>
<td style="text-align:left"><font color=red>证券公司短期融资券</font></td>
<td></td>
<td>信用风险缓释工具</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td>信用风险互换</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p><strong>货币市场：</strong>信用拆借（同业拆借）、回购、同业存单、标准化票据、证券公司短期融资券</p>
</li>
<li><p><strong>债券市场：</strong><a href="#现券买卖包含内容">现券买卖（含ABS）</a>、债券借贷、预发行（路演），广义还包括回购和债券远期</p>
</li>
<li><p><strong>衍生品市场：</strong></p>
<ul>
<li><strong>利率衍生品：</strong><ul>
<li>债券远期、利率互换</li>
<li>标准债券远期、标准利率互换、远期利率<font color=red>协议</font>、利率期权；</li>
</ul>
</li>
<li><strong>信用衍生品：</strong><ul>
<li>信用风险缓释工具：信用风险缓释合约、</li>
<li>信用风险互换</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-市场组织："><a href="#1-2-市场组织：" class="headerlink" title="1.2 市场组织："></a>1.2 市场组织：</h3><ul>
<li>中国人民银行（<a href="http://www.pbc.gov.cn/zhengcehuobisi/125207/125213/125431/125475/index.html">人行-PBOC</a>）:银行间市场监管机构</li>
<li>银行间交易商协会（<a href="https://www.nafmii.org.cn/">NAFMII</a>）：银行间市场自律组织</li>
<li><p><span style="color: red;">中国外汇交易中心/全国银行间同业拆借中心/中国货币网</span> （<a href="https://www.chinamoney.com.cn/chinese/bkshibor/">CFETS</a>）：<span style="color: red;">提供交易平台及交易后处理、信息、基准、监测等</span></p>
</li>
<li><p>中央国债登记结算公司/国债公司（<a href="https://www.chinabond.com.cn/zzsj/">中债登-CCDC</a>）：债券托管结算</p>
</li>
<li>银行间市场清算所股份有限公司（<a href="https://www.shclearing.com.cn/cpgz/zqjqysp/jj/">上清所-SHCH</a>）：债券托管结算及中央对手方结算（CCP）</li>
<li><font color=grey>人行清算总中心、商业银行：资金清算</font></li>
<li><font color=grey>交易成员：金融机构、部分非金及</font><font color=red>法人产品</font>

</li>
</ul>
<h3 id="1-3-交易成员结构："><a href="#1-3-交易成员结构：" class="headerlink" title="1.3 交易成员结构："></a>1.3 交易成员结构：</h3><ul>
<li><strong>存款类机构：</strong>政策行、境内商业银行、农商行、农信社</li>
<li>非存款类机构：证券、基金、保险、资管、期货、信托、金租类、财务</li>
<li><strong>非法人机构：</strong><ul>
<li>机构：中资商行一级分行、外资行境内分行</li>
<li>产品：基金、企业年金、保险及信托产品、证券资管、基金专户、银行理财、期货资管</li>
</ul>
</li>
<li><strong>境外机构：</strong>境外央行、境外法人（非法人）机构投资者</li>
</ul>
<h3 id="1-4-交易方式："><a href="#1-4-交易方式：" class="headerlink" title="1.4 交易方式："></a>1.4 交易方式：</h3><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E6%96%B9%E5%BC%8F.png" alt="交易方式" style="zoom:80%;" /></p>
<ul>
<li><strong>询价、做市报价、指示性报价、请求报价、匿名点击</strong><ul>
<li>请求报价<font color=red>仅</font>：质押回购、现券买卖、利率互换</li>
<li><font color=red>仅</font>现券买卖（含同业存单、资产支持证券）：无限制 #<span id="现券买卖包含内容">交易品种 </span> </li>
<li>标准化衍生品<font color=red>仅</font>使用匿名点击（X-Swap）</li>
<li>匿名点击不具名、要求高、助流通；信用拆借无抵押-仅询价</li>
</ul>
</li>
<li><strong>询价交易：</strong>1、对话报价（本方报价$\rightarrow$对手方确认成交）；2、资金意向转对话（发送/查看资金意向$\rightarrow$将意向报价转为对话报价$\rightarrow$双方确认成交）<h2 id="二、银行间货币市场"><a href="#二、银行间货币市场" class="headerlink" title="二、银行间货币市场"></a>二、银行间货币市场</h2></li>
</ul>
<h3 id="2-1-同业拆借市场"><a href="#2-1-同业拆借市场" class="headerlink" title="2.1 同业拆借市场"></a>2.1 同业拆借市场</h3><ul>
<li><strong>参与主体：</strong>《<a href="http://www.pbc.gov.cn/jinrongshichangsi/147160/147171/147355/147383/2894391/index.html">同业拆借管理办法</a>》（*央行07年三号令）中的16类金融机构（所有银行类金融机构和绝大部分非银金融机构）、央行认定的境外人民币清算行</li>
<li><strong>主要功能：</strong>各类金融机构融通短期资金，进行主动资产负债管理</li>
<li><strong>交易平台：</strong>同业拆借中心本币交易系统</li>
<li><strong>交易要素：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%90%8C%E4%B8%9A%E6%8B%86%E5%80%9F%E8%A6%81%E7%B4%A0" alt="同业拆借要素"></p>
<h3 id="2-2-回购市场"><a href="#2-2-回购市场" class="headerlink" title="2.2 回购市场"></a>2.2 回购市场</h3><ul>
<li><strong>参与主体：</strong>各类金融机构和非法人投资者；境外央行、国际金融组织、主权财富组织、境外清算行、境外参加行</li>
<li><strong>回购券种：</strong>银行间债券市场的各类券种（包括外币债、SDR计价债券）；*-非公开定向发行债务融资工具（PPN）和资产支持证券仅支持质押式回购；（质押券必须为银行间市场发行，且可流通）<ul>
<li>2015年5月9日起，投资者可以自己发行的债券为标的资产进行债券回购交易（需进行信息披露，并符合比例要求）</li>
</ul>
</li>
<li><strong>交易平台：</strong>同业拆借中心本币交易系统</li>
<li><strong>交易要素：</strong><br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A8%E6%8A%BC%E5%BC%8F%E5%9B%9E%E8%B4%AD%E8%A6%81%E7%B4%A0" alt="质押式回购要素"></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B9%B0%E6%96%AD%E5%BC%8F%E5%8D%95%E5%88%B8-%E5%A4%9A%E5%88%B8" alt="买断式单券-多券"></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B9%B0%E6%96%AD%E5%BC%8F%E5%9B%9E%E8%B4%AD-%E5%8D%95%E5%88%B8" alt="买断式回购-单券"></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B9%B0%E6%96%AD%E5%BC%8F%E5%9B%9E%E8%B4%AD-%E5%A4%9A%E5%88%B8" alt="买断式回购-多券"></p>
<h2 id="三、银行间债券市场"><a href="#三、银行间债券市场" class="headerlink" title="三、银行间债券市场"></a>三、银行间债券市场</h2><h3 id="3-1-现券市场"><a href="#3-1-现券市场" class="headerlink" title="3.1 现券市场"></a>3.1 现券市场</h3><font color = red>我国债券市场现状：银行间市场为主，交易所市场为辅，商业银行柜台市场为补充  </font>

<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E9%93%B6%E8%A1%8C%E9%97%B4%E5%80%BA%E5%88%B8%E5%B8%82%E5%9C%BAvs%E4%BA%A4%E6%98%93%E6%89%80%E5%80%BA%E5%88%B8%E5%B8%82%E5%9C%BA" alt="银行间债券市场vs交易所债券市场"></p>
<ul>
<li><strong>银行间债券市场结构：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E9%93%B6%E8%A1%8C%E9%97%B4%E5%80%BA%E5%88%B8%E5%B8%82%E5%9C%BA%E7%BB%93%E6%9E%84" alt="银行间债券市场结构" style="zoom: 67%;" /></p>
<p>做市商制度是<font color = red>场外债券市场</font>有效运行的重要基础性制度：（截止2023年底：<a href="https://www.chinamoney.com.cn/chinese/mtmemrmb/">92家做市商</a>）<br>​    * 提高流动性、促进价格发行、稳定市场、规范市场、降低发行人筹资成本</p>
<ul>
<li><strong>参与主体：</strong>合格机构投资者（<a href="http://www.pbc.gov.cn/tiaofasi/144941/144959/3058889/index.html">中国人民银行公告【2016】 第8号</a>）  </li>
<li><font color = red>主体范围：债券市场>回购市场＞同业拆借市场</font></li>
<li><strong>交易平台：</strong>同业拆借中心本币交易系统</li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E5%93%81%E7%A7%8D" alt="债券品种"></p>
<ul>
<li><strong>现券买卖交易要素：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E5%88%B8%E4%B9%B0%E5%8D%96%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="现券买卖交易要素"></p>
<h3 id="3-2-债券借贷市场"><a href="#3-2-债券借贷市场" class="headerlink" title="3.2 债券借贷市场"></a>3.2 债券借贷市场</h3><ul>
<li><strong>市场功能：</strong><ul>
<li>以信用债融利率债，提高抵押品质量；出售融入债券，提供有效的做空手段；</li>
<li>提升市场流动性，满足临时结算需求；融出方盘活债券存量，提高投资收益<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E5%80%9F%E8%B4%B7%E5%B8%82%E5%9C%BA%E8%A6%81%E7%B4%A0" alt="债券借贷要素"></li>
</ul>
</li>
</ul>
<h3 id="3-3-债券预发行"><a href="#3-3-债券预发行" class="headerlink" title="3.3 债券预发行"></a>3.3 债券预发行</h3><ul>
<li><strong>定义：</strong>全国银行间债券市场投资者以即将发行的债券为标的进行的债券买卖行为，通过全国银行间同业拆借中心交易系统进行。  </li>
<li><strong>参与主体：</strong>全国银行间债券市场成员</li>
<li><p><strong>交易要素：</strong><br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E9%A2%84%E5%8F%91%E8%A1%8C%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="债券预发行交易要素"></p>
</li>
<li><p><strong>市场功能：</strong></p>
<ul>
<li>发行人：提高发行定价的透明度和竞争性，降低发行成本</li>
<li>承销商：发行价格发现，部分分销及一级半需求，交易获利</li>
<li>普通投资者：交易获利，间接参与一级市场  </li>
</ul>
</li>
</ul>
<h3 id="3-4-国债做市支持操作"><a href="#3-4-国债做市支持操作" class="headerlink" title="3.4 国债做市支持操作"></a>3.4 国债做市支持操作</h3><ul>
<li><strong>定义</strong>：财政部在全国银行间债券市场运用<font color = red><strong>随买、随卖</strong></font>等工具，支持银行间债券市场做市商对新近发行的关键期限国债做市的市场行为。（二级市场竞价买卖国债）</li>
<li><strong>做市支持对象：</strong> 银行间债券市场做市商中的<font color =red><strong>记账式国债</strong></font>甲类承销团成员</li>
<li><strong>做市支持券种：</strong> <font color =red><strong>新发关键期限国债</strong></font></li>
<li><strong>竞价机制：</strong> 单一价格形成机制  </li>
</ul>
<h3 id="3-5-政策性金融债做市支持操作"><a href="#3-5-政策性金融债做市支持操作" class="headerlink" title="3.5 政策性金融债做市支持操作"></a>3.5 政策性金融债做市支持操作</h3><ul>
<li><p><strong>定义</strong>：<font color =red ><strong>国开行、进出口行、农发行</strong></font>等发起人在全国银行间债券市场运用<font color = red><strong>随买、随卖</strong></font>等工具，进行<font color = red><strong>本行</strong></font>人民币金融债券（国开债、口行债、农发债）做市支持操作服务做市业务开展。（二级市场竞价赎回卖出）</p>
</li>
<li><p><strong>做市支持对象：</strong> 银行间债券市场做市商中的相应政策性金融债承销团成员</p>
</li>
<li><strong>做市支持券种：</strong> 已在银行间债券市场上市流通的相应政策性金融债</li>
<li><strong>竞价机制：</strong> 单一价格形成机制</li>
<li><strong>结算方式：</strong> 券款对付；见券付款/见款付券  </li>
</ul>
<h3 id="3-6-债券一级发行及承分销"><a href="#3-6-债券一级发行及承分销" class="headerlink" title="3.6 债券一级发行及承分销"></a>3.6 债券一级发行及承分销</h3><ul>
<li><strong>债券一级发行业务：</strong> 支持<font color = red><strong>通过本币交易系统</strong></font>发行证券公司短期融资券、金融债券、标准化票据等银行间各类债券，提供簿记建档、报价发行、招标发行等发行方式，并提供统一的缴款凭据。  </li>
<li><strong>债券承分销服务：</strong> 支持承销商<font color =red><strong>通过iDeal工作台</strong></font>为各类债券提供承分销服务，包含路演、投标、协商、分销等环节，并提供标准化的分销凭证。  </li>
</ul>
<h2 id="四、银行间衍生品市场"><a href="#四、银行间衍生品市场" class="headerlink" title="四、银行间衍生品市场"></a>四、银行间衍生品市场</h2><ul>
<li><strong>市场结构：</strong></li>
</ul>
<p>​    <strong>非做市商金融机构$\longleftrightarrow$【全国银行间同业拆借中心$\longleftrightarrow$做市商（包括结算代理机构）】$\longleftrightarrow$非金融机构客户</strong></p>
<p>​    <strong><em>非做市商金融机构只能出于自身需求进行交易；非金融机构只能与做市商进行以套期保值为目的的交易</em></strong></p>
<ul>
<li><strong>交易品种:</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%A1%8D%E7%94%9F%E5%93%81%E4%BA%A4%E6%98%93%E5%93%81%E7%A7%8D" alt="衍生品交易品种"></p>
<h3 id="4-1-利率互换"><a href="#4-1-利率互换" class="headerlink" title="4.1 利率互换"></a>4.1 利率互换</h3><ul>
<li><p><strong><font color =red>信用拆借和回购仅为下一营业日准则，即当支付日为非营业日，需要调整至下一个营业日。</font>而利率互换的“经调整的下一营业日”表示按照下一营业日进行调整时，若下一营业日跨月，则采用上一营业日准则。</strong></p>
</li>
<li><p><strong>合约签订时已约定固定利率以及参考利率。浮动利率取决于参考利率，ShiborO/N一般使用单天价格为参考利率，其他参考利率使用起息日前一天的价格作为参考利率。</strong></p>
</li>
<li><strong>固定利率的计息基准一般为实际/360，浮动利率基准为Shibor的一般为实际/360，浮动利率基准为回购定盘利率为实际/365。不过也可以双方约定。</strong></li>
<li><strong>合约期限：起息日至到期日的实际天数；支付频率、重置频率</strong></li>
<li><strong>交易要素：Shibor3M_1Y 表示：合约期限1年，参考利率为Shibor3M。若价格为2.8%，表示收取浮动利率Shibor3M，支付固定利率2.8%。</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="利率互换交易要素"></p>
<p><strong>利率确定日为起息日前一天的参考利率价格确定基准利率</strong>；</p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0%E5%9B%BE%E7%A4%BA" alt="利率互换交易要素图示" style="zoom:80%;" /></p>
<h3 id="4-2-债券远期"><a href="#4-2-债券远期" class="headerlink" title="4.2 债券远期"></a>4.2 债券远期</h3><ul>
<li><strong>交易要素：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E8%BF%9C%E6%9C%9F%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="债券远期交易要素"></p>
<h3 id="4-3-远期利率协议："><a href="#4-3-远期利率协议：" class="headerlink" title="4.3 远期利率协议："></a>4.3 远期利率协议：</h3><ul>
<li><strong>交易要素：（近似于单次支付频率的利率互换）</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%BF%9C%E6%9C%9F%E5%88%A9%E7%8E%87%E5%8D%8F%E8%AE%AE%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="远期利率协议交易要素"></p>
<p><strong>支付日即支付合约价格，即开始计息，并将未来利息折现到支付日进行支付，因为远期利率相当于只有一笔现金流的利率互换，期初支付更为方便</strong></p>
<font color =red>**期限采用“远期期限 $\times$（远期期限+合约期限）”，如：Shibor3M_3M*9M 表示三个月后按照参考利率Shibor3M在支付日/起息日前一日的价格作为基准利率，并于到期日给付6个月的利息。**</font>

<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%BF%9C%E6%9C%9F%E5%88%A9%E7%8E%87%E5%8D%8F%E8%AE%AE%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0-%E5%9B%BE%E7%A4%BA" alt="远期利率协议交易要素-图示" style="zoom:80%;" /></p>
<h3 id="4-4-标准利率互换和标准债券远期"><a href="#4-4-标准利率互换和标准债券远期" class="headerlink" title="4.4 标准利率互换和标准债券远期"></a>4.4 标准利率互换和标准债券远期</h3><p><strong>标准利率互换</strong>是到期日、期限等要素标准化的IRS合约<br><strong>标准债券远期</strong>是在银行间市场交易的，标的债券、交割日等产品要素标准化的债券远期合约  </p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%A0%87%E5%87%86%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E5%92%8C%E6%A0%87%E5%87%86%E5%80%BA%E5%88%B8%E8%BF%9C%E6%9C%9F" alt="标准利率互换和标准债券远期"></p>
<h3 id="4-5-利率期权："><a href="#4-5-利率期权：" class="headerlink" title="4.5 利率期权："></a>4.5 利率期权：</h3><h4 id="4-5-1-利率互换期权"><a href="#4-5-1-利率互换期权" class="headerlink" title="4.5.1 利率互换期权"></a>4.5.1 利率互换期权</h4><ul>
<li><p><strong>定义：</strong>期权标的为利率互换合约；行权后生成一笔利率互换交易。  </p>
</li>
<li><p><strong>交易要素：</strong></p>
</li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0" alt="利率互换期权交易要素"></p>
<h4 id="4-5-2-利率上下限期权"><a href="#4-5-2-利率上下限期权" class="headerlink" title="4.5.2 利率上下限期权"></a>4.5.2 利率上下限期权</h4><ul>
<li><strong>定义：</strong>期权期限内，期权卖方按照支付频率向期权买方支付超出上限/下限部分利息。  </li>
<li><strong>交易要素：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%B8%8A%E4%B8%8B%E9%99%90%E6%9C%9F%E6%9D%83" alt="利率上下限期权"></p>
<h3 id="4-6-信用风险缓释工具"><a href="#4-6-信用风险缓释工具" class="headerlink" title="4.6 信用风险缓释工具"></a>4.6 信用风险缓释工具</h3><ul>
<li><strong>信用违约互换(CDS)：</strong>合约类产品； 盯住单一/多个参考实体； </li>
<li><strong>CDS指数</strong>以一篮子参考实体为交易标的</li>
<li><strong>信用风险缓释合约(CRMA)：</strong>合约类产品；盯住参考债务  </li>
<li><strong>信用联结票据(CLN)/信用风险缓释凭证(CRMW)：</strong> 均为凭证类产品， 交易中心提供二级交易服务。 CLN发行人为信用保护买方， 盯住参考实体；CRMW发行人为信用保护卖方， 盯住参考债务。</li>
</ul>
<h2 id="五、利率定价-定盘利率"><a href="#五、利率定价-定盘利率" class="headerlink" title="五、利率定价|定盘利率"></a>五、利率定价|定盘利率</h2><h3 id="5-1-利率定价影响因素和参考价格"><a href="#5-1-利率定价影响因素和参考价格" class="headerlink" title="5.1 利率定价影响因素和参考价格"></a>5.1 利率定价影响因素和参考价格</h3><ul>
<li><strong>利率定价影响因素：</strong></li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E5%AE%9A%E4%BB%B7%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0" alt="利率定价影响因素"></p>
<ul>
<li><h4 id="定价参考："><a href="#定价参考：" class="headerlink" title="定价参考："></a><strong>定价参考：</strong></h4><ul>
<li><p><strong>回购定盘利率：</strong></p>
<ul>
<li><strong>定义：</strong>以银行间市场每天上午9:00-11:30间的回购交易利率为基础同时借鉴国际经验编制而成的利率基准参考指标</li>
<li><strong>发布时间：</strong>11：30</li>
<li><strong><font color =red>编制方法：</font></strong><br>➢ 以隔夜回购（R001）、七天回购（R007）、 14天回购（R014）交易在<font color =red><strong>每个交易日上午9:00-</strong><br><strong>11:30之间</strong></font>（包括9:00和11:30）的全部成交利率为计算基础。特别地，交易对手相同(交易方向相同或相反)且交易利率相同的交易只作为一笔交易纳入样本。<br>➢ 分别对隔夜回购、七天回购、 14天回购利率进行排序，记从小到大排序之后的最大序号为N,则[N/2]（取整） +1位置上的那个利率即为当日的定盘利率。<font color = red><strong>即中位数</strong></font><br>➢ <font color =red><strong>隔夜、七天、 14天回购定盘利率分别以FR001、 FR007、 FR014进行标识。</strong></font>  </li>
</ul>
</li>
<li><p><strong>债券收益率曲线：</strong></p>
<ul>
<li><p><strong>实时收益率曲线：</strong><br>➢ 数据来源：实时报价 &gt; 当日报价 &gt; 货币经纪报价 &gt; 历史报价<br>➢ 发布时间： 9:30 发布首条曲线，实时逐笔更新至收盘<br>➢ 曲线类型：到期收益率曲线</p>
</li>
<li><p><strong>收盘收益率曲线：</strong><br>➢ 数据来源：<font color=red>双边报价和成交数据</font><br>➢ 发布时间：17:15<br>➢ 曲线类型：到期收益率、即期利率和远期利率曲线</p>
</li>
<li><strong>主要应用：</strong> 异常交易监测、交易参考、债券估值  </li>
</ul>
</li>
<li><p><strong>利率互换定盘/收盘曲线：</strong>  </p>
<ul>
<li>报价机构：利率互换曲线报价机构</li>
<li>数据样本：<font color =red>X-Swap报价</font>（报价量不小于2000万人民币）</li>
<li>报价时间窗口：<font color =red >定盘曲线11:45-12:00；收盘曲线16:15-16:30</font></li>
<li>发布时间：<font color =red>定盘曲线12:10， 收盘曲线16:40</font></li>
<li>发布途径：<br>➢ <strong>Shibor、<a href="https://www.chinamoney.com.cn/chinese/bkfrr/">FR、FDR</a>曲线：</strong>中国货币网<br>➢ <strong>LPR曲线：</strong>中国货币网、市场数据发布系统（CMDS）、市场数据报表系统（CMDR）</li>
<li>曲线应用：<br>➢ 用于机构内部对未到期合约进行盯市<br>➢ 在利率互换冲销中用于对冲销合约进行估值<br>➢ 在本币交易系统中作为利率互换定价参考依据 </li>
<li>曲线种类：<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E5%AE%9A%E7%9B%98%2F%E6%94%B6%E7%9B%98%E6%9B%B2%E7%BA%BF-%E7%A7%8D%E7%B1%BB" alt="利率互换定盘/收盘曲线-种类"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="六、固定收益交易策略"><a href="#六、固定收益交易策略" class="headerlink" title="六、固定收益交易策略"></a>六、固定收益交易策略</h2><p><strong><a href="https://mp.weixin.qq.com/s/hS0Rl6cE2Wc7Quq3mx0HcA">交易策略案例</a></strong> <strong><a href="https://mp.weixin.qq.com/s?__biz=MzA5Mjk3MjExMw==&amp;mid=2650299123&amp;idx=1&amp;sn=97d9fc7bd96b116c8c4c15c874380c4c&amp;scene=21#wechat_redirect">利率互换的Carry和Roll</a></strong></p>
<h4 id="6-1-策略方向："><a href="#6-1-策略方向：" class="headerlink" title="6.1 策略方向："></a>6.1 <strong>策略方向：</strong></h4><ul>
<li><strong>战略性方向：</strong>利率总体走势；基本面分析（宏观经济形势、货币政策、宏观流动性）；未来半年到一年；趋势性交易  </li>
<li><strong>战术性方向：</strong>不同资产走势；策略分析（收益率曲线变动、资产类型配置、资金面季节性变动）；一季度到半年的阶段性方向；波段性交易</li>
<li><strong>投机性方向：</strong>个券标的选择；日间或短期分析（突发性事件对短期市场的临时性冲击）；短期套利交易  </li>
</ul>
<h4 id="6-2-利差套利交易（Carry-Trade-“Carry即净票息收益”"><a href="#6-2-利差套利交易（Carry-Trade-“Carry即净票息收益”" class="headerlink" title="6.2 利差套利交易（Carry Trade|“Carry即净票息收益”)"></a>6.2 <strong>利差套利交易（Carry Trade|“Carry即净票息收益”)</strong></h4><ul>
<li><strong>分类：</strong><br>➢<strong>融资杠杆策略：</strong>借入低利率资金，投资于高利率/高报酬的资产，以赚取利差<br>➢<strong>跨市场策略（锁定收益）：</strong><font color=red>货币市场</font>的融资杠杆策略 + <font color =red>衍生品市场</font>的套利保值，以避免短期资金成本升高。如：以R007-2.3%融入，购买3.8%的10年国开债，再购买FR007_1Y=2.8%利率互换收取浮动利率，<font color =red>由于回购定盘利率FR007收益为单日成交价格中位数，所以与R007成本抵消。</font>故最终成本为2.8%，收益为3.8%，实现100BP无风险收益。</li>
<li><strong>风险：</strong><br>➢短期利率大幅上升<br>➢可通过利率衍生品对冲风险，锁定收益</li>
<li><strong>其他考虑因素</strong><br>➢Carry VS Capital Gain（资本利得）</li>
</ul>
<h4 id="6-3-Carry-amp-Capital-Gain：骑乘策略"><a href="#6-3-Carry-amp-Capital-Gain：骑乘策略" class="headerlink" title="6.3 Carry &amp; Capital Gain：骑乘策略  "></a>6.3 <strong>Carry &amp; Capital Gain：骑乘策略  </strong></h4><ul>
<li><strong>前提：</strong> 收益率曲线向上倾斜且预期持有期内形态稳定，<font color =red>即到期收益率与期限成正比。</font></li>
<li><strong>基本操作：</strong> 购入长期限债券，在债券到期前平仓退出。如：以R007-2%滚动融入，购买5年期国开债-4%，获得净票息（Carry）2%。一年后，剩余期限4年，收益率下降-3.5%，净价上升，平仓退出后，获得（Capital Gain）[4%-3.5%]*4 = 2%</li>
<li><strong>风险：</strong> 持有期内收益率曲线大幅上移  </li>
</ul>
<h4 id="6-4-期差交易（Spread-Trade"><a href="#6-4-期差交易（Spread-Trade" class="headerlink" title="6.4 期差交易（Spread Trade)"></a>6.4 <strong>期差交易（Spread Trade)</strong></h4><ul>
<li><strong>原理：</strong>（如：现券期差交易、利率互换期差交易）<br>➢ 利用收益率曲线形态的预期变化进行交易，<font color =red>即长端、短端变化幅度不同，通过不同期限之间的利差扩大以及长端、短端债券资本利得套利。</font><br>➢ 本质是交易不同期限利率之间的利差。<br>➢ 总的PV01通常维持在零  </li>
<li><strong>具体操作：</strong><br>➢<strong>陡峭策略（BUY Spread）：</strong><font color =red><strong>预期经济增长，</strong></font>预期收益率曲线变陡，长短端期差走宽，<font color =red><strong>卖长买短。</strong></font><br>$\rightarrow$<font color=seanavy><strong>牛陡：</strong>预期央行降息促经济，或是投资者大量购买短期债券保值，短期债券价格上升，收益率降低。</font><br>$\rightarrow$<font color =green&blue><strong>熊陡：</strong>预期央行未来加息抗未来通胀，造成长端债券被卖空或是抛售，造成长期债券价格下跌，收益率上涨。</font><br>➢<strong>平缓策略（SELL Spread）：</strong><font color =red><strong>预期经济下行，</strong></font>预期收益率曲线变平坦，长短端期差收窄，<font color =red><strong>卖短买长。</strong></font><br>$\rightarrow$<font color=seanavy><strong>牛平：</strong>预期未来通膨缓解/利率周期见顶（即预期央行未来降息，债券价格上涨）。市场做多长端债券，获得更多Capital Gain，致长期债券价格上升，收益率降低。</font><br>$\rightarrow$<font color =green&blue><strong>熊平：</strong>央行加息抗通膨初期，短期债券被抛售，债券价格下降，收益率上升。</font><br>➢<strong>正蝶式策略：</strong>预期收益率曲线变下凸，买中间卖两边<br>➢<strong>反蝶式策略：</strong>预期收益率曲线变上凸，买两边卖中间</li>
<li><font  color =red>Bear：预期央行加息，债券价格下降，收益率上升。Bull：预期央行降息，债券价格上升，收益率下降。</font></li>
<li><font color =red>短端利率受到货币政策影响，影响流动性；长端利率受到经济基本面影响，如通膨率、投资供需、经济增长速度等。**长端利率的变化由央行货币政策在长端的作用效果决定**</font></li>
<li><font color =red>经济下行或是进入衰退时，央行的加息会导致平缓收益率，甚至利率倒挂</font> <a href="https://www.citriniresearch.com/p/global-macro-trading-for-idiots">Reference</a> | <a href="https://www.msci.com/www/blog-posts/factors-in-focus-are-your/02933279202">MSCI Model</a></li>
<li><font color =red><strong>投资组合符合DV01对冲；</strong></font>Front leg | Back Leg | Steepener |Flattener</li>
</ul>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/Spread%20Trade.png" alt="Spread Trade"></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/Spread%20Trade2.png" alt="Spread Trade2"></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/U.S.Yield%20Curve.png" alt="U.S.Yield Curve"></p>
<h4 id="6-5-现券期差交易"><a href="#6-5-现券期差交易" class="headerlink" title="6.5 现券期差交易"></a>6.5 <strong>现券期差交易</strong></h4><ul>
<li>例1：1年期国债-2.5%，10年期-3.0%。预期收益率曲线变陡，买入1亿元1年期国债，做空卖出1000万元10年期国债。一年后，如期变陡，1年期-2.0%，10年期-3.5%，卖出1亿元1年期国债，买入1000万元10年期国债。期差收益：$(2.5\%-2\%)\times{10000}+(3.5\%-3\%)\times{10}\times{1000}=100万元$</li>
<li><em>现券存在做空难度</em></li>
</ul>
<h4 id="6-6-利率互换期差交易"><a href="#6-6-利率互换期差交易" class="headerlink" title="6.6 利率互换期差交易"></a>6.6 <strong>利率互换期差交易</strong></h4><ul>
<li>例1：当前FR007_1Y*5Y的报价为：28/22（Offer/Bid）。预期收益率曲线变陡，期差（Spread）扩大（Steepen）。买入Spread，即pay 1亿元FR007_5Y， sell 5亿元FR007_1Y。1年后，收益率曲线恰如预期变陡， FR007_1Y*5Y报价： 80/78，交易员卖出Spread，即Sell 1亿元 FR007_5Y， pay 5亿元FR007_1Y。期差收益：头寸价值增长（78BP-28BP） *5*10000=250万元  </li>
<li><strong>优势：</strong>较现券易于做空；可直接交易Spread  </li>
</ul>
<h4 id="6-7-基差交易（Basis-Trade"><a href="#6-7-基差交易（Basis-Trade" class="headerlink" title="6.7 基差交易（Basis Trade)"></a>6.7 <strong>基差交易（Basis Trade)</strong></h4><ul>
<li><strong>原理：</strong><br>➢ 利用不同市场之间的利差进行交易</li>
<li><strong>具体操作：</strong><br>➢期现基差策略：交易国债期货与现货价格的利差<br>➢信用基差策略：交易不同信用等级的债券之间的利差<br>➢利率互换基差策略：交易不同参考基准的利率互换之间的利差，如Shibor*FR007<br>➢现券+利率互换基差策略：交易现券收益率与互换利率之间的利差  </li>
</ul>
<h4 id="6-8-现券-利率互换基差交易"><a href="#6-8-现券-利率互换基差交易" class="headerlink" title="6.8 现券+利率互换基差交易"></a>6.8 <strong>现券+利率互换基差交易</strong></h4><ul>
<li>例1：当前5年期国开债与FR007_5Y的利差为120BP。交易员认为当前利差显著高估，预期利差将大幅收窄，卖出Spread，即买入1亿元5年期国开债，同时pay 1亿元FR007_5Y。1年后， 5年期国开债与FR007_5Y的利差如预期收窄为40BP，买入Spread，即卖出1亿元5年期国开债，同时Sell 1亿元FR007_5Y。基差收益：<script type="math/tex">(120BP-40BP)*5*10000=400万元</script></li>
</ul>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>业务知识与规则</tag>
        <tag>政策与规范</tag>
        <tag>流动性风险管理</tag>
      </tags>
  </entry>
  <entry>
    <title>本币交易梳理02--系统功能介绍</title>
    <url>/post/31077/</url>
    <content><![CDATA[<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/CIBMTS%E7%95%8C%E9%9D%A2.png" alt="CIBMTS界面"></p>
<p><strong>报买价：对手方报出买价，本方以报买价卖出；报卖价：对手方报出卖价，本方以报卖价买入</strong></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B9%B0%E5%8D%96%E7%9B%AE%E6%A0%87%E4%BB%B7%E5%92%8C%E5%BA%95%E4%BB%B7.png" alt="买卖目标价和底价"></p>
<h3 id="界面布局："><a href="#界面布局：" class="headerlink" title="界面布局："></a><strong>界面布局：</strong></h3><ul>
<li><p><strong>一级目录：</strong><font color =red>内部管理</font>（资金账户及交易账户组设置、权限设置）、<font color =red>个人设置</font>（我的关注券）、<font color =red>交易设置</font>（首选交易账户设置、机构群组维护、限额管理、对手方管理、<strong>产品篮子维护（分仓）</strong>、信息披露、报备）、<font color =red>用户统一认证</font>（修改密码、机构用户管理）</p>
</li>
<li><p><strong>侧边栏：</strong>我要报价<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%88%91%E8%A6%81%E6%8A%A5%E4%BB%B7.png">图1</a>、单券-合约查看记录、计算工具、消息盒子<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B6%88%E6%81%AF%E7%9B%92%E5%AD%90.png">图2</a>、iDeal</p>
</li>
<li><p><strong>快捷键：</strong>iDeal-F11，我要报价-F8</p>
</li>
<li><strong>界面：</strong><a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E9%A6%96%E9%A1%B5.png">图1</a></li>
</ul>
<h1 id="一、用户管理"><a href="#一、用户管理" class="headerlink" title="一、用户管理"></a>一、用户管理</h1><h2 id="1-1-登录"><a href="#1-1-登录" class="headerlink" title="1.1 登录"></a>1.1 登录</h2><ul>
<li>银行间市场开户系统</li>
<li>中国银行间市场交易平台：CIBMTS<ul>
<li>证书、人脸识别、二维码（暂不可用）</li>
<li>专线网、互联网</li>
</ul>
</li>
<li>iDeal：即时通讯报价</li>
</ul>
<h2 id="1-2-用户统一认证"><a href="#1-2-用户统一认证" class="headerlink" title="1.2 用户统一认证"></a>1.2 <font color =red>用户统一认证</font></h2><h3 id="1-2-1-机构用户管理"><a href="#1-2-1-机构用户管理" class="headerlink" title="1.2.1 机构用户管理"></a>1.2.1 机构用户管理</h3><ul>
<li>新增、锁定/解锁、重置密码、禁用/启用、取消实名认证/取消身份确认等<ul>
<li>用户重置密码、新增由系统管理员完成</li>
<li>系统管理员用户解锁和密码重置由交易中心场务完成</li>
</ul>
</li>
</ul>
<h3 id="1-2-2-实名认证-身份确认"><a href="#1-2-2-实名认证-身份确认" class="headerlink" title="1.2.2 实名认证/身份确认"></a>1.2.2 实名认证/身份确认</h3><ul>
<li>系统管理员无需实名认证/身份确认</li>
<li>用户开展交易进行实名认证，无交易员资格证书的用户必须进行身份确认，否则无法登录iDeal</li>
<li>实名认证必须填写交易员证书信息</li>
</ul>
<h2 id="1-3-内部管理"><a href="#1-3-内部管理" class="headerlink" title="1.3 内部管理"></a>1.3 <font color =red>内部管理</font></h2><h3 id="1-3-1-用户权限设置"><a href="#1-3-1-用户权限设置" class="headerlink" title="1.3.1 用户权限设置"></a>1.3.1 用户权限设置</h3><ul>
<li>交易员身份设置：自营账户、资产管理、代理交易、账户管理、FT账户</li>
<li>设置机构权限：略</li>
</ul>
<h3 id="1-3-2-多账户管理：概览"><a href="#1-3-2-多账户管理：概览" class="headerlink" title="1.3.2 多账户管理：概览"></a>1.3.2 多账户管理：概览</h3><ul>
<li>交易账户即产品</li>
<li>交易账户组是对交易员及交易账户进行归类</li>
<li>交易账户组只能包含同类交易员或者交易账户</li>
<li>交易账户只能对应一个同类交易账户组，交易员可对应多个同类交易账户组</li>
<li><font color =red>**交易账户组类型：资产管理、代理交易、账户管理、FT账户**</font>

</li>
</ul>
<h3 id="1-3-3-账户设置"><a href="#1-3-3-账户设置" class="headerlink" title="1.3.3 账户设置"></a>1.3.3 账户设置</h3><ul>
<li>托管账户设置：<font color =red>开户系统</font>设置托管账户—中债登及上清所账户各一个<ul>
<li>新建和修改托管账户由交易中心审核通过后生效</li>
</ul>
</li>
<li>资金账户设置：一家机构可设置多个资金账户；<font color =red>需设置业务类型首选：如拆借默认、衍生品首选、X-SWAP、期权费首选、预发行首选</font></li>
<li>关联账户：<font color =red>两个托管账户需设置DVP首选资金账户</font></li>
</ul>
<h3 id="1-3-4-互联网交易设置"><a href="#1-3-4-互联网交易设置" class="headerlink" title="1.3.4 互联网交易设置"></a>1.3.4 互联网交易设置</h3><ul>
<li>系统管理员设置是否使用互联网接入</li>
</ul>
<h2 id="1-4-交易设置"><a href="#1-4-交易设置" class="headerlink" title="1.4 交易设置"></a>1.4 <font color =red>交易设置</font></h2><h3 id="1-4-1-限额管理"><a href="#1-4-1-限额管理" class="headerlink" title="1.4.1 限额管理"></a>1.4.1 限额管理</h3><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E9%99%90%E9%A2%9D%E8%AE%BE%E7%BD%AE.png" alt="交易限额设置" style="zoom:50%; align: middle" /></p>
<ul>
<li>人民银行限额由交易中心场务设置</li>
<li>基金净值提交</li>
<li>交易员限额</li>
<li>单笔交易限额</li>
<li><strong>交易员限额：</strong>累计限额、每日限额<br><strong>对手方管理：</strong>对手方限额、现券黑名单、质押RFQ白名单</li>
</ul>
<h4 id="1-4-1-1-对手方限额："><a href="#1-4-1-1-对手方限额：" class="headerlink" title="1.4.1.1 对手方限额："></a>1.4.1.1 <strong>对手方限额：</strong></h4><ul>
<li><p>信用拆借：<font color =red>累计限额</font>、拆入拆出限额（亿）、净限额区间</p>
</li>
<li><p>质押式回购：本方方向（正逆回购）、黑白名单设置</p>
<ul>
<li><p>正回购：设置黑/白名单<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A8%E6%8A%BC%E5%BC%8F%E5%9B%9E%E8%B4%AD%E6%AD%A3%E5%9B%9E%E8%B4%AD%E9%99%90%E9%A2%9D.png">图1</a></p>
</li>
<li><p>逆回购：设置对手方及其产品是否共享额度、关系授信（打勾即融出额度无限大）、额度授信（总额度大于X-Repo额度）<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A8%E6%8A%BC%E5%BC%8F%E5%9B%9E%E8%B4%AD%E9%80%86%E5%9B%9E%E8%B4%AD%E5%AF%B9%E6%89%8B%E6%96%B9%E9%99%90%E9%A2%9D%E7%95%8C%E9%9D%A2.png">图1</a>、<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E9%80%86%E5%9B%9E%E8%B4%AD%E5%AF%B9%E6%89%8B%E6%96%B9%E9%99%90%E9%A2%9D%E8%AE%BE%E7%BD%AE.png">图2</a></p>
</li>
</ul>
</li>
<li><p>利率互换：关系授信、额度授信<font color =red>二选一</font>，<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E9%99%90%E9%A2%9D%E8%AE%BE%E7%BD%AE.png">图1</a></p>
</li>
</ul>
<h4 id="1-4-1-2-现券黑名单："><a href="#1-4-1-2-现券黑名单：" class="headerlink" title="1.4.1.2 现券黑名单："></a>1.4.1.2 现券黑名单：</h4><ul>
<li>拉黑对手方后收不到对手方的报价</li>
</ul>
<h4 id="1-4-1-3-质押RFQ白名单："><a href="#1-4-1-3-质押RFQ白名单：" class="headerlink" title="1.4.1.3 质押RFQ白名单："></a>1.4.1.3 <strong>质押RFQ白名单：</strong></h4><ul>
<li>申请加入白名单：我要报价-请求-交易对手列表-可申请对手方<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A8%E6%8A%BC%E5%BC%8FRFQ%E9%99%90%E9%A2%9D.png">图1</a></li>
</ul>
<h1 id="二、报价行情"><a href="#二、报价行情" class="headerlink" title="二、报价行情"></a>二、报价行情</h1><ul>
<li><strong>非做市机构可以通过【模板】—【债券报价管理】查看【我的报价】|’可批量导入‘、【我的订单】|‘可以提交新订单及批量导入’、【当日成交】</strong></li>
<li><strong>报价查询时间跨度不能超过30天，可查看交易全流程，包括报价详情、成交概览。成交概览支持下载成交单。成交查询时间跨度不能超过1年。</strong><a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%8A%A5%E4%BB%B7%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2.png">图1</a></li>
</ul>
<h2 id="2-1-债券市场："><a href="#2-1-债券市场：" class="headerlink" title="2.1 债券市场："></a>2.1 <strong>债券市场：</strong></h2><ul>
<li><p>报价行情：综合报价、活跃券报价、优选报价、热点关注券、 X-bond报价、债券借贷报价、债券路演、 X-Auction报价行情</p>
</li>
<li><p>成交行情：综合成交、活跃券成交、 X-Bond成交、债券借贷成交行情、预发行成交行情</p>
</li>
</ul>
<h2 id="2-2-货币市场："><a href="#2-2-货币市场：" class="headerlink" title="2.2 货币市场："></a>2.2 <strong>货币市场：</strong></h2><ul>
<li>报价行情：报价行情、存单路演</li>
<li>成交行情：实时、历史行情包括质押式回购、X-Repo、买断式回购、信用拆借  </li>
</ul>
<h2 id="2-3-衍生品市场-X-Swap："><a href="#2-3-衍生品市场-X-Swap：" class="headerlink" title="2.3 衍生品市场 X-Swap："></a>2.3 <strong>衍生品市场 X-Swap：</strong></h2><ul>
<li>报价行情：利率互换聚合行情、利率互换实时承接、普通利率互换、标准利率互换、标准债券远期、CDS双向报价</li>
<li>成交行情：利率互换成交、标准利率互换成交、标准债券远期成交、债券远期成交、信用风险缓释凭证成交、信用违约互换成交、利率期权成交行情  </li>
</ul>
<h2 id="2-4-单券-合约行情"><a href="#2-4-单券-合约行情" class="headerlink" title="2.4 单券/合约行情"></a>2.4 单券/合约行情</h2><h2 id="2-5-现券"><a href="#2-5-现券" class="headerlink" title="2.5 现券"></a>2.5 现券</h2><h3 id="2-5-1-综合报价行情"><a href="#2-5-1-综合报价行情" class="headerlink" title="2.5.1 综合报价行情"></a>2.5.1 综合报价行情</h3><ul>
<li>各种报价方式整合后的<font color =red>最优报价（含做市、 X-Bond和指示性报价）</font>，意向报价和经纪报价 <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%BB%BC%E5%90%88%E6%8A%A5%E4%BB%B7%E8%A1%8C%E6%83%85.png">图1</a></li>
<li>不可直接点击成交，可点击代码或者名称进入单券/合约页面 或通过侧边栏【单券-合约查看记录】打开<ul>
<li>【单券页面】展现做市点击、X-Bond、指示性报价、意向报价、经纪报价的报价信息</li>
</ul>
</li>
</ul>
<h3 id="2-5-2-活跃券报价行情"><a href="#2-5-2-活跃券报价行情" class="headerlink" title="2.5.2 活跃券报价行情"></a>2.5.2 活跃券报价行情</h3><ul>
<li>活跃券由系统根据近期最活跃（交易量大）的债券计算得出  </li>
<li>点击深度可打开点击成交窗口，展示<font color =red>活跃券的最优报价（做市报价、X-Bond）</font>，深度报价5档（做市机构10档），可选中多笔可进行扫单 <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B4%BB%E8%B7%83%E5%88%B8%E6%8A%A5%E4%BB%B7%E6%88%90%E4%BA%A4.png">图1</a>。</li>
<li>在【我要报价】提交报价后，点击活跃券报价的【深度】，从而进行扫单操作。</li>
<li>不可直接点击成交，可点击代码或者名称进入单券/合约页面</li>
</ul>
<h3 id="2-5-3-热点关注券报价行情"><a href="#2-5-3-热点关注券报价行情" class="headerlink" title="2.5.3 热点关注券报价行情"></a>2.5.3 热点关注券报价行情</h3><ul>
<li>仅展示收藏后的债券行情，行情页面不可直接点击成交，点击债券名称/代码可打开单券/合约行情页面</li>
<li>展示买、卖两个方向的最优报价、最优价格间的价差及最新成交价 <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%83%AD%E7%82%B9%E5%85%B3%E6%B3%A8%E5%88%B8%E8%A1%8C%E6%83%85.png">图1</a></li>
</ul>
<h3 id="2-5-4-X-Bond报价行情"><a href="#2-5-4-X-Bond报价行情" class="headerlink" title="2.5.4 X-Bond报价行情"></a>2.5.4 X-Bond报价行情</h3><ul>
<li>点击成交、一键冻结。分连续报价和集中报价两部分展示，连续报价页面可直接点击成交，每只债券展示的行情深度为5档（做市机构为10档），选中多笔可进行扫单。</li>
</ul>
<h3 id="2-5-5-X-Lending报价行情"><a href="#2-5-5-X-Lending报价行情" class="headerlink" title="2.5.5 X-Lending报价行情"></a>2.5.5 X-Lending报价行情</h3><ul>
<li>点击成交、意向报价（具名）—可转对话报价、意向报价（匿名）—通过iDeal进行商谈</li>
</ul>
<h2 id="2-6-货币市场"><a href="#2-6-货币市场" class="headerlink" title="2.6 货币市场"></a>2.6 货币市场</h2><h3 id="2-6-1-货币交易极速通"><a href="#2-6-1-货币交易极速通" class="headerlink" title="2.6.1 货币交易极速通"></a>2.6.1 货币交易极速通</h3><ul>
<li>报价行情：X-Repo双边、资金意向版</li>
<li>实时行情：当日成交行情：质押式回购、买断式回购、X-Repo、信用拆借；<font color =red>按照DR、R进行分类</font></li>
</ul>
<h2 id="2-7-衍生品市场"><a href="#2-7-衍生品市场" class="headerlink" title="2.7 衍生品市场"></a>2.7 衍生品市场</h2><ul>
<li>成交行情：逐笔成交、成交汇总  </li>
</ul>
<h3 id="2-7-1-利率互换X-Swap"><a href="#2-7-1-利率互换X-Swap" class="headerlink" title="2.7.1 利率互换X-Swap"></a>2.7.1 利率互换X-Swap</h3><ul>
<li>聚合行情：自营账户支持实时承接+非实时承接行情聚合；若无实时承接权限，仅能查看非实时承接行情  </li>
<li>实施承接：上清所作为对手方实时接单，同时纳入利率互换的集中清算。<font color =red>需与上清所签订相关协议。</font></li>
</ul>
<h2 id="2-8-单券-合约行情"><a href="#2-8-单券-合约行情" class="headerlink" title="2.8 单券/合约行情"></a>2.8 单券/合约行情</h2><ul>
<li>单券行情：提供当日行情、债券信息/估值、历史成交行情、相关券推荐<ul>
<li>报价行情：支持做市、 X-Bond、指示性、意向报价、经纪报价。非做市机构深度为5档，做市机构10档  </li>
</ul>
</li>
<li>单合约行情：提供当日行情、合约债券信息、历史成交行情  <ul>
<li>报价行情：实时承接、非实时承接报价，档位为5档。 <img src="" style="zoom:10%;" /> </li>
</ul>
</li>
</ul>
<h1 id="三、交易机制"><a href="#三、交易机制" class="headerlink" title="三、交易机制"></a>三、交易机制</h1><h2 id="3-1-报价方式"><a href="#3-1-报价方式" class="headerlink" title="3.1 报价方式"></a>3.1 报价方式</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%8A%A5%E4%BB%B7%E6%96%B9%E5%BC%8F%E6%B1%87%E6%80%BB.png" alt="报价方式汇总"></p>
<h2 id="3-1-协商驱动（询价-‘格式化报价’）"><a href="#3-1-协商驱动（询价-‘格式化报价’）" class="headerlink" title="3.1 协商驱动（询价|‘格式化报价’）"></a>3.1 协商驱动（询价|‘格式化报价’）</h2><h3 id="3-1-1（iDeal聊天）意向报价、对话报价（直接对话、聊天转对话）"><a href="#3-1-1（iDeal聊天）意向报价、对话报价（直接对话、聊天转对话）" class="headerlink" title="3.1.1（iDeal聊天）意向报价、对话报价（直接对话、聊天转对话）"></a>3.1.1（iDeal聊天）意向报价、对话报价（直接对话、聊天转对话）</h3><ul>
<li><font color =red>债券市场的对话报价不是格式化交谈|‘即只能对手方只能拒绝或成交，不能对话修改’，货币市场的对话报价是格式化交谈</font> <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E5%88%B8%E5%AF%B9%E8%AF%9D%E6%8A%A5%E4%BB%B7%E6%8F%90%E5%8D%95.png">现券对话报价提单</a> <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E5%88%B8%E5%AF%B9%E8%AF%9D%E6%88%90%E4%BA%A4.png">现券对话成交</a></li>
<li>目前iDeal支持【现券买卖】、【质押式回购】、【利率互换】</li>
<li><strong>方式一：</strong>发起iDeal聊天（商定要素：期限、资金量、利率|‘非必填’）$\longrightarrow$ <font color =red>聊天窗口发对话报价意向</font>$\longrightarrow$转对话报价$\longrightarrow$ 格式化交谈$\longrightarrow$成交确认（需补充完其他要素，如：本方交易账户、对手方、利率、质押券及其券面总额、折算总额（折算比例可取CFETS标准折算率，也可自行商谈）、期限）</li>
<li><strong>方式二：</strong>直接发起对话报价$\longrightarrow$格式化交谈$\longrightarrow$成交确认</li>
<li>对手方通过消息盒子处理收到的对话报价请求。对话交谈轮次不超过5轮。通过功能列表—我的交易查看</li>
<li><a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/iDeal%E5%8F%91%E8%B5%B7%E8%81%8A%E5%A4%A9.png">iDeal发起聊天</a>| <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/iDeal%E8%A6%81%E7%B4%A0%E5%A1%AB%E5%86%99.png">iDeal要素填写</a>| <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%AF%B9%E8%AF%9D%E6%8A%A5%E4%BB%B7%E5%8F%91%E8%B5%B7%E7%95%8C%E9%9D%A2.png">对话报价发起界面</a>| <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%AF%B9%E6%89%8B%E6%96%B9%E5%A4%84%E7%90%86%E6%8A%A5%E4%BB%B7%E7%94%B3%E8%AF%B7.png">对手方处理报价申请</a></li>
</ul>
<h3 id="3-1-2-资金意向（意向转对话）"><a href="#3-1-2-资金意向（意向转对话）" class="headerlink" title="3.1.2 资金意向（意向转对话）"></a>3.1.2 <strong>资金意向</strong>（意向转对话）</h3><ul>
<li><strong>方式三：</strong><font color =red>在【我要报价】发起资金意向报价</font>$\longrightarrow$在资金意向版（即货币市场报价行情）$\longrightarrow$转对话</li>
<li>实时报价、表明交易意向。可通过设置群组发送至指定对象群组，发送范围也可为全市场  </li>
<li>报价要素成交方式可以选择【质押、拆借、买断单券、买断多券】</li>
<li>报价要素包括：基准利率（固定利率、DR、R、Shibor、IBO）、成交方式</li>
<li><a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B5%84%E9%87%91%E6%84%8F%E5%90%91%E6%8A%A5%E4%BB%B7.png">资金意向报价</a>| <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B5%84%E9%87%91%E6%84%8F%E5%90%91%E6%8A%A5%E4%BB%B72.png">资金意向报价2</a></li>
</ul>
<h3 id="3-1-3-现券意向报价（意向转对话-’X-Bargin‘）"><a href="#3-1-3-现券意向报价（意向转对话-’X-Bargin‘）" class="headerlink" title="3.1.3 现券意向报价（意向转对话|’X-Bargin‘）"></a>3.1.3 现券意向报价（意向转对话|’X-Bargin‘）</h3><ul>
<li>非实价报价、表明交易意向，发送范围为全市场，可匿名（即X-Bargain，归于意向报价中，不单列于报价方式）<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E5%88%B8%E6%84%8F%E5%90%91%E6%8A%A5%E4%BB%B7%E7%95%8C%E9%9D%A2.png">现券意向报价界面</a></li>
<li>同一只债券只能发送一笔同一方向的意向报价  </li>
<li><font color =red>X-Bargin支持三轮询价</font>。交易要素：明价、底价、做市商费用（若需要做市商搭桥代为交易，以厘计价）、券面总额，另可选【一口价】（本轮谈判是否允许修改报价信息）、AON（All or None|对于券面总额’全部成交或是全部不成交’）<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X-Brargin.png">X-Brargin</a></li>
<li>X-Bargin达成交易后，进行分仓（选择对应的交易账户）<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X-Bargin%E4%BA%A4%E6%98%93%E5%88%86%E4%BB%93.png">X-Bargin交易分仓</a>| <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X-Bargin%E4%BA%A4%E6%98%93%E5%88%86%E4%BB%932.png">X-Bargin交易分仓2</a></li>
</ul>
<h3 id="3-1-4-利率互换—对话报价"><a href="#3-1-4-利率互换—对话报价" class="headerlink" title="3.1.4 利率互换—对话报价"></a>3.1.4 利率互换—对话报价</h3><ul>
<li>须交易双方都给对手方维护利率互换市场对话报价的<font color =red>对手方限额</font>方可成交。支持询价，轮次不超过5次。</li>
<li>计算机构选择“中国外汇交易中心”的前提是与交易中心签署了计算代理协议。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E2%80%94%E5%8D%8F%E5%95%86%E6%8A%A5%E4%BB%B7.png">利率互换—协商报价</a></li>
</ul>
<h3 id="3-1-5-债券借贷—意向报价、对话报价"><a href="#3-1-5-债券借贷—意向报价、对话报价" class="headerlink" title="3.1.5 债券借贷—意向报价、对话报价"></a>3.1.5 债券借贷—意向报价、对话报价</h3><ul>
<li>意向报价：非实价报价、表明交易意向，可发送标的债券类型/代码或者标的债券类型的意向报价，发送范围为全市场，可匿名。非本方发出的具名意向报价可转成对话报价。</li>
<li>对话报价：<ul>
<li>不可进行格式化交谈，要素商定可通过聊天工具iDeal进行。</li>
<li>质押券最大数量15只，且债券币种只能为CNY  <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%80%BA%E5%88%B8%E5%80%9F%E8%B4%B7%E6%8A%A5%E4%BB%B7.png">债券借贷报价</a></li>
</ul>
</li>
</ul>
<h3 id="3-1-6-买断式回购—对话报价"><a href="#3-1-6-买断式回购—对话报价" class="headerlink" title="3.1.6 买断式回购—对话报价"></a>3.1.6 买断式回购—对话报价</h3><ul>
<li>类型：单券、多券。支持格式化交谈，必须在5轮内完成。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%B9%B0%E6%96%AD%E5%BC%8F%E5%9B%9E%E8%B4%AD-%E5%AF%B9%E8%AF%9D%E6%8A%A5%E4%BB%B7.png">买断式回购-对话报价</a></li>
</ul>
<h2 id="3-2-报价驱动（由做市-资金商报价）"><a href="#3-2-报价驱动（由做市-资金商报价）" class="headerlink" title="3.2 报价驱动（由做市/资金商报价）"></a>3.2 报价驱动（由做市/资金商报价）</h2><p><strong>债券市场—做市商；货币市场—资金商</strong></p>
<h3 id="3-2-1-做市报价"><a href="#3-2-1-做市报价" class="headerlink" title="3.2.1 做市报价"></a>3.2.1 做市报价</h3><ul>
<li>发起方只能是做市商，发送范围是全市场，点击方是具有现券交易权限的所有现券交易员  </li>
<li>必须同时发送买、卖两个方向的报价  </li>
<li>报价发送后本方可以冻结、撤销和修改该笔报价 <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E5%88%B8%E4%B9%B0%E5%8D%96%E2%80%94%E5%81%9A%E5%B8%82%E6%8A%A5%E4%BB%B7.png">[现券买卖—做市报价]</a>  </li>
<li>本方可在“我的做市”面板中管理机构的指示性报价 </li>
<li>现券买卖做市分层：<ul>
<li>报价发送方：有分层报价权限的做市机构用户，且已维护分层报价群组</li>
<li>做市机构发送活跃券的分层报价后，群组中的机构可在活跃券报价 行情看到小蓝点，深度行情中展示的蓝色字体数据即为分层报价 <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%81%9A%E5%B8%82%E6%8A%A5%E4%BB%B7%E5%88%86%E5%B1%82.png">[做市报价分层]</a> | <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%81%9A%E5%B8%82%E6%8A%A5%E4%BB%B7%E5%88%86%E5%B1%822.png">[做市报价分层2]</a></li>
</ul>
</li>
</ul>
<h3 id="3-2-2-指示性报价"><a href="#3-2-2-指示性报价" class="headerlink" title="3.2.2 指示性报价"></a>3.2.2 指示性报价</h3><ul>
<li>指示性报价：解决做市报价中点击即成交带来的压力。<font color =red>不能直接报价，通过转请求报价进行成交</font></li>
<li>发起方只能是做市商，发送范围是全市场。发送内容为含价格、可以不含量的买卖两个方向的报价<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%8C%87%E7%A4%BA%E6%80%A7%E6%8A%A5%E4%BB%B7.png">图1</a><ul>
<li>不可直接被成交，只可以被转成请求报价，转换成请求报价时可只发给一家做市机构（交易对手），也可添加其他做市机构</li>
</ul>
</li>
<li>本方可在“我的做市”面板中管理机构的指示性报价</li>
<li>对手方可在现券买卖-综合报价-最优报价页面或单券报价行情中查看指示性价格，双击后进入请求报价。</li>
</ul>
<h3 id="3-2-3-请求报价—现券"><a href="#3-2-3-请求报价—现券" class="headerlink" title="3.2.3 请求报价—现券"></a>3.2.3 请求报价—现券</h3><p><strong>请求报价：需求方请求做市方报价。</strong></p>
<ul>
<li>分仓方式有3个选择，不分仓和PreAllocation（前分仓）、 Post-Allocation（后分仓）<ul>
<li>前分仓：做市商回复的券面总额小于请求量时，确认成交前可以修改分仓量；若等于请求量则无法修改  </li>
</ul>
</li>
<li><font color =red>**发送时只包含券面总额，不包含价格**</font></li>
<li>回复请求报价：做市机构可通过请求回复界面查看待回复状态的RFQ请求，并具名回复报价。回复时可修改券面总额，改后不可超过请求量。</li>
<li><p>请求方可在我的报价界面中查看做市机构的回复，右上角红色气泡中数字表示回复方数量，红色标识出最优价格。双击某笔待成交RFQ报价，请求报价确认窗 口将展示所有回复方的回复内容。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%96%B9%E5%9B%9E%E5%A4%8D%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7.png">[请求方回复请求报价]</a></p>
</li>
<li><font color =red>成交后，未选中的交易将消失</font>

</li>
</ul>
<h3 id="3-2-4-请求报价—质押式回购"><a href="#3-2-4-请求报价—质押式回购" class="headerlink" title="3.2.4 请求报价—质押式回购"></a>3.2.4 请求报价—质押式回购</h3><ul>
<li>正回购方：<ul>
<li>本方在资金商白名单内才可向其发送RFQ，仅支持正回购。</li>
<li>可选择一个或多个资金交易商，对手方交易员非必填。</li>
<li>分仓方式：不分仓和Pre-Allocation。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7-%E6%AD%A3%E5%9B%9E%E8%B4%AD%E6%96%B9.png">[请求报价-正回购方]</a></li>
<li><font color =red>若发给多个资金商， RFQ选择一笔确认成交后，即使成交量等于请求量时，还可继续确认回复并成交 </font> </li>
<li>本方确认资金商回复价格后，在“提券管理”中管理待提券 报价，补充质押券信息。质押券最多不超过15只；支持质押境外债；支持质押跨托管机构的债券；可选择CFETS标准折算率<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7-%E6%AD%A3%E5%9B%9E%E8%B4%AD%E6%96%B9%E8%B4%A8%E6%8A%BC%E6%8F%90%E5%88%B8.png">[请求报价-正回购方质押提券]</a> | <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7-%E6%AD%A3%E5%9B%9E%E8%B4%AD%E6%96%B9%E8%B4%A8%E6%8A%BC%E6%8F%90%E5%88%B82.png">[请求报价-正回购方质押提券2]</a></li>
</ul>
</li>
<li>逆回购方：<ul>
<li>资金商在“我的回复”可批量回复。回复时， “回复量”和“回复有限时间”为必填项；<font color =red>“回购利率”为非必填项，可由正回购方在提券时填写</font></li>
<li>在提券管理页面收到已提券报价后，可直接确认成交。支持修改提交，交谈询价轮次不超过 5次。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7-%E9%80%86%E5%9B%9E%E8%B4%AD%E6%96%B9%E6%8F%90%E5%88%B8.png">[请求报价-逆回购方提券]</a> | <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7-%E9%80%86%E5%9B%9E%E8%B4%AD%E6%96%B9%E6%8F%90%E5%88%B82.png">[请求报价-逆回购方提券2]</a></li>
</ul>
</li>
</ul>
<h3 id="3-2-5-请求报价—利率互换"><a href="#3-2-5-请求报价—利率互换" class="headerlink" title="3.2.5 请求报价—利率互换"></a>3.2.5 请求报价—利率互换</h3><ul>
<li>分仓方式：不分仓和Pre-Allocation</li>
<li><font color = red>当请求报价发送给多个对手方且多个对手方机构给予回复，请求方仅可就一笔回复进行成交，不可成交多笔。</font>已确认成交的请求报价结束，不再“我的请求”界面显示</li>
<li><font color =red>选择直接合约，授信充足时，回复方回复量必须等于请求量；授信不足时，系统自动计算授信范围内的最大回复量，不可修改</font> <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7%E2%80%94%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2.png">[请求报价—利率互换]</a></li>
</ul>
<h3 id="3-2-6-请求报价—南向通"><a href="#3-2-6-请求报价—南向通" class="headerlink" title="3.2.6 请求报价—南向通"></a>3.2.6 请求报价—南向通</h3><ul>
<li>请求方可根据实际情况选择对手方机构数量，至少发送给1家做市机构</li>
<li>请求报价发送成功后可在我的报价-南向通中查看，本方状态为：已发送，本方可以撤销<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7%E2%80%94%E5%8D%97%E5%90%91%E9%80%9A.png">[请求报价—南向通]</a></li>
</ul>
<h3 id="3-2-7-小结："><a href="#3-2-7-小结：" class="headerlink" title="3.2.7 小结："></a>3.2.7 小结：</h3><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7%E2%80%94%E5%B0%8F%E7%BB%93.png" alt="请求报价—小结"></p>
<h2 id="四、订单驱动（即匿名点击）"><a href="#四、订单驱动（即匿名点击）" class="headerlink" title="四、订单驱动（即匿名点击）"></a>四、订单驱动（即匿名点击）</h2><ul>
<li><strong>X—Bond：</strong>略</li>
<li><p><strong>X—Swap：</strong>须满足最小有效授信账户主体数（5家）要求。须提前设置X-Swap资金账户<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X%E2%80%94Swap2.png">[X—Swap2]</a></p>
</li>
<li><p><strong>X—Repo：</strong></p>
<ul>
<li><strong>正回购</strong>可交易对手数量不得低于30个。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X%E2%80%94Repo%E6%AD%A3%E5%9B%9E%E8%B4%AD.png">[X—Repo正回购]</a></li>
<li>预提质押劵开关按钮：开关默认关闭，可手动开启；单笔交易质押券最大数量为15个。</li>
<li>回购利率超出X-Repo涨跌幅设置范围时，系统提示：回购利率超出可交易范围。</li>
<li>若本方正回购订单的回购利率高于本方逆回购订单的回购利率则提示价格出现倒挂，提交失败。</li>
<li><strong>逆回购</strong>可交易对手数量不得低于30个<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X%E2%80%94Repo%E9%80%86%E5%9B%9E%E8%B4%AD.png">[X—Repo逆回购]</a></li>
<li>交易时段外提交成功的订单展示为预提交状态，非有效。</li>
<li><font color =red>具有分层报价权限的机构</font>，显示分层报价的开关按钮，开关默认关闭，可手动开启； 可以选择群组进行报价，群组上限5个  </li>
</ul>
</li>
<li><p><strong>X—Lending：</strong></p>
<ul>
<li>标的债券代码： X-Lending可交易债券列表可在【文件下载】界面下载后查看。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X%E2%80%94Lending1.png">[X—Lending1]</a></li>
<li>质押券属性：选择某类质押券属性，则该笔交易仅能提交该类质押券，比如选择”利率债”，则融入方<br>提交质押券时，仅能选择国债、政策性金融债、央行票据。</li>
</ul>
</li>
<li><p><strong>X—Auction：</strong></p>
<ul>
<li>预申报：打开 X-Auction-匿名拍卖-预申报页面。右上方展示当前场次、预申报日及时间段<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/X%E2%80%94Auction.png">[图1]</a></li>
<li>申报：申报日，可在 X-Auction 申报界面查看可申报债券，并进行申报</li>
<li>双向报价：拍卖日-双向报价阶段，在我要报价页面提交双向报价</li>
<li>订单：拍卖日-集中报价阶段，在我要报价页面提交订单</li>
</ul>
</li>
</ul>
<h3 id="4-1-连续报价"><a href="#4-1-连续报价" class="headerlink" title="4.1 连续报价"></a>4.1 连续报价</h3><ul>
<li><p><strong>交易规则：</strong></p>
<ul>
<li>交易时段内可发送报价进行匹配撮合，也可直接点击成交。</li>
<li>用户提交订单后，系统根据授信约束按照<font color =red>价格优先、时间优先</font>原则匹配  </li>
<li>匹配成交时，以先进入订单簿的价格成交；<font color =red>可以最小变动单位的整数倍拆分成交 </font></li>
<li>对于未被匹配成交的有效订单，系统根据机构的双边授信约束匿名显示每个机构可成交的市场最优5档价格（做市机构10档）供点击成交；  </li>
<li>系统提供扫单功能，即点击某档深度价格时，可成交该价格以上的所有订单。  </li>
</ul>
</li>
<li><p><strong>订单类型/策略交易：</strong></p>
<p><a href="https://mp.weixin.qq.com/s/vuwkWd254-G3ATH9KruS9Q">教你玩转X-Bond第二篇：如何设置策略交易</a></p>
<ul>
<li><strong>限价订单：</strong>发送包含价格和券面总额的订单，与订单簿中优于或等于该价格的反方向订单匹配成交，未撮合成功的进入订单簿  </li>
<li><strong>弹性订单：</strong>发送的订单除价格和券面总额外，还增加一定的价格弹性（BP），即设置了底价，可与优于或等于底价价格的反方向订单匹配成交  </li>
<li><strong>市转限：</strong>发送只含量的订单，按市场最优价开始匹配，如果发送的量大于市场上所有的反向订单量，则剩余的量按成交的最差价格进入订单簿。  </li>
<li><strong>市转撤：</strong>发送只含量的订单，按市场最优价开始匹配，如果发送的量大于市场上所有的反向订单量，则<br>剩余的量全部撤销。  </li>
<li><strong>OCO订单（One Cancels the order）：</strong>将多个订单设置成OCO订单，当其中任何一笔订单匹配成交完成，其他订单自动撤销</li>
<li><strong>If Done订单：</strong>将一笔活动的和一笔冻结的订单进行绑定，当活动的订单匹配成交完，冻结的订单自动被激活 </li>
</ul>
</li>
</ul>
<h3 id="4-2-集中报价（略）"><a href="#4-2-集中报价（略）" class="headerlink" title="4.2 集中报价（略）"></a>4.2 集中报价（略）</h3><h1 id="五、总结："><a href="#五、总结：" class="headerlink" title="五、总结："></a>五、总结：</h1><h2 id="5-1-分市场报价与交易方式总结"><a href="#5-1-分市场报价与交易方式总结" class="headerlink" title="5.1 分市场报价与交易方式总结"></a>5.1 分市场报价与交易方式总结</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%86%E5%B8%82%E5%9C%BA%E6%8A%A5%E4%BB%B7%E4%B8%8E%E4%BA%A4%E6%98%93%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93.png" alt="分市场报价与交易方式总结"></p>
<h2 id="5-2-交易方式"><a href="#5-2-交易方式" class="headerlink" title="5.2 交易方式"></a>5.2 交易方式</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E6%96%B9%E5%BC%8Fbacked.png" alt="交易方式"></p>
<h2 id="5-3-交易限额设置"><a href="#5-3-交易限额设置" class="headerlink" title="5.3 交易限额设置"></a>5.3 交易限额设置</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E9%99%90%E9%A2%9D%E8%AE%BE%E7%BD%AE.png" /></p>
<h2 id="5-4-功能设置生效时间总结"><a href="#5-4-功能设置生效时间总结" class="headerlink" title="5.4 功能设置生效时间总结"></a>5.4 功能设置生效时间总结</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%8A%9F%E8%83%BD%E8%AE%BE%E7%BD%AE%E7%94%9F%E6%95%88%E6%97%B6%E9%97%B4%E6%80%BB%E7%BB%93.png" alt="功能设置生效时间总结"></p>
<h2 id="5-5-交易时间总结"><a href="#5-5-交易时间总结" class="headerlink" title="5.5 交易时间总结"></a>5.5 交易时间总结</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E6%97%B6%E9%97%B4%E6%80%BB%E7%BB%93.png" alt="交易时间总结"></p>
<h1 id="六、练习："><a href="#六、练习：" class="headerlink" title="六、练习："></a>六、练习：</h1><h2 id="6-1-用户管理："><a href="#6-1-用户管理：" class="headerlink" title="6.1 用户管理："></a>6.1 用户管理：</h2><ol>
<li><p>CIBMTS的两级用户：系统管理员、普通用户</p>
</li>
<li><p>本币新平台提供的限额管理功能在哪里设置？哪些市场必须要设置对手方限额才能交易？</p>
<p>限额管理在新本币的管理设置-交易设置下；信用拆借、利率互换、利率互换期权、利率上限/下限期权、信用违约互换、远期利率协议  </p>
</li>
<li><p>做信用拆借交易前必须做哪些设置？做现券买卖交易前必须做哪些设置？</p>
<p>做信用拆借前必须要进行对手方限额和交易员限额设置以及资金账户设置；做现券买卖交易前必须要进行资金和托管账户设置</p>
</li>
</ol>
<h2 id="6-2-现券RFQ"><a href="#6-2-现券RFQ" class="headerlink" title="6.2 现券RFQ"></a>6.2 现券RFQ</h2><ol>
<li>发送一笔卖出请求报价，债券代码180027，清算速度T+1，券面总额5000万。</li>
<li>其中一家机构收到报价请求后回复，修改报价量为4000万，净价为98.5，另一家机构收到请求后输入净价98.3后回复。</li>
<li>用户收到请求回复后，查看最优报价，并选择最优报价进行确认成交。  </li>
</ol>
<h2 id="6-3-质押RFQ"><a href="#6-3-质押RFQ" class="headerlink" title="6.3 质押RFQ"></a>6.3 质押RFQ</h2><ol>
<li>资金交易商A和资金交易商B将演示机构添加到其质押RFQ白名单内，演示机构发送一笔正回购方向的请求报价到这2家机构，清算速度T+0，券面总额5000万</li>
<li>其中资金商A收到报价请求后回复，修改回复量为4000万，资金商B收到请求后回复默认量5000万，回购利率3.34%</li>
<li>用户收到请求回复后，查看回复的量和回购利率，并选择进行确认</li>
<li>正回购方完成提券，逆回购方成交  </li>
</ol>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>系统功能</tag>
      </tags>
  </entry>
  <entry>
    <title>本币交易梳理03--利率市场化改革</title>
    <url>/post/63431/</url>
    <content><![CDATA[<p>Pending</p>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>利率市场化改革</tag>
      </tags>
  </entry>
  <entry>
    <title>本币交易梳理04--政策与规范</title>
    <url>/post/62746/</url>
    <content><![CDATA[<h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><h2 id="1-1-规范体系"><a href="#1-1-规范体系" class="headerlink" title="1.1 规范体系"></a>1.1 规范体系</h2><ul>
<li>法律-行政规定-团体规则-职业操守</li>
<li><strong>法律（全国人大常委会）：</strong> 中国人民银行法、商业银行法、公司法、信托法、证券法、证券投资基金法、与算法、民法典</li>
<li><strong>行政法规（国务院）：</strong> 企业债券管理条例、取消行政许可的国务院令</li>
<li><strong>部门规章、规范性文件（国务院部委）：</strong> 人行—市场准入、银行间市场发行、交易托管结算、信息披露、双边报价</li>
<li><strong>自律规则、中介机构规则（中介机构及自律组织）：</strong> 交易、清算、结算规则、规程、服务协议、市场交易主协议</li>
</ul>
<h2 id="1-2-市场管理框架"><a href="#1-2-市场管理框架" class="headerlink" title="1.2 市场管理框架"></a>1.2 市场管理框架</h2><ul>
<li><strong>中介机构及自律组织：</strong> 拆借中心、中债登、上清所、银行间交易商协会(NAFMII)</li>
<li><strong>证监会、银保监会：</strong> 监管机构、主体，即<font color="#d99694">交易主体</font></li>
<li><strong>人行：</strong> 指导中介机构及自律组织、制定管理规定、功能性监管、行政监管</li>
<li><strong>人行、财政部、发改委、NAFMII：</strong> 监督<font color="#d99694">发债主体</font></li>
<li><font color="#d99694">拆借中心-交易规则-监测规则；上清所、中债登-结算规则-监测规则；NAFMII-自律监管</font>

</li>
</ul>
<h1 id="二、货币市场基本规则"><a href="#二、货币市场基本规则" class="headerlink" title="二、货币市场基本规则"></a>二、货币市场基本规则</h1><h2 id="2-1-同业拆借市场准入管理"><a href="#2-1-同业拆借市场准入管理" class="headerlink" title="2.1 同业拆借市场准入管理"></a>2.1 同业拆借市场准入管理</h2><ul>
<li>金融机构通过开户系统（一站式平台）向拆借中心申请入市、退市<ul>
<li>均在三日内完成，其中退市后两年内不再受理入市申请</li>
</ul>
</li>
<li>三放松：放松准入、期限、限额管理</li>
<li>两加强：加强<font color="#d99694">透明度管理</font>和<font color="#d99694">监督检查</font></li>
<li>一促进：促进同业拆借市场健康发展</li>
</ul>
<h2 id="2-2-同业拆借市场期限管理"><a href="#2-2-同业拆借市场期限管理" class="headerlink" title="2.2 同业拆借市场期限管理"></a>2.2 同业拆借市场期限管理</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%90%8C%E4%B8%9A%E6%8B%86%E5%80%9F%E5%B8%82%E5%9C%BA%E6%9C%9F%E9%99%90%E7%AE%A1%E7%90%86.png" alt="同业拆借市场期限管理"><br>➢ 最长拆出期限不得超过对手方的最长拆入期限（第23条）<br>➢ 到期后不得展期（第24条）</p>
<h2 id="2-3-同业拆借市场限额管理"><a href="#2-3-同业拆借市场限额管理" class="headerlink" title="2.3 同业拆借市场限额管理"></a>2.3 同业拆借市场限额管理</h2><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%90%8C%E4%B8%9A%E6%8B%86%E5%80%9F%E5%B8%82%E5%9C%BA%E9%99%90%E9%A2%9D%E7%AE%A1%E7%90%86.png" alt="同业拆借市场限额管理"></p>
<h2 id="2-4-同业拆借市场信息披露与监督检查"><a href="#2-4-同业拆借市场信息披露与监督检查" class="headerlink" title="2.4 同业拆借市场信息披露与监督检查"></a>2.4 同业拆借市场信息披露与监督检查</h2><ul>
<li>信息披露管理<ul>
<li>每年1月中旬：上年财务报表（未审计）</li>
<li>每年四月底：经审计的年度财务报告及其他要求公布的报表、报告</li>
<li>每年7月中旬：半年财务报表（未审计）</li>
<li>获准进入拆借市场60日：公告基本情况、最近一次经审计的年度财务报告</li>
<li>股权变更完成后30个工作日内：公告股权变更情况</li>
<li>已经成为上市公司的成员可以豁免在同业拆借市场进行信息披露</li>
</ul>
</li>
<li>监督检查<ul>
<li>人行依法对同业拆借交易实施非现场监管和现场检查</li>
</ul>
</li>
</ul>
<h1 id="三、债券市场（含回购）基本规则"><a href="#三、债券市场（含回购）基本规则" class="headerlink" title="三、债券市场（含回购）基本规则"></a>三、债券市场（含回购）基本规则</h1><h2 id="3-1-准入管理"><a href="#3-1-准入管理" class="headerlink" title="3.1 准入管理"></a>3.1 准入管理</h2><ul>
<li>境内主体：<ul>
<li>02年备案制$\longrightarrow$ 13年人行上海总部上收分支行准入备案权限 </li>
</ul>
</li>
<li>境外主体：<ul>
<li>11年RQFII—13年QFII—15年境外央行、国际金融组织和主权财富基金可参与所有交易—16年CIBM</li>
<li>直接入市（CIBM）、债券通（BC）</li>
</ul>
</li>
</ul>
<p>略</p>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>政策与规范</tag>
      </tags>
  </entry>
  <entry>
    <title>私募股权投资财务尽调</title>
    <url>/post/76666/</url>
    <content><![CDATA[<h1 id="私募股权投资财务尽调"><a href="#私募股权投资财务尽调" class="headerlink" title="私募股权投资财务尽调"></a>私募股权投资财务尽调</h1><h2 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h2><p>财务尽调：关注目标公司的历史财务业绩的情况并对未来财务状况进行合理预测<br>调查内容：企业的历史经营业绩、未来盈利预测、营运资金、融资结构、资本性开支以及财务风险敏感度分析<br>尽调作用：为投资及整合方案设计、交易谈判、投资决策提供支撑，进而判断投资是否符合战略目标及投资原则</p>
<h1 id="财务尽调基本流程"><a href="#财务尽调基本流程" class="headerlink" title="财务尽调基本流程"></a>财务尽调基本流程</h1><h2 id="概述：-1"><a href="#概述：-1" class="headerlink" title="概述："></a>概述：</h2><p>明确调查目的(为了投资股权/债权/IPO辅导)$\rightarrow$明确调查内容和范围$\rightarrow$了解目标公司的基本情况$\rightarrow$明确调查的时间和人员安排计划$\rightarrow$开展调查小组讨论会$\rightarrow$明确主要的调查程序$\rightarrow$拟定财务尽调资料清单$\rightarrow$进场进行财务尽调(包括取得资料、分析资料和形成判断)<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A2%E5%8A%A1%E5%B0%BD%E8%B0%83%E8%BF%9B%E5%9C%BA%E5%B7%A5%E4%BD%9C.png" alt="财务尽调进场工作" style="zoom: 25%;" /></p>
<h2 id="基础材料的调取和收集"><a href="#基础材料的调取和收集" class="headerlink" title="基础材料的调取和收集"></a>基础材料的调取和收集</h2><ol>
<li>会计师事务所出具的无保留意见的审计报告。(包括对于企业的财务状况、经营成果、现金流量的审计意见、以及财务报表和附注：资产负债表、利润表、现金流量表以及所有者权益变动表。附注主要是对于财务报表中提及的重要科目的注释)</li>
<li>经审计后的财务报表以及附注</li>
<li>科目余额表(全面反映所有的报表科目在当年的变动情况)、明细账、序时账(按照时间顺序完成，反映当年所有的交易记录)、贷款合同与贷款卡信息(根据企业的贷款信息计算出财务费用，从而查验企业有没有民间高利贷这种情况)<br>*根据科目余额表的变动追溯明细账中的二级子科目、摘要等数据，从而发现异动数据</li>
</ol>
<h2 id="主营业务分析"><a href="#主营业务分析" class="headerlink" title="主营业务分析"></a><span id="主营业务分析">主营业务分析</span></h2><h3 id="收入分析："><a href="#收入分析：" class="headerlink" title="收入分析："></a>收入分析：</h3><ol>
<li>划分收入结构(品种、客户、渠道、区域)，通过分析销量和单价的变动情况和变动趋势了解导致企业主营业务收入波动的原因;</li>
<li>将主营业务收入波动情况与管理层的访谈描述做比对，对异常波动和趋势或与管理层描述不一致的趋势进行讨论。</li>
</ol>
<h3 id="成本分析"><a href="#成本分析" class="headerlink" title="成本分析"></a>成本分析</h3><ol>
<li>划分成本结构(品种、客户、渠道、区域)，通过分析销量和单位成本(拆分成原材料成本、人工成本、制造费用等)的变动情况及波动趋势，了解导致企业主营业务成本波动的原因;</li>
<li>将成本波动情况与管理层的访谈描述进行比对，对异常的趋势或与管理层描述不一致的趋势进行讨论。</li>
</ol>
<h3 id="毛利及毛利率分析"><a href="#毛利及毛利率分析" class="headerlink" title="毛利及毛利率分析"></a>毛利及毛利率分析</h3><ol>
<li>根据主营业务收入和成本表格,把最近三年的主营业务毛利情况，划分维度，分别计算每一项的主营业务毛利结构，贡献及占比，同时根据单价和单位成本的情况，分析主营业务毛利及主营业务毛利率的情况及变动趋势。</li>
</ol>
<h3 id="期间费用分析"><a href="#期间费用分析" class="headerlink" title="期间费用分析"></a>期间费用分析</h3><ol>
<li>销售费用：比较最近三年销售方费用的绝对额与增长率;单位销售人员的销售费用花费。<br><em>销售费用是指企业销售商品和材料、提供劳务的过程中发生的各种费用，包括企业在销售商品过程中发生的保险费、包装费、展览费和广告费、商品维修费、预计产品质量保证损失、运输费、装卸费等以及为销售本企业商品而专设的销售机构(含销售网点，售后服务网点等)的职工薪酬、业务费、折旧费等经营费用。</em></li>
<li>管理费用：最近三年销售费用的绝对额与增长率;每年管理费用的销售占比;单位管理人员的薪酬;折旧与摊销。<br><em>管理费用包括：工资、折旧费、办公费、差旅费、运输费、保险费、租赁费、修理费、咨询费。</em></li>
<li>财务费用：根据取得的贷款合同情况，重新测算财务费用的金额，并与企业账面确认的财务费用进行比对，确保没有高利贷利息支出。<br><em>利息支出、财务费用、手续费、汇兑损益、资产减值损失等</em></li>
<li>研发费用：研发费用的销售占比<br><em>研发活动直接消耗的材料、燃料和动力费用。人工费用以及外聘研发人员的劳务费用。固定资产的折旧费或租赁费以及相关固定资产的运行维护、维修等费用。无形资产的摊销费用等</em></li>
</ol>
<h3 id="直接法进行现金流量分析"><a href="#直接法进行现金流量分析" class="headerlink" title="直接法进行现金流量分析"></a><span id="直接法进行现金流量分析">直接法进行现金流量分析</span></h3><ol>
<li><p>经营性现金流入分析：将经营性现金流入与主营业务收入相比较，看当期实际的销售回款与会计确认收入的差异<font color=red>(差异项一般都是应收和预收款项)。反映企业自身持续经营的能力。</font></p>
<p><em>经营期现金净流量=销售收入-付现成本-所得税=净利润+折旧等非付现成本=销售收入×(1-所得税税率)-付现成本×(1-所得税税率)+折旧等非付现成本×所得税税率。</em><br><em>筹资活动包括：吸收投资、发行股票、发行债券、由于吸收投资需要支付的利润、由于发行股票发放的现金股利、以及由于发行债券支付的利息等都属于筹资活动;投资活动包括：长期资产的构建(包括构建固定资产、无形资产等)、处置子公司及其他营业单位以及处置长期资产(固定资产和无形资产等)也属于投资活动;再用排除法来确认经营活动，即不属于筹资活动，也不属于投资活动则属于经营活动。</em></p>
</li>
<li><p>经营性现金流出分析：将经营性现金支出与主营业务成本相比较，看当期实际的成本付款与会计确认成本的差异，<font color=red>而差异项主要集中在存货应付和预付的科目上。反映费用控制水平和供应商管理水平。</font></p>
</li>
<li><p>投资性现金流量分析：反映公司在投资性现金流量上的净额，包括参股投资、金融投资、固定资产的采购与处置。<font color=red>关注投资性现金流量的大额波动如何对应战略规划。</font></p>
</li>
<li><p>筹资性现金流量分析：反映筹资性现金流量，具体包括金融债务的借与还，股权融资及回购，利息与分红等。<font color=red>关注负债的周转情况以及当期支付的银行利息费用情况，并且与财务费用进行比较。</font></p>
</li>
<li><p>造假分析案例：<font color=red>要注意以“其他”分类进一步掩盖交易实质的行为。</font>①将大额的存货采购放在投资性的现金支出；②应收票据、贴现费用没有反映到财务费用中；③购买理财产品没有反映到投资现金流当中；④通过其他应收款隐藏短期投资、转出投资收益。以”业务保证金”的名义将资金转入关联方，并计入”其他应收款”,待投资结束返回本金冲抵”其他应收款”，此时投资收益未入账且避税。<font color=red>不过关联方也需要对投资收益缴税，因此常见于避开投资风险监管、或者关联方持续亏损。</font>；⑤为了虚增利润而没有把成本费用计入当期损益中，而是挂在往来账户“其他应收款“中。⑥企业通过虚构的员工及员工借款，将企业资金套出。⑦股东通过资金拆借的方式，转移出它缴纳的资本金;即“抽逃出资”，并且借款合同齐全。⑧<font color=red>利用“其他应收款“延期确认费用或资产。</font>企业为了保持利润或调节利润,延期确认费用或资产(因为资产也要摊销,所以相当于延期确认费用)比如款项性质为设备款、工程款，就是企业购买长期资产，已经到货，但由于各种理由而没有确认这项资产。</p>
</li>
<li><p>造假应对：①按照审计程序确认。②查看业务勾稽项目。如：以业务的名义挂账，查看对应业务是否实际发生，实际生产。③查看内控制度是否有对相应的异常行为进行内部跟进处理。如：挂账时间长是否有内控处理。④对非关联方进行函证程序。⑤盘点监盘。</p>
</li>
</ol>
<h3 id="资产负债结构分析"><a href="#资产负债结构分析" class="headerlink" title="资产负债结构分析"></a>资产负债结构分析</h3><ol>
<li>资产结构和质量：关注流动资产比上非流动资产占比波动</li>
<li>负债结构和偿债压力：关注负债结构组成以及到期时间带来的偿债压力。</li>
<li>所有者权益构成与资产增长的趋势：如果资产的增长主要是由未分配利润增加驱动，这表明企业进入了这种良性循环的轨道。</li>
<li>资产负债科目分析：关注科目的增长率以及相关周转率，如：应收账款(汇款情况)、存货(是否滞销)、预收账款(企业对于供应链的谈判能力)、应付账款、银行贷款(银行评价)、固定资产(重/轻资产)、无形资产(专利情况)、其他费用(其他应收款、其他应付款、待摊费用、关联方往来款，关注舞弊情况)。</li>
</ol>
<h3 id="财务指标分析"><a href="#财务指标分析" class="headerlink" title="财务指标分析"></a>财务指标分析</h3><ol>
<li>盈利能力：主营业务毛利率、期间费用率、税前经营利润率、净利润率</li>
<li>周转能力：应收账款周转率、存货周转率、预付账款周转率、应收账款周转率、预收账款周转率</li>
<li>资产负债结构：流动比率、速动比率、资产负债率、权益比率</li>
<li>运营：总资产、收益率、净资产收益率</li>
</ol>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A2%E5%8A%A1%E6%8C%87%E6%A0%87%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F%E4%BF%AE%E6%AD%A3.png" alt="财务指标计算公式" style="zoom:50%;" /></p>
<h2 id="访谈工作重点"><a href="#访谈工作重点" class="headerlink" title="访谈工作重点"></a>访谈工作重点</h2><h3 id="CFO访谈"><a href="#CFO访谈" class="headerlink" title="CFO访谈"></a>CFO访谈</h3><ol>
<li>宏观了解财务业绩的总体情况、近三年的现金流状况、资产负债情况</li>
<li>关注科目：<br>①收入、成本、毛利、毛利率、期间费用率、净利润和净利润率；<br>②经营性现金流量、投资性现金流量和筹资性现金流量;<br>③流动资产，非流动资产、流动负债和非流动性负债以及所有者权益;</li>
</ol>
<h3 id="财务经理访谈"><a href="#财务经理访谈" class="headerlink" title="财务经理访谈"></a>财务经理访谈</h3><ol>
<li>由于主管做账，微观了解科目异常变动。了解主营业务情况、期间费用情况、现金流情况。</li>
<li>关注内容：<br>①主营业务收入、价格、销量、单位成本的波动以及它的未来发展趋势；<font color =red>持续盈利能力</font><br>②销售费用、销售费用率、管理人员薪酬、研发费用、折旧、招待费、广告费的波动及未来发展趋势；<font color =red>费用控制能力</font><br>③经营性现金流入与营业收入的匹配，经营性现金流量与净利润的匹配，现金流量的异常波动，现金流质量与其净利润的匹配情况。<font color =red>现金质量</font></li>
</ol>
<h3 id="与审计师的访谈"><a href="#与审计师的访谈" class="headerlink" title="与审计师的访谈"></a>与审计师的访谈</h3><ol>
<li>审计师是对公司财务状况、盈利能力、现金流量进行专业判断的第三方机构,如果审计师的专业性和独立性没有存疑，与审计师就审计发现的问题进行沟通能够极大的减轻尽调的财务尽调工作压力。</li>
</ol>
<h1 id="财务尽调报告框架"><a href="#财务尽调报告框架" class="headerlink" title="财务尽调报告框架"></a>财务尽调报告框架</h1><h2 id="标的公司基本情况"><a href="#标的公司基本情况" class="headerlink" title="标的公司基本情况"></a>标的公司基本情况</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ol>
<li>公司名称、注册资本、实收资本、成立时间、法定代表人、统一社会信用代码、公司类型、住所、主营业务。<br>注册登记和实际经营地不一致的应列示，主营业务根据公司实际开展情况列示，无需将营业执照范围全部列出。</li>
</ol>
<h3 id="历史沿革"><a href="#历史沿革" class="headerlink" title="历史沿革"></a>历史沿革</h3><p>根据企业提供的政府主管部门的批复证书、营业执照、公司章程以及章程修正案等工商登记备案文件，对公司的历史沿革进行梳理。</p>
<ol>
<li><p>设立：</p>
<p>公司由xx、xx共同发起设立，设立时认缴注册资本为人民币xx万元。公司首次出资业经xx会计师事务所审验，并由其于xx年xx月xx日出具了“xx号”的验资报告。公司xx年xx月xx日在xx工商行政管理局/市场监督管理局办妥设立登记手续，并取得注册号/统一社会信用代码为x的营业执照/企业法人营业执照。<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%8E%86%E5%8F%B2%E6%B2%BF%E9%9D%A9-%E8%AE%BE%E7%AB%8B.png" style="zoom: 50%;" /></p>
</li>
<li><p>增资</p>
<p>xx年xx月xx日，公司召开股东会并通过决议，将注册资本增至xx万元，其中xx出资xx万元，xx出资xX万元。本次增资业经xx会计师事务所审验，并由其于xx年xx月xx日出具了“xx号”的验资报告。公司xx年xx月xx日在xx工商行政管理局/市场监督管理局办妥变更登记手续。附股权结构列示</p>
</li>
<li><p>股权转让</p>
<p>xx年xx月xx日，公司召开股东会并通过决议，同意xx将所持公司xx万元股权以xx万元转让给xxx。公司xx年xx月xx日在xx工商行政管理局/市场监督管理局办妥变更登记手续。附股权结构列示</p>
</li>
<li><p>尽调重点</p>
<ol>
<li>注册资本是否已足额认缴，是否存在抽逃、挪用出资行为</li>
<li>账列股东、章程中的股东和工商登记的股东是否一致</li>
<li>公司注册资本的每次变化是否符合法律的规定、相应的手续是否完整</li>
<li>与注册资本相关的账务处理是否正确</li>
<li>股东是否具有相应的投资能力及是否存在委托持股情形，股东资格是否合法</li>
<li>股东间是否存在特殊约定，如固定回报、业绩回购条款等</li>
<li>历史上股权转让是否均已支付对价、是否完税、是否存在潜在纠纷;公司的境外股权是否存在被直接或间接转让的情况，是否依法申报纳税</li>
<li>是否存在通过增资或转让股份等形式实现高管或核心技术人员、员工、主要业务伙伴持股的情况</li>
</ol>
</li>
</ol>
<h3 id="组织架构"><a href="#组织架构" class="headerlink" title="组织架构"></a>组织架构</h3><p>分析目标公司目前的组织架构情况，并说明部门设置、职能分工情况。</p>
<h3 id="对外投资架构"><a href="#对外投资架构" class="headerlink" title="对外投资架构"></a>对外投资架构</h3><p>对外投资情况可通过画图或列表方式列示单位名称、投资时间、投资金额、持股比例、主营业务、简单财务状况及经营情况，展示出集团的业务分布、资产分布、资金来源、同业竞争等情况。</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>根据需要选择列示，如：实际控制人情况、董监高情况、核心技术人员情况以及其他需要说明<br>的情况。</p>
<h2 id="业务情况"><a href="#业务情况" class="headerlink" title="业务情况"></a>业务情况</h2><h3 id="核实主营业务涉及的资质和特殊经营情况"><a href="#核实主营业务涉及的资质和特殊经营情况" class="headerlink" title="核实主营业务涉及的资质和特殊经营情况"></a>核实主营业务涉及的资质和特殊经营情况</h3><h3 id="主要产品-或服务-及用途、特点"><a href="#主要产品-或服务-及用途、特点" class="headerlink" title="主要产品(或服务)及用途、特点"></a>主要产品(或服务)及用途、特点</h3><p>主要关注主要产品的销售收入占比情况;主要产品用途、特点;主要产品所面向的市场</p>
<h3 id="销售模式、渠道及主要客户"><a href="#销售模式、渠道及主要客户" class="headerlink" title="销售模式、渠道及主要客户"></a>销售模式、渠道及主要客户</h3><ol>
<li>销售模式、渠道：<br>在总体介绍的基础上，重点关注直销与经销情况，地区分布及内外销情况，定价政策，信用政策及结算方式，售后政策和品牌及贴牌情况。</li>
<li>主要客户：<br>侧重分析当前各销售模式下客户结构以及针对主要客户所进行的统计。</li>
</ol>
<h3 id="生产模式、工艺流程及产能利用情况"><a href="#生产模式、工艺流程及产能利用情况" class="headerlink" title="生产模式、工艺流程及产能利用情况"></a>生产模式、工艺流程及产能利用情况</h3><ol>
<li>生产模式：在总体介绍的基础上，分别就产品标准化程度，外购与外协情况，自行加工与委托加工情况进行深入的分析。</li>
<li>工艺流程图：</li>
<li>产能及利用率：</li>
</ol>
<h3 id="采购模式及主要供应商"><a href="#采购模式及主要供应商" class="headerlink" title="采购模式及主要供应商"></a>采购模式及主要供应商</h3><ol>
<li>生产模式</li>
<li>主要供应商：具体应包括各采购模式下供应商结构和主要供应商统计。</li>
</ol>
<h3 id="技术和研发"><a href="#技术和研发" class="headerlink" title="技术和研发"></a>技术和研发</h3><ol>
<li>主要生产技术；产品核心技术；正在从事的研发项目；研发费用的构成及其占营业收入的比例；技术创新机制</li>
</ol>
<h2 id="行业情况"><a href="#行业情况" class="headerlink" title="行业情况"></a>行业情况</h2><h3 id="行业概况"><a href="#行业概况" class="headerlink" title="行业概况"></a>行业概况</h3><ol>
<li>行业政策分析：业主管部门和监管体制，以及行业的主要法律法规和政策。</li>
<li>行业周期；行业发展趋势；</li>
<li>行业壁垒：技术壁垒、资金壁垒和人才壁垒；</li>
<li>影响行业发展因素：有利因素和不利因素；</li>
<li>行业特点：行业的技术特点、技术水平、行业特有的经营模式以及行业的周期性、区域性和季节性的特征。</li>
</ol>
<h3 id="行业上下游情况"><a href="#行业上下游情况" class="headerlink" title="行业上下游情况"></a>行业上下游情况</h3><p>主要关注与上下游行业的关联性以及上下游行业的发展状况对本行业及其发展前景的影响。</p>
<h3 id="目标公司在行业中的地位及特点"><a href="#目标公司在行业中的地位及特点" class="headerlink" title="目标公司在行业中的地位及特点"></a>目标公司在行业中的地位及特点</h3><p>主要分析目标公司的市场地位、市场占有率及变化趋势。</p>
<h3 id="目标公司主要竞争对手及公司竞争优劣势"><a href="#目标公司主要竞争对手及公司竞争优劣势" class="headerlink" title="目标公司主要竞争对手及公司竞争优劣势"></a>目标公司主要竞争对手及公司竞争优劣势</h3><p>主要分析行业竞争格局，行业中的主要竞争对手，本身的竞争优势和竞争劣势等。</p>
<h2 id="财务情况提示"><a href="#财务情况提示" class="headerlink" title="财务情况提示"></a>财务情况提示</h2><h2 id="会计报表摘要"><a href="#会计报表摘要" class="headerlink" title="会计报表摘要"></a>会计报表摘要</h2><table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BC%9A%E8%AE%A1%E6%8A%A5%E8%A1%A8%E6%91%98%E8%A6%81-%E8%B5%84%E4%BA%A7%E8%B4%9F%E5%80%BA%E8%A1%A8.png" style="zoom:40%;" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BC%9A%E8%AE%A1%E6%8A%A5%E8%A1%A8%E6%91%98%E8%A6%81-%E5%88%A9%E6%B6%A6%E8%A1%A8.png" style="zoom:40%;" /></td>
    </tr>
</table>

<h3 id="资产负债表"><a href="#资产负债表" class="headerlink" title="资产负债表"></a><strong>资产负债表</strong></h3><p>流动资产:货币资金、流动资产合计；非流动资产:长期股权投资、非流动资产合计；资产总计；流动负债:短期借款、流动负债合计；非流动负债:长期借款、非流动负债合计；负债合计；所有者权益:实收资本(股本)、所有者权益合计；负债和所有者权益总计。</p>
<h3 id="利润表"><a href="#利润表" class="headerlink" title="利润表"></a><strong>利润表</strong></h3><p>营业总收入；营业总成本；营业利润(亏损以“-”号填列)：加:营业外收入、减:营业外支出；利润总额(亏损总额以“-”号填列)、减:所得税费用；净利润(净亏损以“-”号填列；其他综合收益的税后净额；综合收益总额。</p>
<h4 id="主营业务收入分析（已前置描述）"><a href="#主营业务收入分析（已前置描述）" class="headerlink" title="主营业务收入分析（已前置描述）"></a><a href="#主营业务分析">主营业务收入分析（已前置描述）</a></h4><h4 id="主营业务成本分析（已前置描述）"><a href="#主营业务成本分析（已前置描述）" class="headerlink" title="主营业务成本分析（已前置描述）"></a><a href="#主营业务分析">主营业务成本分析（已前置描述）</a></h4><h4 id="期间费用分析（已前置描述）"><a href="#期间费用分析（已前置描述）" class="headerlink" title="期间费用分析（已前置描述）"></a><a href="#主营业务分析">期间费用分析（已前置描述）</a></h4><h3 id="现金流量表"><a href="#现金流量表" class="headerlink" title="现金流量表"></a><span id="现金流量表核查">现金流量表</span></h3><h4 id="经营性现金流入分析"><a href="#经营性现金流入分析" class="headerlink" title="经营性现金流入分析"></a><a href="#直接法进行现金流量分析">经营性现金流入分析</a></h4><h4 id="经营性现金流出分析"><a href="#经营性现金流出分析" class="headerlink" title="经营性现金流出分析"></a><a href="#直接法进行现金流量分析">经营性现金流出分析</a></h4><h4 id="投资性现金流量分析"><a href="#投资性现金流量分析" class="headerlink" title="投资性现金流量分析"></a><a href="#直接法进行现金流量分析">投资性现金流量分析</a></h4><h4 id="筹资性现金流量分析"><a href="#筹资性现金流量分析" class="headerlink" title="筹资性现金流量分析"></a><a href="#直接法进行现金流量分析">筹资性现金流量分析</a></h4><h2 id="三大报表科目核查"><a href="#三大报表科目核查" class="headerlink" title="三大报表科目核查"></a>三大报表科目核查</h2><h3 id="货币资金的系统性分析-核查"><a href="#货币资金的系统性分析-核查" class="headerlink" title="货币资金的系统性分析(核查)"></a>货币资金的系统性分析(核查)</h3><h4 id="核查的科目和维度："><a href="#核查的科目和维度：" class="headerlink" title="核查的科目和维度："></a>核查的科目和维度：</h4><ol>
<li><p>货币资金在报表上体现为库存现金、银行存款、其他货币资金及可随时转换的银行理财产品(一般报表上体现在其他流动资产中)。因此在条件允许的情况下，资金流水核查范围包括尽调标的公司的银行账户，控股股东、实际控制人、标的公司主要关联方、董监高及关键岗位人员等开立或实际控制的银行账户，以及与前述银行账户发生异常往来的关联方、员工开立或实际控制的银行账户。对于标的公司使用企业支付宝、微信、PayPal等第三方平台收付款的，还应取得该类账户明细，视同自有银行账户进行资金流水核查。</p>
</li>
<li><p>银行流水的核查主要通过金额和性质两个维度展开。<font color=red>依据标的公司的收入水平等指标作为参考，达到一定标准以上的资金流水全部核查，一定标准以下的流水进行随机抽查。</font><br>①<font color=red>涉及PM、TE、SAD的设定基准及比例。</font>如：选择使用基金净资产作为设定重要性水平（PM）的基准，且考虑到公募基金是一个受中国证监会严格监管的行业，规定当估值错误偏差达到基金份额净值的0.5%时，基金管理人应当公告，并报中国证监会备案。因此，我们选择基金净资产的0.5%计算重要性水平，以50%的PM作为可容忍误差（TE），将大于PM5%的审计差异记录于SAD。<br>②由于市场行情的变化，一些基金公司已经不再享受市场红利，对于盈利企业，根据GAM的要求，PM设为5% of PBT，对于其他企业，PM设为0.5% of Revenues或1%NAV；当TE为PM的50%时，SAD名义金额设为PM的5%，当TE为PM的75%时，SAD名义金额设为PM的3%。</p>
</li>
</ol>
<h4 id="核查方式："><a href="#核查方式：" class="headerlink" title="核查方式："></a>核查方式：</h4><ol>
<li><strong>交易对手方的核查：</strong>通过采购、销售核查，了解企业的上下游公司,计算复核主要客户与供应商占比、从面分析业务及产品，如果公司的上下游企业知名度高且长期稳定，则说明其产品品质有保证，坏帐可能性不高，经营管理水平较高;如果公司上下游均为业内不知名小公司，甚至注册时间较短、地区集中度高等等，则需要注意交易对手是否为同一控制人下的关联公司、甚至空壳公司。</li>
<li><strong>核查民间融资行为：</strong>通过对异常资金核查，可以了解公司是否参与民间借贷。如果一家公司存在整数金额为大额交易且交易对手为个人、汇款摘要中带有”投资””咨询””担保”等字眼;或者与非上下游或关联单位之间有大额资金往来;或者定期或频繁的大额个人账户资金往来等，公司则有参与民间融资的嫌疑。如果民间融资占比不大，整改成本较小，则风险可控。</li>
<li><strong>数据核对及业务特点分析：</strong>在三大财务报表基础上，仍需取得银行流水、银行对账单、大额合同及相关票据,银行对账单应显示交易对方，将银行日记账与对账单进行核对。在数据核对的同时需须结合公司商业模式、业务特点、上下游关系的基础上进行判断。</li>
<li><strong>整体资金来源与支出分析：</strong>货币资金的增减变动与公司业务循环密切相关，公司资金的运营过程体现在:从资金流入公司形成货币资金，通过销售收回资金，进行成本补偿减除各种费用后最终确定利润，该部分利润与其他流入资金一起进入下一轮投资，从而形成公司的资金不断循环、构成资金周转与公司的持续运。<br>①资金的收入：创始股东的投资、历史融资的金额、对外的借款、经营资金的流入；<font color =red>主要关注各类资金的成本以及到期偿债的时间，关注经营性现金的流入，以及分析公司通过实际经营活动运用资源创造价值的能力。</font><br>②资金的支出：原材料和存货等生产采购、员工薪酬支出、研发投入、固定资产投入、销售费用、管理费用等期间费用。<font color =red>结合公司业务类型判断整体支出的合理性，如：研发类公司的资金是否主要为研发支出、是否在办公装修、豪车购置等方面有大量的支出、销售费用的支出是否与收入相匹配、管理费用是否与公司现阶段的实际情况相匹配、是否存在大额的其他支出等异常情况、将收入和支出相结合，整体分析看经营净现金流量是否为正向资金缺口、资金收入主要来自于历史融资还是对外借款、根据资金花费来估算公司现有的资金可以维持的经营时间、了解创始人对于融资不达预期时的应对措施，并对这种应对措施做相应的可行性评估，从而确定下一步核查工作的重点。</font></li>
<li><strong>差异点核查：</strong>在核查中应重点关注相关文件记载信息不一致的情况，具体包括但不限于银行日记账与银行对账单记载信息不一致;收/付款方与合同、发票显示的交易对方名称不一致;除此之外还要关注银行流水发生额未记账，或银行日记账记载了虚假流水;存在银行账户不受公司控制或未在公司财务核算中反映的情况，或存在公司银行开户数量等与业务需要不符的情况等。</li>
<li><strong>异常变动的关注：</strong>短期内大额资金频繁转入、转出，销售/采购金额激增、交易金额与交易对手方的业务规模明显不匹配、大额购入无形资产，如：商标、专利、技术咨询服务等、相关交易缺乏合理性、大额异常的退货单、交易备注为代垫款、代付款、借款、还款、赔款、罚款等。</li>
<li><strong>关联方资金往来异常：</strong>在尽调过程中，重点关注与控股股东、实际控制人、董事、监事、高管、关键岗位人员等是否存在异常大额资金往来情况。对于发现的异常事项，应综合相关人员访谈、各种证据资料独立判断，必要时需对交易对方、实际收/付款方进行工商资料查询、访谈、走访等方式深入核查，并作出重点提示。</li>
<li><strong>对个人资金流水的核查：</strong>根据公司流水资金往来情况确定个人资金流水核查范围，如发现较多与相关个人的资金往来、且公司财务内控非常不规范的，就需要重点关注是否存在个人或其他关联方对公司的资金占用或利益输送的行为。</li>
</ol>
<h3 id="应收账款和其他应收款"><a href="#应收账款和其他应收款" class="headerlink" title="应收账款和其他应收款"></a>应收账款和其他应收款</h3><ol>
<li>是否存在关联方资金占用，其必要性、公允性(计利息情况);</li>
<li>分析款项的是否真实、是否存在无票费用、涉诉款项、投资性款项挂账等;</li>
<li>关注是否通过体外资金循环、代垫成本费用粉饰业绩。在数据调取上，该部分可以根据获取的合同、订单，比较主要客户的结算周期与账面应收账款账龄是否存在异常。</li>
</ol>
<h3 id="存货"><a href="#存货" class="headerlink" title="存货"></a>存货</h3><ol>
<li>查阅最近一次盘点记录，关注存货的分类及变化趋势，并关注发出商品、分期付款发出商品的分布，就存货的滞销和残损进行统计，通过分析存货状况及库龄，判断存货跌价准备计提方法是否合理、计提金额是否充分。</li>
<li>具体包括原材料、库存、商品、在产品。分析最近三年趋势。</li>
</ol>
<h3 id="长期投资"><a href="#长期投资" class="headerlink" title="长期投资"></a>长期投资</h3><ol>
<li>长期投资，应关注控股企业验证其投资比例及应占有的权益，并了解投资的背景及其控制力(特别是国有企业)。</li>
</ol>
<h3 id="固定资产"><a href="#固定资产" class="headerlink" title="固定资产"></a>固定资产</h3><ol>
<li>了解固定资产的分类，在与设备管理部门核对资料的基础上，区分在用、停用、残损、无用的固定资产，并将设计生产能力和实际生产能力相比较，对其折旧方法进行认真核对。对于固定资产折旧方法，可以与同行业可比上市公司固定资产折旧方法进行比较。</li>
<li>房屋及建筑物情况。列示房屋和建筑物名称、账面原值、产权证号、用途、启用日期、建筑面积和单位造价。</li>
<li>主要设备情况。列示主要设备的名称、规格型号、启用日期、账面原值和累计折旧。</li>
<li>固定资产折旧政策的稳健性、折旧计提和减值准备计提是否充分，账面价值是否公允;</li>
<li>设备的用置情况、设备产能利用率以及设备规模是否与生产经营活动相匹配</li>
</ol>
<h3 id="在建工程"><a href="#在建工程" class="headerlink" title="在建工程"></a>在建工程</h3><ol>
<li>应关注工程项目的预算和完工程度，考察是否存在停工工程以及工程项目的具体用途</li>
<li>在建工程是否具有商业实质，账面价值是否公允，是否存在利用资产隐藏成本费用的嫌疑;</li>
<li>在建工程结转园定资产时点情况;</li>
<li>是否存在已长期停工的在建工程，停建工程利息资本化和减值计提情况</li>
</ol>
<h3 id="无形资产"><a href="#无形资产" class="headerlink" title="无形资产"></a>无形资产</h3><ol>
<li>应关注无形资产的种类及取得途径，无形资产的寿命，并考察无形资产的计价依据是否合理。在这一部分，我们重点关注的是是否存在股东投入时权属存在瑕疵，以及出资额虚高、资产是否可用、闲置等。</li>
<li>土地使用情况。列示账面原值、产权证号、用途、起止日、面积、单价。</li>
</ol>
<h3 id="借款"><a href="#借款" class="headerlink" title="借款"></a>借款</h3><ol>
<li>主要关注偿权人、借款性质和借款条件，以及是否正常偿还利息，是否可以豁免或进行债务重组，以及是否在转贷行为，金额及影响，借款是否计息，担保物权属主体等情况，适当补充列示。</li>
<li>列示借款方的名称、借款金额、起止日期、担保情况等</li>
</ol>
<h3 id="应付账款"><a href="#应付账款" class="headerlink" title="应付账款"></a>应付账款</h3><ol>
<li>为分析应付账款的集中度，应对最近三年度应付账款余额前十名进行统计并重点关注。在审查过程中，应关注关注实际付款和合同或订单条款是否一致，付款政策与合同信用期是否一致，并结合预付款项的商业逻辑，预付内容、金额以及付款进度与行业惯例是否吻合；是否存在对关联方的资金依赖、自身流动性风险、对独立经营能力的影响。</li>
</ol>
<h3 id="销售收入及成本"><a href="#销售收入及成本" class="headerlink" title="销售收入及成本"></a>销售收入及成本</h3><ol>
<li>最近3-10年的销售收入、销售量、单位售价、单位成本和毛利率的变化趋势、以及最近3-10年的产品结构变化趋势。企业的大客户变化，还有销售集中度、关联交易和非关联交易的区别，以及它对业务的影响。</li>
</ol>
<h3 id="期间费用"><a href="#期间费用" class="headerlink" title="期间费用"></a>期间费用</h3><ol>
<li>最近5-10年的费用总额、费用水平的趋势，并且分析了解原因，以及企业主要费用，如：人工成本、折旧等费用的变化。</li>
</ol>
<h3 id="其他业务利润"><a href="#其他业务利润" class="headerlink" title="其他业务利润"></a>其他业务利润</h3><ol>
<li>最近3-5年的其他业务收入来源，是否稳定。</li>
</ol>
<h3 id="投资收益"><a href="#投资收益" class="headerlink" title="投资收益"></a>投资收益</h3><ol>
<li>近年对外投资以及各项投资的报酬率的统计汇总。</li>
</ol>
<h3 id="营业外收益"><a href="#营业外收益" class="headerlink" title="营业外收益"></a>营业外收益</h3><ol>
<li>异常的情况核查。</li>
</ol>
<h3 id="收入核查"><a href="#收入核查" class="headerlink" title="收入核查"></a>收入核查</h3><ol>
<li>需要确保收入数据为真实收入，需要考察收入确认的一般原则、针对不同销售模式收入确认的具体原则可以与同行业可比上市公司收入确认原则进行比较，借此分析财务报表是否有虚增收入的嫌疑。此外在核查时还需要同时调取购销合同、发票(增值税、营业税发票等)、资金回款、验收或运费单据、纳税申报表和缴纳相应的税款证明。</li>
</ol>
<h3 id="成本核查"><a href="#成本核查" class="headerlink" title="成本核查"></a>成本核查</h3><ol>
<li>要确保成本数据为真实支出，因此在核查时需要同时调取有配比的原材料购进和消耗(含包装物);购进原材料时开具的增值税发票;对重要和紧俏的原材料的预付款;正常的购销业务付款周期证明材料和有仓管签字的有数量金额的入库单据。</li>
</ol>
<h3 id="费用核查"><a href="#费用核查" class="headerlink" title="费用核查"></a>费用核查</h3><ol>
<li><p><strong>销售费用：</strong><br>①结合结合行业销售特点、销售方式、销售操作流程等事项，分析目标公司销售费用的完整性、合理性。<br>②分析销售费用明细，与业务收入的占比及变动趋势，分析业务发展与商业模式的合理性。<br>③关注是否具备真实合理的合同基础及支付依据，注意关注销售费用中的现金交易，以及向代理商或居间商支付佣金的入账情况。</p>
</li>
<li><p><strong>管理费用：</strong><br>①管理费用各项明细变动情况。<br>②是否具备真实合理的合同基础及支付依据，注意重点关注费用中与质量、安全、环保相关的支出，是否存在相关领域重大违法违规行为的潜在风险。</p>
</li>
<li><p><strong>财务费用：</strong><br>①各明细变动趋势是否与资产负债表相关项目的规模及变动趋势一致。<br>②如存在较大银行借款或付息债务，结合利息支出测算，分析大额利息资本化的合理性。</p>
</li>
</ol>
<h3 id="现金流量表核查"><a href="#现金流量表核查" class="headerlink" title="现金流量表核查"></a><a href="#现金流量表核查">现金流量表核查</a></h3><h3 id="表外项目分析"><a href="#表外项目分析" class="headerlink" title="表外项目分析"></a>表外项目分析</h3><ol>
<li>包括：对外担保、合作意向、已抵押资产、未执行完毕的合同、贴现、银行授信额度。</li>
<li>资产受限情况。列示对应银行、资产类别、抵押/受限金额、说明。</li>
<li>对外担保。列示被担保方名称、对应银行、担保金额、担保起始日、担保到期日、是否已经履行完毕。</li>
</ol>
<h3 id="诉讼、仲裁事项-略"><a href="#诉讼、仲裁事项-略" class="headerlink" title="诉讼、仲裁事项(略)"></a>诉讼、仲裁事项(略)</h3><h3 id="其他承诺及或有事项"><a href="#其他承诺及或有事项" class="headerlink" title="其他承诺及或有事项"></a>其他承诺及或有事项</h3><h2 id="主要财务指标分析"><a href="#主要财务指标分析" class="headerlink" title="主要财务指标分析"></a>主要财务指标分析</h2><h3 id="盈利能力指标分析"><a href="#盈利能力指标分析" class="headerlink" title="盈利能力指标分析"></a>盈利能力指标分析</h3><table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%9B%88%E5%88%A9%E8%83%BD%E5%8A%9B%E6%8C%87%E6%A0%87%E5%88%86%E6%9E%90.png" alt="盈利能力指标分析" style="zoom:50%;" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%94%B6%E7%9B%8A%E8%B4%A8%E9%87%8F.png" alt="收益质量"  style="zoom:80%;"/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%8E%B0%E9%87%91%E6%B5%81%E9%87%8F.png" alt="现金流量" style="zoom:80%;" /></td>
    </tr>
</table>

<p><strong><font color =red>主要关注：毛利率、净利率、期间费用率、净资产收益率、净利润率。结合各盈利能力指标的变化趋势，分析各年度盈利能力和变动情况，分析利润结构和利润来源，从而评估盈利能力的持续性。</font></strong></p>
<h3 id="偿债能力指标分析"><a href="#偿债能力指标分析" class="headerlink" title="偿债能力指标分析"></a>偿债能力指标分析</h3><table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E7%9F%AD%E6%9C%9F%E5%81%BF%E5%80%BA%E8%83%BD%E5%8A%9B%E5%88%86%E6%9E%90.png" alt="短期偿债能力" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B5%84%E6%9C%AC%E7%BB%93%E6%9E%84-%E9%95%BF%E6%9C%9F%E5%81%BF%E5%80%BA%E8%83%BD%E5%8A%9B%E4%BF%AE%E6%AD%A3.png" alt="长期偿债能力" /></td>
    </tr>
</table>

<p><strong><font color =red>主要关注：资产负债率、流动比率、诉动比率、权益重数和利息保障倍数。结合企业的现金流量、资信状况、可融资渠道和授信额度、表内负债、表外融资以及或有负债等情况分析债务的结构和规模。分析各年度偿债能力及其变动情况，从而评估偿债能力和偿债风险。</font></strong></p>
<h3 id="运营能力指标分析"><a href="#运营能力指标分析" class="headerlink" title="运营能力指标分析"></a>运营能力指标分析</h3><p><img src="C:/Users/10939/AppData/Roaming/Typora/typora-user-images/image-20240611143114561.png" alt="周转率" style="zoom: 25%;" /></p>
<p><strong><font color =red>主要关注：资产周转率、存货周转率、应收账款周转率。结合市场发展、行业竞争状况、生产模式、物流管理、销售模式和赊销政策等因素，分析各个年度运营能力及其变动情况，从而评估企业的经营风险以及可持续经营的能力。</font></strong></p>
<h3 id="财务弹性指标分析"><a href="#财务弹性指标分析" class="headerlink" title="财务弹性指标分析"></a>财务弹性指标分析</h3><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%B4%A2%E5%8A%A1%E5%BC%B9%E6%80%A7%E6%8C%87%E6%A0%87.png" alt="财务弹性指标" /></p>
<h3 id="纵向比较与横向比较"><a href="#纵向比较与横向比较" class="headerlink" title="纵向比较与横向比较"></a>纵向比较与横向比较</h3><ol>
<li><p><strong>纵向比较—成长能力比较：</strong><br><strong><font color =red>同比增长率中，常用的公式有营收同比增长率、归母净利润同比增长率、净资产同比增长率、总资产同比增长率等。</font></strong><br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%88%90%E9%95%BF%E8%83%BD%E5%8A%9B%E6%8C%87%E6%A0%87.png" alt="成长能力指标"></p>
</li>
<li><p><strong>横向比较—与同行业上市公司比较</strong></p>
</li>
</ol>
<h2 id="关联方和关联交易"><a href="#关联方和关联交易" class="headerlink" title="关联方和关联交易"></a>关联方和关联交易</h2><ol>
<li><p><strong>关联方及关联关系。</strong>列示关联方的名称，与目标公司的具体关系。从而确认公司与关联方是处于同一实控人之下，还是属于有股权投资关系，或是有其他的一致行动协议等等。</p>
</li>
<li><p><strong>关联交易</strong></p>
<ol>
<li><strong>采购情况：</strong>列示关联方名称、采购内容、定价政策、3-5或3-10年的采购额、以及采购额在整个所有采购项目中的占比。</li>
<li><strong>销售情况：</strong>列示关联方名称、销售内容、定价政策、3-5或3-10年的销售额、以及销售额在整个所有销售项目中的占比。</li>
<li><strong>租赁情况：</strong>列示关联方名称、资产类别、3-5或3-10年的租赁费/收入</li>
<li><strong>担保情况：</strong>列示担保方名称、被担保方名称、担保金额、担保起始日、担保到期日、是否已经履行完毕</li>
<li><strong>资金拆借：</strong>列示拆出方、拆入方、拆借金额、拆借起始日、拆借到期日、说明</li>
<li><strong>其他关联交易</strong></li>
</ol>
</li>
<li><strong>关联方应收应付款项</strong><ol>
<li>应收账款、预收款项、应付账款、预付款项、其他应收款、其他应付款、应收票据、应付票据</li>
</ol>
</li>
</ol>
<h2 id="税收政策及风险"><a href="#税收政策及风险" class="headerlink" title="税收政策及风险"></a>税收政策及风险</h2><ol>
<li><strong>涉税情况</strong><ol>
<li>主要税种及税率、各期缴纳税款情况、各期末应交税费余额</li>
<li>均涉及所得税、增值税、城市维护建设税、教育税附加、地方教育费附加等税种</li>
<li>结合财务报表，提取各期末应交税费余额</li>
</ol>
</li>
<li><strong>税收优惠政策</strong><ol>
<li>取得公司税收优惠或财政补贴资料，核查公司享有的税收优惠或财政补贴是否符合财政管理部门和税收管理部门的有关规定，调查税收优惠或财政补贴的来源、归属、用途及会计处理等情况，关注税收优惠期或补贴期及其未来影响，分析公司对税收政策的依赖程度和对未来经营业绩、财务状况的影响。</li>
</ol>
</li>
<li><strong>调查期间内纳税奖罚情况</strong></li>
<li><strong>税收风险提示</strong><ol>
<li>可能通过账外核算、推迟确认收入、少确认收入、加速计提折旧、关联交易转移收入等方式隐瞒利润，或不按时申报税金等方式延迟纳税;</li>
<li>为粉饰业绩，可能通过虚构客户、虚增销售、提前确认收入等方式虚增利润，导致多缴税款;</li>
<li>股份改制涉及公司控股架构和业务运营模式、股权或者是资产的剥离、转移等，涉及大量税务问题。如：若用资本公积或者留存收益折股，需关注自然人股东缴纳个人所得税的风险以及是否符合申请缓缴的条件等;</li>
<li>非货币性资产出资、不公允增资、股份支付相关的持股平台及股份代持等，所带来的税务风险;</li>
<li>拟进行的并购重组方案可能带来的税务风险。</li>
</ol>
</li>
</ol>
<h2 id="估值过程及分析"><a href="#估值过程及分析" class="headerlink" title="估值过程及分析"></a>估值过程及分析</h2><p><strong>明确估值的假设和前提</strong></p>
<table>
    <tr>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%B8%82%E5%9C%BA%E6%B3%95%E4%BC%B0%E5%80%BC.png" alt="市场法估值" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%94%B6%E7%9B%8A%E6%B3%95.png" alt="收益法" /></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BC%B0%E5%80%BC%E6%88%90%E6%9C%AC%E6%B3%95.png" alt="成本法" /></td>
    </tr>
</table>




]]></content>
      <categories>
        <category>财务尽调</category>
      </categories>
      <tags>
        <tag>财务尽调</tag>
      </tags>
  </entry>
  <entry>
    <title>法考—刑法—柏浪涛</title>
    <url>/post/63791/</url>
    <content><![CDATA[<p><table>
    <tr>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%951.png" width=120/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%952.png" width=120/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%953.png" width=120/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%954.png" width=120/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%955.png" width=120/></td>
        <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E6%B3%95%E8%80%83%E7%9B%AE%E5%BD%956.png" width=120/></td>
</table><br><strong>通过典型的案例建构行为模型；前苏联：旧理论；德日：新理论(官方立场|代表人物：清华大学张明楷)</strong></p>
<h1 id="1-刑法总论"><a href="#1-刑法总论" class="headerlink" title="1 刑法总论"></a>1 刑法总论</h1><h2 id="1-1-刑法论"><a href="#1-1-刑法论" class="headerlink" title="1.1 刑法论"></a>1.1 刑法论</h2><h3 id="第一节-刑法的解释"><a href="#第一节-刑法的解释" class="headerlink" title="第一节 刑法的解释"></a>第一节 刑法的解释</h3><h4 id="刑法解释："><a href="#刑法解释：" class="headerlink" title="刑法解释："></a><strong>刑法解释：</strong></h4><p><strong>解释法律、适用法律，而不是如何批判法律、完善法律</strong></p>
<ul>
<li>解释的对象是法律文本，是现行刑法规范。包括：一、1997 年10 月1 日生效的刑法典；刑法修正案是对刑法典作的小修小补，至今巳有11 个刑法修正案。二、一部单行刑法。</li>
<li>解释方法包括解释技巧和解释理由。解释技巧负责生产结论，解释理由负责为结论提供论证理由。</li>
</ul>
<h4 id="解释技巧："><a href="#解释技巧：" class="headerlink" title="解释技巧："></a><strong>解释技巧：</strong></h4><ol>
<li>平义解释</li>
<li>扩大解释（扩张解释）</li>
<li>缩小解释（限制解释）</li>
<li>类推解释：<font color =red>允许扩大解释，禁止类推解释，但有例外</font>；(另解：<sup><font color =blue>Adobe</font></sup>即不符合刑法文字的可能含义)</li>
<li>反义解释：A和非A</li>
</ol>
<h4 id="解释理由："><a href="#解释理由：" class="headerlink" title="解释理由："></a><strong>解释理由：</strong></h4><ol>
<li>文理解释</li>
<li>体系解释：一词多义、多词一义、同类解释</li>
<li>当然解释：举重以明轻 | 举轻以明重；两个事项必须是性质相同、程度不同的关系；法益比较、轻重比较</li>
<li>目的解释：就是用<a href="#法益">法益</a>来解释罪名的构成要件。刑法的保护目的就是法益<br> <strong>注：解释技巧之间是排斥关系，即解释技巧只能选择一种；而解释理由之间是并存关系，且越多越好</strong><br> 前者负责生产结论，后者负责论证结论的合理性，要求二者正反推均成立。如：解释技巧生产结论，但论证理由不充分，则不采纳；解释理由论证解释技巧合理，但技巧为类推解释，则不采纳。</li>
</ol>
<h3 id="第二节-刑法的功能"><a href="#第二节-刑法的功能" class="headerlink" title="第二节 刑法的功能"></a>第二节 刑法的功能</h3><ol>
<li><p><span id="法益">保护法益</span>：法益，是指刑法保护的利益。一个罪名的保护法益也称为保护客体或犯罪客体。犯罪是指侵害法益的行为。</p>
</li>
<li><p>保障人权：严格依据刑法来定罪处罚。即刑法在打击犯罪、保护法益的同时，也应保障人权。</p>
<font color =red>若一味侧重保护法益，则容易认定为有罪。若一味侧重保障人权，则容易认定为无罪。二者冲突时，优先保障人权。</font>

</li>
</ol>
<h3 id="第三节-刑法的原则"><a href="#第三节-刑法的原则" class="headerlink" title="第三节 刑法的原则"></a>第三节 刑法的原则</h3><h4 id="罪刑法定原则"><a href="#罪刑法定原则" class="headerlink" title="罪刑法定原则"></a>罪刑法定原则</h4><ul>
<li>法无明文规定不为罪，法无明文规定不处；目的是保障人权。<ol>
<li><strong>思想基础：</strong><br>a. 民主主义：意指只有民主产生的立法机关才有权规定犯罪与刑罚。<br>b. 自由主义（最重要的）：也称为尊重人权主义，意指<font color =red>法律应当具有预测可能性</font>，使国民知晓什么是犯罪，什么不是犯罪，以保障个人的行动自由。这种思想也称为国民预测可能性原理。<br>例：新中国1979年第一部刑法典出台前使用反革命条例，以致出现“反革命梦奸罪”、“反革命不讲卫生罪”。79年刑法典出台后，由于部分罪名未明确，如：流氓罪，投机倒把罪（皆与97年废除），因此未列入罪刑法定原则（97年列入）。</li>
<li><strong>基本内容：</strong><br>a. 成文的罪刑法定：1. 法律主义：如全国人大制定的基本法律、国务院制定的行政法规。只有全国人大及其常委会有资格规定犯罪和刑法，而国务院及两高的司法解释均没有立法权，只有解释权。2. 禁止习惯法：即不能像民法一样适用习惯法，民法是意思自治原则（即双方可以商量解决），而刑法是罪刑法定原则。<br>b. 事前的罪刑法定：禁止溯及既往、刑法的时间效力<br>c. 严格的罪刑法定：禁止类推解释，但允许扩大解释<br>d. 确定的罪刑法定：指罪刑规范应当明确、适当。(1) 明确性要求；(2) 禁止绝对不定刑及绝对不定期刑：即不明确刑罚的种类和期刑的刑期；(3) 禁止处罚不当罚的行为：体现刑法的谦抑性/补充性要求：即民法、行政法无济于事、无法规制后才适用刑法，因为刑罚是最严厉的制裁措施；(4) 禁止不均衡、残虐的刑罚：即刑罚应与罪行相适应， 重罪重判， 轻罪轻判，广义上可以包含罪刑相适应原则。<br><strong>注*：民法和刑法不是对立排斥关系，而是位阶关系（适用顺序而言），如：刑事附带民事诉讼制度，即如果罪行既符合民法又符合刑法，以刑法为主，附带民事诉讼。民法和刑法基本法律，地位平等。</strong></li>
</ol>
</li>
</ul>
<h4 id="罪刑相适应原则"><a href="#罪刑相适应原则" class="headerlink" title="罪刑相适应原则"></a>罪刑相适应原则</h4><ul>
<li>又罪刑均衡原则，即刑罚应与罪行相适应， 重罪重判， 轻罪轻判</li>
<li><strong>量刑标准包含法益侵害性和人身危险性（再犯可能性）</strong></li>
<li><strong>法益侵害性</strong>是针对已然发生的犯罪事实，又报应刑或责任刑。<strong>人身危害性</strong>是针对未然的犯罪事实，预防未来再犯的犯罪事实，又预防刑或目的刑。<br>如：1. 入室抢劫与普通抢劫重，因为多了法益侵害性（侵入住宅）；2. 累犯从重处罚，因为多了人身危险性（再犯可能性）；3. 投案自首从宽处罚是由于再犯可能性降低。<br><strong>刑罚个别化理念：</strong>即再犯可能性因人而异，如：为了吸毒偷钱与为了治病偷钱。</li>
</ul>
<h3 id="第四节-刑法的效力"><a href="#第四节-刑法的效力" class="headerlink" title="第四节 刑法的效力"></a>第四节 刑法的效力</h3><h4 id="一、刑法的空间效力"><a href="#一、刑法的空间效力" class="headerlink" title="一、刑法的空间效力"></a>一、刑法的空间效力</h4><p><strong>（一）在中国境内犯罪：属地管辖原则</strong></p>
<ol>
<li>“我国领域”包括领土、领水、领空<br><strong>a. 旗国主义。</strong>仅航空器（飞机）与船舶属于，国际列车、国际长途汽车不属于。</li>
<li>属地管辖原则之“地”，既包括犯罪行为地，也包括犯罪结果地。<br><strong>a. 犯罪行为。</strong>从共同犯罪上分，包括<strong>实行</strong>行为地、<strong>教唆</strong>行为地、和<strong>帮助</strong>行为地；从犯罪形态上分，包括<strong>预备</strong>行为地和<strong>实行</strong>行为地。上述行为中，只要有一项行为发生在国内，其他相关行为即使发生在国外，也认为是在我国领域内犯罪。（如：从缅甸打电话到国内进行诈骗，犯罪结果在国内，因此也能依据属地管辖原则进行管辖）<br><strong>b. 犯罪结果。</strong>从共同犯罪上分，包括整体结果和部分共犯人的结果；从犯罪形态上分，包括实害结果和危险结果。</li>
</ol>
<p><strong>（二）在中国境外犯罪：属人管辖原则、保护管辖原则、普遍管辖原则</strong></p>
<ol>
<li>属人管辖原则：我国公民在境外犯罪（但是最高刑为三年以下有期徒刑的（即轻罪），可以不予追究；国家工作人员和军人一律追究）</li>
<li>保护管辖原则：外国人在境外对中国人或中国政府犯罪，且为重罪（最低刑3年以上），且遵循双重犯罪原则（即犯罪地的法律也认为是犯罪）</li>
<li>普遍管辖：国际犯罪<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%91%E6%B3%95%E7%9A%84%E7%A9%BA%E9%97%B4%E6%95%88%E5%8A%9B.png" alt="刑法的空间效力" style="zoom:50%;" /></li>
</ol>
<p>朝鲜领导的哥哥金正男在马来西亚被越南人杀死。朝鲜-保护管辖；马来西亚-属地管辖；越南-属人管辖。</p>
<h4 id="二、刑法的时间效力（即溯及力）"><a href="#二、刑法的时间效力（即溯及力）" class="headerlink" title="二、刑法的时间效力（即溯及力）"></a>二、刑法的时间效力（即溯及力）</h4><ol>
<li>从旧兼从轻原则：原则上适用旧法（行为时的法律），但适用新法有利于被告人时，适用新法。也即，原则上禁止法律溯及既往，例外是不禁止有利于被告人的溯及既往。（如：适用新法，被告人能够被判得更轻）</li>
<li><font color =red>该原则的使用对象是未决犯，即案件发生在旧法，审判发生在新法。</font>对于已决犯（已判决的案件）则不存在是否溯及既往的问题。<br>另，再审案件也是适用旧法。</li>
<li>司法解释的时间效力：<br><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%91%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E6%95%88%E5%8A%9B.png" alt="司法解释的时间效力" style="zoom:50%;" />即第一种是“从旧”，第二种是“从旧兼从轻”<br><em>随笔：专业无贵贱，知识有阶梯；叔本华：人的痛苦都来自价值观</em></li>
</ol>
]]></content>
      <categories>
        <category>司法考试</category>
      </categories>
      <tags>
        <tag>刑法</tag>
        <tag>柏浪涛</tag>
      </tags>
  </entry>
  <entry>
    <title>结构化ABS与金融模型：投资收益与风险管理</title>
    <url>/post/32586/</url>
    <content><![CDATA[<h1 id="结构化融资与非标产品"><a href="#结构化融资与非标产品" class="headerlink" title="结构化融资与非标产品"></a>结构化融资与非标产品</h1><h2 id="结构化融资："><a href="#结构化融资：" class="headerlink" title="结构化融资："></a>结构化融资：</h2><ol>
<li><strong>结构化融资评级：</strong>指以基础资产未来所产生的现金流为偿付支持，通过结构化设计进行信用增级，在此基础上发行资产支持证券的过程。它是以特定资产组合或特定现金流为支持，发行可交易证券的一种融资形式。</li>
<li><strong>结构化融资主要分为：</strong>信贷资产证券化、交易商协会ABN、证监会主管ABS、银保监会主管ABS 。</li>
</ol>
<h2 id="非标准化债权资产评级："><a href="#非标准化债权资产评级：" class="headerlink" title="非标准化债权资产评级："></a>非标准化债权资产评级：</h2><ol>
<li><strong>非标准化债权资产：</strong>指未在银行间市场及证券交易所市场交易的债权性资产，它通常绕过银行或债券审批管理部门，通过某个非标准化的载体(如信托计划等)，将投融资双方衔接起来。</li>
<li><strong>非标准化产品：</strong>信托产品、 保险债权投资计划、保险股权投资计划、保险资产支持计划等、集合资金信托计划、信贷资产支持证券、专项资产管理计划、资产支持计划等都属于非标资产。</li>
</ol>
<h1 id="金融模型"><a href="#金融模型" class="headerlink" title="金融模型"></a>金融模型</h1><h2 id="蒙特卡洛模型-Monte-Carlo-simulation"><a href="#蒙特卡洛模型-Monte-Carlo-simulation" class="headerlink" title="蒙特卡洛模型(Monte-Carlo simulation)"></a>蒙特卡洛模型(Monte-Carlo simulation)</h2><h2 id="有限差分方法-Finite-Difference-Method"><a href="#有限差分方法-Finite-Difference-Method" class="headerlink" title="有限差分方法(Finite-Difference Method)"></a>有限差分方法(Finite-Difference Method)</h2><h2 id="风险价值-Value-at-Risk"><a href="#风险价值-Value-at-Risk" class="headerlink" title="风险价值(Value-at-Risk)"></a>风险价值(Value-at-Risk)</h2><h2 id="预期缺口-Expected-Shortfall"><a href="#预期缺口-Expected-Shortfall" class="headerlink" title="预期缺口(Expected Shortfall)"></a>预期缺口(Expected Shortfall)</h2><h2 id="Jump-Diffusion-Model"><a href="#Jump-Diffusion-Model" class="headerlink" title="Jump-Diffusion Model"></a>Jump-Diffusion Model</h2><h2 id="Local-Stochastic-Volatility-Model"><a href="#Local-Stochastic-Volatility-Model" class="headerlink" title="Local Stochastic Volatility Model"></a>Local Stochastic Volatility Model</h2><h2 id="市场风险计量模型"><a href="#市场风险计量模型" class="headerlink" title="市场风险计量模型"></a>市场风险计量模型</h2><h2 id="交易对手信用风险测量模型"><a href="#交易对手信用风险测量模型" class="headerlink" title="交易对手信用风险测量模型"></a>交易对手信用风险测量模型</h2>]]></content>
      <categories>
        <category>风险管理与信用</category>
      </categories>
      <tags>
        <tag>投资收益与风险管理</tag>
        <tag>信用评级</tag>
        <tag>结构融资/非标融资</tag>
        <tag>资产证券化ABS</tag>
      </tags>
  </entry>
  <entry>
    <title>资金周报</title>
    <url>/post/44421/</url>
    <content><![CDATA[<h1 id="市场随笔"><a href="#市场随笔" class="headerlink" title="市场随笔"></a>市场随笔</h1><h2 id="24-2-26-资产荒持续-30年国债"><a href="#24-2-26-资产荒持续-30年国债" class="headerlink" title="24.2.26 资产荒持续-30年国债"></a>24.2.26 资产荒持续-30年国债</h2><p>2024年2月26日，长期默默无闻的30年国债成为全市场交易量最大的债券品种，从10年期国开<script type="math/tex">\rightarrow</script>10年期国债<script type="math/tex">\rightarrow</script>到现在10年与30年国债并存。<br><img src="C:/Users/10939/AppData/Roaming/Typora/typora-user-images/image-20240227104335877.png" style="zoom: 25%;" /></p>
<h1 id="Southern-FICC-资金周报（2023-12-25-2023-12-29）"><a href="#Southern-FICC-资金周报（2023-12-25-2023-12-29）" class="headerlink" title="Southern-FICC|资金周报（2023.12.25-2023.12.29）"></a>Southern-FICC|资金周报（2023.12.25-2023.12.29）</h1><p>本周央行公开市场共有6,720亿元逆回购到期，央行累计开展19,290亿元逆回购操作与1800亿国库现金定存，实现净投放14,370亿元。</p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/A001.png" alt="A001"></p>
<p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/A002.png" alt="A002"></p>
<p>2023年最后一周，在央行公开市场持续净投放的大力呵护下，市场资金面大幅度宽松。周一至周三分别净投放2870亿，3440亿，2920亿。本周利率短暂冲高，而后一泻千里，回到均值附近。观察分机构净融出情况，<font color =red>—Waiting FOR Info—</font>&gt;</p>
<h2 id="要素："><a href="#要素：" class="headerlink" title="要素："></a>要素：</h2><ol>
<li><p>本周逆回购、MLF到期量，本周累计投放量，本周净投放。（央行公开市场交易公告/CFETS央行公开市场业务公告）<br>资金分层：资金利率趋势与信用利差（短长、国股行与中小行与非银机构（逆回购利率、DR、R、GC）、交易所与银行间、城投与国债、国股行与城商行票据转贴现利率）、分机构（大行股份行、城商行农商行、非银机构基金证券及货币市场基金）（周度/日度）正逆回购净额。</p>
</li>
<li><p>隔夜期限，7天期限，长期限跨年，每日走势成交量，分层态势，质押国股、地方债，国股存单，质押信用债等的利率报价变动</p>
</li>
<li><p>汇总1、7、14、21，1、2、3、4、6、9、1的加权利率均值、成交量及占比，期限利差变化（R）、分层变化（R-DR），下周公开市场到期量、政府债券到期发行统计。</p>
</li>
<li><p>（上交所）交易所市场：GC001、7、14、28，均值及日度趋势，成交量及占比。</p>
</li>
<li><p>体现资金绝对价格的绝对指标：存款类机构质押式回购加权利率（DR系列）、银行间质押式回购加权利率（R系列）、上证质押式国债回购加权平均利率（GC系列）。</p>
</li>
<li><p><a href="https://southern-ficc.github.io/post/44421/">资金分层</a></p>
<p>银行间市场：存款类机构与银行间机构分层：R007 - DR007；R001 - DR001</p>
<p>上海交易所与银行间分层：GC007 - R007；GC001 - R001</p>
<p>超额流动性：R007 - 7天逆回购利率；DR007 - 7天逆回购利率</p>
<p>期限利差、机构间利差（国股行与中小行与非银机构、城投与国债）、产品间利差（非银机构基金证券及货币市场基金）、市场间利差（上海交易所与银行间）</p>
<p>基本面影响政策面，政策面影响资金面、资金面影响供需面、供需面影响情绪面</p>
</li>
</ol>
<h2 id="要素作用-杂谈-："><a href="#要素作用-杂谈-：" class="headerlink" title="要素作用(杂谈)："></a>要素作用(杂谈)：</h2><p>资金市场的流动性层级为大行-中小行-非银机构。<br>大行、股份行是资金市场的主要供给方，净融出金额与资金价格呈现负相关性<br><em>月末/季末指标压力导致减少资金融出，致使资金价格季节性抬升。<br>城、农商行处于流动性层级的中间位置。通常选择承担信用及流动性风险从而获得更大的利差。融出行为基本与资金利率呈负相关
</em>表现为押利率债给大行融入资金，收信用债融出资金给非银机构。<br><em>近年来，农商行由于贷款投放减弱，需要增加金融市场业务收益，因此资金交易行为与非银机构相似<br>货币市场基金虽是资金供给方，但是没有对资金价格产生较大影响，属资金价格的被动接受者。净融出与资金价格呈正相关。<br>基金、证券通过资金市场满足流动性需求以及加杠杆以增强债券投资的收益率，资金净融入金额与资金价格负相关。
</em>资金面收紧的时期，‘滚隔夜’难度加大，基金、证券对14D及以上的长期资金需求往往是后续资金面收紧的领先指标。</p>
<p>通过央行的货币投放、缴税、政府债券发行、财政支出等影响超额存款准备金的因素以判断资金面的松紧。同时，还可以通过资金价格和资金分层判断资金面松紧。</p>
<p>信用利差：五年期AAA城投债-5年期国债(短期1年)</p>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>资金周报</tag>
      </tags>
  </entry>
  <entry>
    <title>金融机构内控指引与法律法规(含监管报表与系统)</title>
    <url>/post/32433/</url>
    <content><![CDATA[<h1 id="查询路径"><a href="#查询路径" class="headerlink" title="查询路径"></a>查询路径</h1><h3 id="国家法律法规数据库"><a href="#国家法律法规数据库" class="headerlink" title=" 国家法律法规数据库"></a><i class="fa-solid fa-link"></i> <a href="https://flk.npc.gov.cn/xzfg.html">国家法律法规数据库</a></h3><h3 id="证监会信息公开"><a href="#证监会信息公开" class="headerlink" title=" 证监会信息公开"></a><i class="fa-solid fa-link"></i> <a href="http://www.csrc.gov.cn/csrc/c101951/zfxxgk_zdgk.shtml?channelid=8bf8f81659be4d00920fbb3db02d0102">证监会信息公开</a></h3><h3 id="证券期货法规数据库系统"><a href="#证券期货法规数据库系统" class="headerlink" title=" 证券期货法规数据库系统"></a><i class="fa-solid fa-link"></i> <a href="https://neris.csrc.gov.cn/falvfagui/">证券期货法规数据库系统</a></h3><h3 id="中国会计视野"><a href="#中国会计视野" class="headerlink" title=" 中国会计视野"></a><i class="fa-solid fa-link"></i> <a href="https://law.esnai.com/do.aspx?controller=home&amp;action=ListByType&amp;LawType=008004002">中国会计视野</a></h3><h3 id="中国证券业协会法律法规"><a href="#中国证券业协会法律法规" class="headerlink" title=" 中国证券业协会法律法规"></a><i class="fa-solid fa-link"></i> <a href="https://www.sac.net.cn/flfg/zlgz/">中国证券业协会法律法规</a></h3><h3 id="中国证券投资基金业协会产品备案和数据报送"><a href="#中国证券投资基金业协会产品备案和数据报送" class="headerlink" title=" 中国证券投资基金业协会产品备案和数据报送"></a><i class="fa-solid fa-link"></i> <a href="https://www.amac.org.cn/fwdt/wyb/jgdjhcpbeian/smjjglrdjhcpba/fwzn/">中国证券投资基金业协会产品备案和数据报送</a></h3><h1 id="法律法规"><a href="#法律法规" class="headerlink" title="法律法规"></a>法律法规</h1><h3 id="中华人民共和国证券法"><a href="#中华人民共和国证券法" class="headerlink" title=" 中华人民共和国证券法"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/中华人民共和国证券法.pdf" target="_blank"><strong>中华人民共和国证券法</strong></a></h3><h3 id="中华人民共和国公司法"><a href="#中华人民共和国公司法" class="headerlink" title=" 中华人民共和国公司法"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/中华人民共和国公司法.pdf" target="_blank"><strong>中华人民共和国公司法</strong></a></h3><h3 id="中华人民共和国证券投资基金法"><a href="#中华人民共和国证券投资基金法" class="headerlink" title=" 中华人民共和国证券投资基金法"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/中华人民共和国证券投资基金法.pdf" target="_blank"><strong>中华人民共和国证券投资基金法</strong></a></h3><h1 id="规范性文件"><a href="#规范性文件" class="headerlink" title="规范性文件"></a>规范性文件</h1><h2 id="财政部-证监会"><a href="#财政部-证监会" class="headerlink" title="财政部\证监会"></a>财政部\证监会</h2><h3 id="证券期货经营机构私募资产管理计划运作管理规定"><a href="#证券期货经营机构私募资产管理计划运作管理规定" class="headerlink" title=" 证券期货经营机构私募资产管理计划运作管理规定"></a><i class="fa-solid fa-link"></i> <a href="http://www.csrc.gov.cn/csrc/c101954/c6987994/content.shtml">证券期货经营机构私募资产管理计划运作管理规定</a></h3><h4 id="证券期货经营机构私募资产管理计划运作管理规定-1"><a href="#证券期货经营机构私募资产管理计划运作管理规定-1" class="headerlink" title=" 证券期货经营机构私募资产管理计划运作管理规定"></a><i class="fa-solid fa-file-pdf"></i> <a href="http://www.csrc.gov.cn/csrc/c101954/c6987994/6987994/files/%E9%99%84%E4%BB%B61%EF%BC%9A%E3%80%8A%E8%AF%81%E5%88%B8%E6%9C%9F%E8%B4%A7%E7%BB%8F%E8%90%A5%E6%9C%BA%E6%9E%84%E7%A7%81%E5%8B%9F%E8%B5%84%E4%BA%A7%E7%AE%A1%E7%90%86%E8%AE%A1%E5%88%92%E8%BF%90%E4%BD%9C%E7%AE%A1%E7%90%86%E8%A7%84%E5%AE%9A%E3%80%8B.pdf">证券期货经营机构私募资产管理计划运作管理规定</a></h4><h3 id="2023《证券期货经营机构私募资产管理业务管理办法》"><a href="#2023《证券期货经营机构私募资产管理业务管理办法》" class="headerlink" title=" 2023《证券期货经营机构私募资产管理业务管理办法》"></a><i class="fa-solid fa-link"></i> <a href="http://www.csrc.gov.cn/csrc/c101953/c6987995/content.shtml">2023《证券期货经营机构私募资产管理业务管理办法》</a></h3><h4 id="证券期货经营机构私募资产管理业务管理办法"><a href="#证券期货经营机构私募资产管理业务管理办法" class="headerlink" title=" 证券期货经营机构私募资产管理业务管理办法"></a><i class="fa-solid fa-file-pdf"></i> <a href="http://www.csrc.gov.cn/csrc/c101953/c6987995/6987995/files/%E9%99%84%E4%BB%B61%EF%BC%9A%E3%80%8A%E8%AF%81%E5%88%B8%E6%9C%9F%E8%B4%A7%E7%BB%8F%E8%90%A5%E6%9C%BA%E6%9E%84%E7%A7%81%E5%8B%9F%E8%B5%84%E4%BA%A7%E7%AE%A1%E7%90%86%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8A%9E%E6%B3%95%E3%80%8B.pdf">证券期货经营机构私募资产管理业务管理办法</a></h4><h3 id="2020《证券投资基金托管业务管理办法》"><a href="#2020《证券投资基金托管业务管理办法》" class="headerlink" title=" 2020《证券投资基金托管业务管理办法》"></a><i class="fa-solid fa-link"></i> <a href="http://www.csrc.gov.cn/csrc/c101877/c1029534/content.shtml">2020《证券投资基金托管业务管理办法》</a></h3><h4 id="证券投资基金托管业务管理办法"><a href="#证券投资基金托管业务管理办法" class="headerlink" title=" 证券投资基金托管业务管理办法"></a><i class="fa-solid fa-file-pdf"></i> <a href="http://www.csrc.gov.cn/csrc/c101877/c1029534/1029534/files/%E9%99%84%E4%BB%B61%EF%BC%9A%E8%AF%81%E5%88%B8%E6%8A%95%E8%B5%84%E5%9F%BA%E9%87%91%E6%89%98%E7%AE%A1%E4%B8%9A%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8A%9E%E6%B3%95.pdf">证券投资基金托管业务管理办法</a></h4><h3 id="关于强化上市公司及拟上市企业内部控制建设-推进内部控制评价和审计的通知"><a href="#关于强化上市公司及拟上市企业内部控制建设-推进内部控制评价和审计的通知" class="headerlink" title=" 关于强化上市公司及拟上市企业内部控制建设 推进内部控制评价和审计的通知"></a><i class="fa-solid fa-link"></i> <a href="https://kjs.mof.gov.cn/zhengcefabu/202312/t20231215_3922541.htm">关于强化上市公司及拟上市企业内部控制建设 推进内部控制评价和审计的通知</a></h3><h3 id="企业内部控制基本规范"><a href="#企业内部控制基本规范" class="headerlink" title=" 企业内部控制基本规范"></a><i class="fa-solid fa-link"></i> <a href="https://kjs.mof.gov.cn/zhengcefabu/200807/t20080704_55982.htm">企业内部控制基本规范</a></h3><h3 id="企业内部控制配套指引"><a href="#企业内部控制配套指引" class="headerlink" title=" 企业内部控制配套指引"></a><i class="fa-solid fa-link"></i> <a href="https://kjs.mof.gov.cn/zhengcefabu/201005/t20100505_290459.htm">企业内部控制配套指引</a></h3><h4 id="企业内部控制应用指引"><a href="#企业内部控制应用指引" class="headerlink" title=" 企业内部控制应用指引"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/企业内部控制应用指引.pdf" target="_blank"><strong>企业内部控制应用指引</strong></a></h4><h4 id="企业内部控制评价指引"><a href="#企业内部控制评价指引" class="headerlink" title=" 企业内部控制评价指引"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/企业内部控制评价指引.pdf" target="_blank"><strong>企业内部控制评价指引</strong></a></h4><h4 id="企业内部控制审计指引"><a href="#企业内部控制审计指引" class="headerlink" title=" 企业内部控制审计指引"></a><i class="fa-solid fa-file-pdf"></i> <a href="https://Southern-FICC.github.io/share/企业内部控制审计指引.pdf" target="_blank"><strong>企业内部控制审计指引</strong></a></h4><h3 id="《公开发行证券的公司信息披露编报规则第21号——年度内部控制评价报告的一般规定》"><a href="#《公开发行证券的公司信息披露编报规则第21号——年度内部控制评价报告的一般规定》" class="headerlink" title=" 《公开发行证券的公司信息披露编报规则第21号——年度内部控制评价报告的一般规定》"></a><i class="fa-solid fa-link"></i> <a href="https://kjs.mof.gov.cn/zhengcefabu/201401/t20140107_1033337.htm">《公开发行证券的公司信息披露编报规则第21号——年度内部控制评价报告的一般规定》</a></h3><h1 id="监管报表"><a href="#监管报表" class="headerlink" title="监管报表"></a>监管报表</h1><h2 id="1104-非现场监管信息系统"><a href="#1104-非现场监管信息系统" class="headerlink" title="1104-非现场监管信息系统"></a>1104-非现场监管信息系统</h2><h3 id="2024年1104报表"><a href="#2024年1104报表" class="headerlink" title=" 2024年1104报表"></a><i class="fa-solid fa-link"></i> <a href="https://zhuanlan.zhihu.com/p/675868050">2024年1104报表</a></h3><h2 id="理财产品、非标及标准债券产品"><a href="#理财产品、非标及标准债券产品" class="headerlink" title="理财产品、非标及标准债券产品"></a>理财产品、非标及标准债券产品</h2><h3 id="理财产品相关监管政策"><a href="#理财产品相关监管政策" class="headerlink" title=" 理财产品相关监管政策"></a><i class="fa-solid fa-link"></i> <a href="https://zhuanlan.zhihu.com/p/548968240">理财产品相关监管政策</a></h3><h1 id="金融机构柜台系统"><a href="#金融机构柜台系统" class="headerlink" title="金融机构柜台系统"></a>金融机构柜台系统</h1><p>Pending</p>
<h1 id="第二代偿付能力监管制度"><a href="#第二代偿付能力监管制度" class="headerlink" title="第二代偿付能力监管制度"></a>第二代偿付能力监管制度</h1><h3 id="第二代偿付能力监管制度-1"><a href="#第二代偿付能力监管制度-1" class="headerlink" title=" 第二代偿付能力监管制度"></a><i class="fa-solid fa-link"></i> <a href="https://github.com/Southern-FICC/Southern-FICC.github.io/tree/master/share/%E4%BF%9D%E9%99%A9%E5%85%AC%E5%8F%B8%E5%81%BF%E4%BB%98%E8%83%BD%E5%8A%9B">第二代偿付能力监管制度</a></h3><h1 id="证券期货监管法规汇编"><a href="#证券期货监管法规汇编" class="headerlink" title="证券期货监管法规汇编"></a>证券期货监管法规汇编</h1><h3 id="证券期货监管法规汇编-1"><a href="#证券期货监管法规汇编-1" class="headerlink" title=" 证券期货监管法规汇编"></a><i class="fa-solid fa-link"></i> <a href="https://github.com/Southern-FICC/Southern-FICC.github.io/tree/master/share/%E8%AF%81%E5%88%B8%E6%9C%9F%E8%B4%A7%E9%A3%8E%E6%8E%A7">证券期货监管法规汇编</a></h3>]]></content>
      <categories>
        <category>投研交易</category>
        <category>内控指引与法律法规</category>
      </categories>
      <tags>
        <tag>内控指引与法律法规(含系统)</tag>
        <tag>1104监管报表</tag>
        <tag>人行大集中</tag>
        <tag>偿二代</tag>
      </tags>
  </entry>
  <entry>
    <title>银行间市场-利率衍生品</title>
    <url>/post/49094/</url>
    <content><![CDATA[<h1 id="利率衍生品"><a href="#利率衍生品" class="headerlink" title="利率衍生品"></a>利率衍生品</h1><p><strong>产品种类：</strong>债券远期、利率互换(IRS)、远期利率协议(FRA)、标准利率互换、标准化债券远期<br><em>利率互换的一级交易对手方为上清所，由上清所作为中央对手方，进行集中清算和担保交收的工作，所以不再有交易对手方风险，无信用风险。</em></p>
<p><strong>利率衍生品的<u>价格发现</u>功能：</strong></p>
<p>（一）远期利率: 利率互换市场的极佳流动性使得互换利率成为远期利率的更佳表征工具。远期利率是对冲工具定价、曲线插值等的基础，集中反映了市场当前的利率预期。<br>（二）基准利率: 特别是对于一年以上国债流动性不佳的市场，互换利率成为比国债利率更好的基准利率。</p>
<h3 id="利率互换"><a href="#利率互换" class="headerlink" title="利率互换"></a>利率互换</h3><h3 id="基础知识及交易要素"><a href="#基础知识及交易要素" class="headerlink" title="基础知识及交易要素"></a>基础知识及交易要素</h3><ol>
<li>利率互换是指交易双方约定在未来一定期限内，根据约定数量的名义本金按照不同的计息方法进行利息交换的金融合约。</li>
<li>现金流交换形式——利息交换形式：（一）固定换浮动（二）浮动换浮动（三）固定换固定。其中固定利率换浮动利率（Plain Vanilla IRS）是目前最为普遍的标准型利率互换。<strong>【Fixed payer or Fixed receiver】</strong></li>
<li>利率互换的需求：<br>a.双方分别由固定利率和浮动利率的借款需求；双方在利率(贷款)市场上均存在比较优势；双方均在自己比较劣势的市场上有借款需求；借款规模和期限匹配<br>b.双方分别持有固定利率资产(负债)和浮动利率资产(负债)；双方对自己持有的资产(负债)的现金流性质不满意，而希望与对方资产或负债的现金流进行交换；双方持有的资产(负债)规模和期限基本匹配</li>
<li>利率互换的目的(作用)：降低融资成本或提高资产收益；管理利率风险；构建结构化产品</li>
<li>合约基本条款：<br><strong>a.互换期限：</strong>传统互换的期限通常比较长，123457103050(年)、我国银行间市场还有1369(月)、10+(天)的利率互换协议<br><strong>b.支付周期：</strong>最常见：半年付息、季度付息<br><strong>c.计息基础：</strong>ACT/360、ACT/365、ACT/ACT；<strong>算头不算尾</strong><br><em>计息期是指相邻两个重置日间隔的天数。各期利息金额为以名义本金乘以当期届时的浮动利率，一般提前一个计息期确定浮动利率。且若计息周期小于结算周期，则复利计息，反之单利计息</em><br><strong>d.参考利率：</strong><br>（1）普遍为Shibor3M、FR007、FDR001、FDR007、ShiborON、LPR1Y(季付)、LPR5Y(季付)、1年定期存款和1年贷款利率<br>（2）<strong>或者使用利差作为参考利率：</strong>S3M/R07(Shibor 3M-FR007)、GB10(十年期国债收益率)、CDB10(十年期国开债收益率)、D10/G10(10年期国开债-10年期国债)和AAA3/D3(3年期AAA中短期票据-3年期国开债)<br><strong>e.贴现利率：</strong>一般将浮动利率作为贴现利率。<br><strong>f.关键日期：</strong>交易日、起息日、支付日、到期日/终止日、营业日:除非交易双方另有约定，指下列日期:对于任何付款而言，为相关账户所在地商业银行正常营业的日期(不含法定节假日);对通知或通讯而言，为接收方提供的通知地址中指定城市的商业银行正常营业的日期(不含法定节假日)<br><strong>g.前端残段：</strong>指交易双方约定的不可整除支付周期的首个计息期。前端残段的最后一日为首个支付日，首个支付日根据营业日准则发生调整的，前端残段天数不发生调整。<em>前端残段，如FR007支付频率为7天，但双方约定月底结算，因此不能整除，此时将残段最后一日    作为首个支付日</em><br><strong>h.支付日：</strong>指交易一方进行支付的日期。支付日遵循营业日准则。支付日=起息日+支付周期。对于支付周期为整月或倍数月，则下一支付日为对应下个月的同一日，若无则选择该月最后一日。若存在约定的前端残段的，将残段最后一日作为首个支付日。<br><strong>i.名义本金：</strong>以万元为单位，最小交易量为10万元，最小变动单位为1万元。<br><strong>j.重置频率：</strong>即浮动利率重置的频率。</li>
</ol>
<table>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%B8%B8%E7%94%A8%E8%AE%A1%E6%81%AF%E5%9F%BA%E5%87%86%E6%94%B9.png"/></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E4%BA%A4%E6%98%93%E8%A6%81%E7%B4%A0%E5%9B%BE%E7%A4%BA" style="zoom:50%;" /></td>
</table>

<h3 id="交易方式"><a href="#交易方式" class="headerlink" title="交易方式"></a>交易方式</h3><p><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2bid-offer%E5%AD%97%E6%AE%B5.png" alt="image-20240406205936263" /><br><strong>offer: 报卖价，即卖swap，即对手方愿意收的固定利率；bid: 报买价，即买swap，即对手方愿意支出的固定利率</strong><br><strong>同一对手方的bid offer价格为其预期利率价格水平，特别是二者中间价</strong></p>
<h4 id="相关成交术语"><a href="#相关成交术语" class="headerlink" title="相关成交术语"></a>相关成交术语</h4><p>（1）TKN：“要了”，买家不还价，卖方offer直接被点击成交（一般利率下行的趋势，买盘压力大）<br>（2）GIVEN：“给了”，卖方不还价，买方Bid直接被点成交（一般利率上行的趋势，卖盘压力大）<br>（3）Trd：买卖双方协商后达成交易<br>（4）Done：直接与你的报价匹配<br>（5）Ref：报价撤销</p>
<h4 id="利率互换的多空歧义"><a href="#利率互换的多空歧义" class="headerlink" title="利率互换的多空歧义"></a>利率互换的多空歧义</h4><p>（1）在中国大陆市场或者中资机构，利率互换的多空说法与现券相反，即看利率上行的支付固定方被称为利率互换的多头(而看利率上行是现券的空头)，看利率下行的支付浮动方则称为利率互换的空头。<strong>因为国内认为利率互换交易的是利率，所以看利率上升成为看多，而现券交易的是现券，看利率上升，即现券价格下跌，即看空。</strong><br>（2）在外国市场、中国大陆的一些外资机构，多空与现券保持一致，即看利率上行为空否则为多。<br>（3）在实务中为了防止不必要的歧义，比较少说多空，而是直接说是支固收浮或者支浮收固。一般支付固定方直接说pay fixed，并称其进入了一个payer swap。</p>
<h4 id="对手方限额"><a href="#对手方限额" class="headerlink" title="对手方限额"></a>对手方限额</h4><p>利率互换：关系授信、额度授信<font color =red>二选一</font>，<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E9%99%90%E9%A2%9D%E8%AE%BE%E7%BD%AE.png">图1</a></p>
<h4 id="成交行情"><a href="#成交行情" class="headerlink" title="成交行情"></a>成交行情</h4><ul>
<li>报价行情：利率互换聚合行情、利率互换实时承接、普通利率互换、标准利率互换、标准债券远期、CDS双向报价</li>
<li>成交行情：利率互换成交、标准利率互换成交、标准债券远期成交、债券远期成交、信用风险缓释凭证成交、信用违约互换成交、利率期权成交行情</li>
</ul>
<h4 id="报价方式"><a href="#报价方式" class="headerlink" title="报价方式"></a>报价方式</h4><ol>
<li>协商驱动（询价|‘格式化报价’）——对话报价（直接对话、聊天转对话）<br>a.须交易双方都给对手方维护利率互换市场对话报价的<font color =red>对手方限额</font>方可成交。支持询价，轮次不超过5次。<br>b.计算机构选择“中国外汇交易中心”的前提是与交易中心签署了计算代理协议。<a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2%E2%80%94%E5%8D%8F%E5%95%86%E6%8A%A5%E4%BB%B7.png">利率互换—协商报价</a></li>
<li>报价驱动（由做市/资金商报价）——请求报价—利率互换<br>a.分仓方式：不分仓和Pre-Allocation<br>b.<font color = red>当请求报价发送给多个对手方且多个对手方机构给予回复，请求方仅可就一笔回复进行成交，不可成交多笔。</font>已确认成交的请求报价结束，不再“我的请求”界面显示<br>c.<font color =red>选择直接合约，授信充足时，回复方回复量必须等于请求量；授信不足时，系统自动计算授信范围内的最大回复量，不可修改</font> <a href="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E8%AF%B7%E6%B1%82%E6%8A%A5%E4%BB%B7%E2%80%94%E5%88%A9%E7%8E%87%E4%BA%92%E6%8D%A2.png">[请求报价—利率互换]</a></li>
</ol>
<h4 id="交易时间及交易方式"><a href="#交易时间及交易方式" class="headerlink" title="交易时间及交易方式"></a>交易时间及交易方式</h4><table>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E4%BA%A4%E6%98%93%E6%97%B6%E9%97%B4%E6%80%BB%E7%BB%93.png"/></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%88%86%E5%B8%82%E5%9C%BA%E6%8A%A5%E4%BB%B7%E4%B8%8E%E4%BA%A4%E6%98%93%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93.png"/></td>
</table>

<h3 id="IRS定价"><a href="#IRS定价" class="headerlink" title="IRS定价"></a>IRS定价</h3><ol>
<li>根据无套利原则，有PV(Fixed) = PV(Float)，即产品的固定利率与浮动参考利率的现金流差额的现值为零，之后随着市场利率变动，合约价格不再为零。产品的固定利率、参考利率的远期利率如下：通过”单变量求解“进行IRS定价 及 通过”单变量求解“计算贴现率</li>
</ol>
<table>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/IRS%E5%8D%95%E5%8F%98%E9%87%8F%E6%B1%82%E8%A7%A3%E5%AE%9A%E4%BB%B7"/></td>
    <td><img src="https://southern-ficc-1323676960.cos.ap-guangzhou.myqcloud.com/storage/%E5%8D%95%E5%8F%98%E9%87%8F%E6%B1%82%E8%A7%A3%E8%B4%B4%E7%8E%B0%E7%8E%87"/></td>
</table>

<h3 id="IRS交易策略"><a href="#IRS交易策略" class="headerlink" title="IRS交易策略"></a>IRS交易策略</h3><ul>
<li>利差套利<script type="math/tex">\rightarrow</script>净票息收益<br>（1）滚动借入低成本资金投入高利率资产<br>（2）通过利率互换支固收浮冲抵借款成本</li>
<li>骑乘策略<br>（1）先持有吃票息，待剩余期限减少，吃利得</li>
<li>期差交易(Spread Trade)<script type="math/tex">\rightarrow</script>研究对象为同一标的的长、短期变化幅度不同<br>（1）陡峭策略：卖长买短<script type="math/tex">\rightarrow</script>Buy Spread<script type="math/tex">\rightarrow</script>Pay Spread<br>（2）平缓策略：买长卖短<script type="math/tex">\rightarrow</script>Sell Spread<script type="math/tex">\rightarrow</script>Receive Spread<br>（3）正蝶式策略：下凸<script type="math/tex">\rightarrow</script>买中间卖两边<br>（4）反蝶式策略：上凸<script type="math/tex">\rightarrow</script>买两边卖中间<ul>
<li>Spread的表示方法为”短端 * 长端“，其中期差交易的方式由长端决定，即买卖长端<br>如：Buy Spread<script type="math/tex">\rightarrow</script>Pay 5Y IRS + Receive 1Y IRS<br>   Pay Spread<script type="math/tex">\rightarrow</script>Pay 1Y IRS + Receive 5Y IRS</li>
</ul>
</li>
<li>基差交易(Basis Trade)<script type="math/tex">\rightarrow</script>不同市场<strong>但同一期限</strong>的收益率曲线之间的利差<br>有：期现基差、信用基差、利率互换基差、现券+利率互换基差策略<ul>
<li>利率互换基差策略<script type="math/tex">\longrightarrow</script><strong>基差扩大买入basis(Pay)，缩小卖出basis(Receive)</strong><br>表达方式为”曲线1/曲线2“，如Shibor/FR007 Basis，交易方向为”曲线1“<br>如：Pay Shibor/FR007 Basis 为 Pay Shibor IRS + Receive FR007 IRS<br>   Receive Shibor/FR007 Basis 为 Receive Shibor IRS + Pay FR007 IRS</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>投研交易</category>
        <category>本币交易</category>
      </categories>
      <tags>
        <tag>利率衍生品</tag>
      </tags>
  </entry>
</search>
